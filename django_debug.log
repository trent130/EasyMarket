DEBUG 2024-12-12 06:20:07,870 base Asynchronous handler adapted for middleware marketplace.middleware.TwoFactorMiddleware.
WARNING 2024-12-12 06:29:36,629 log Unauthorized: /marketplace/api/wishlist/
WARNING 2024-12-12 06:29:36,631 log Unauthorized: /marketplace/api/wishlist/
DEBUG 2024-12-12 06:29:39,514 utils (0.261) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:39,983 utils (0.007) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:40,004 utils (0.002) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:40,016 utils (0.001) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:40,625 utils (0.003) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:40,637 utils (0.001) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:40,650 utils (0.001) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:41,215 utils (0.006) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE "products_product"."stock" > ("products_product"."reserved_stock") GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" LIMIT 21; args=(); alias=default
DEBUG 2024-12-12 06:29:42,627 utils (0.002) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE "products_product"."stock" > ("products_product"."reserved_stock") GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" LIMIT 21; args=(); alias=default
DEBUG 2024-12-12 06:29:42,628 utils (0.002) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:42,821 utils (0.001) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE "products_product"."stock" > ("products_product"."reserved_stock") GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" LIMIT 21; args=(); alias=default
DEBUG 2024-12-12 06:29:42,833 utils (0.003) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:42,910 base Exception while resolving variable 'exception_notes' in template 'unknown'.
Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/current_thread_executor.py", line 40, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py", line 124, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/trent22/Documents/EasyMarket/./products/views.py", line 280, in trending
    queryset = self.get_queryset().filter(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py", line 756, in resolve_expression
    rhs = self.rhs.resolve_expression(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py", line 753, in resolve_expression
    lhs = self.lhs.resolve_expression(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 2010, in resolve_ref
    join_info = self.setup_joins(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 1863, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
django.core.exceptions.FieldError: Cannot resolve keyword 'average_rating' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 883, in _resolve_lookup
    current = current[bit]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/context.py", line 85, in __getitem__
    raise KeyError(key)
KeyError: 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 889, in _resolve_lookup
    if isinstance(current, BaseContext) and getattr(
AttributeError: type object 'Context' has no attribute 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 899, in _resolve_lookup
    current = current[int(bit)]
ValueError: invalid literal for int() with base 10: 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 906, in _resolve_lookup
    raise VariableDoesNotExist(
django.template.base.VariableDoesNotExist: Failed lookup for key [exception_notes] in [{'True': True, 'False': False, 'None': None}, {'is_email': False, 'unicode_hint': '', 'frames': [{'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69800>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py', 'function': 'inner', 'lineno': 42, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/trending/'>"), ('exc', 'FieldError("Cannot resolve keyword \'average_rating\' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists")'), ('get_response', '<bound method BaseHandler._get_response_async of <django.core.handlers.asgi.ASGIHandler object at 0x7fd8455e7070>>')], 'id': 140566842480640, 'pre_context': ['    can rely on getting a response instead of an exception.', '    """', '    if iscoroutinefunction(get_response):', '', '        @wraps(get_response)', '        async def inner(request):', '            try:'], 'context_line': '                response = await get_response(request)', 'post_context': ['            except Exception as exc:', '                response = await sync_to_async(', '                    response_for_exception, thread_sensitive=False', '                )(request, exc)', '            return response', ''], 'pre_context_lineno': 35, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69080>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py', 'function': '_get_response_async', 'lineno': 253, 'vars': [('self', '<django.core.handlers.asgi.ASGIHandler object at 0x7fd8455e7070>'), ('request', "<ASGIRequest: GET '/products/api/products/trending/'>"), ('response', 'None'), ('callback', '<function ProductViewSet at 0x7fd83c543b50>'), ('callback_args', '()'), ('callback_kwargs', '{}'), ('middleware_method', '<asgiref.sync.SyncToAsync object at 0x7fd844eb17e0>'), ('wrapped_callback', '<asgiref.sync.SyncToAsync object at 0x7fd83c57ebf0>')], 'id': 140566842478720, 'pre_context': ['            wrapped_callback = self.make_view_atomic(callback)', '            # If it is a synchronous view, run it in a subthread', '            if not iscoroutinefunction(wrapped_callback):', '                wrapped_callback = sync_to_async(', '                    wrapped_callback, thread_sensitive=True', '                )', '            try:'], 'context_line': '                response = await wrapped_callback(', 'post_context': ['                    request, *callback_args, **callback_kwargs', '                )', '            except Exception as e:', '                response = await sync_to_async(', '                    self.process_exception_by_middleware,', '                    thread_sensitive=True,'], 'pre_context_lineno': 246, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69840>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py', 'function': '_view_wrapper', 'lineno': 65, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/trending/'>"), ('args', '()'), ('kwargs', '{}'), ('view_func', '<function ProductViewSet at 0x7fd83c543ac0>')], 'id': 140566842480704, 'pre_context': ['', '        async def _view_wrapper(request, *args, **kwargs):', '            return await view_func(request, *args, **kwargs)', '', '    else:', '', '        def _view_wrapper(request, *args, **kwargs):'], 'context_line': '            return view_func(request, *args, **kwargs)', 'post_context': ['', '    _view_wrapper.csrf_exempt = True', '', '    return wraps(view_func)(_view_wrapper)'], 'pre_context_lineno': 58, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69200>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py', 'function': 'view', 'lineno': 124, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/trending/'>"), ('args', '()'), ('kwargs', '{}'), ('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('method', "'head'"), ('action', "'trending'"), ('handler', '<bound method ProductViewSet.trending of <products.views.ProductViewSet object at 0x7fd83c57e140>>'), ('actions', "{'get': 'trending', 'head': 'trending'}"), ('cls', "<class 'products.views.ProductViewSet'>"), ('initkwargs', "{'basename': 'product',\n 'description': 'Get trending products based on views, sales and ratings',\n 'detail': False,\n 'name': 'Trending'}")], 'id': 140566842479104, 'pre_context': ['                setattr(self, method, handler)', '', '            self.request = request', '            self.args = args', '            self.kwargs = kwargs', '', '            # And continue as usual'], 'context_line': '            return self.dispatch(request, *args, **kwargs)', 'post_context': ['', '        # take name and docstring from class', '        update_wrapper(view, cls, updated=())', '', '        # and possible attributes set by decorators', '        # like csrf_exempt from dispatch'], 'pre_context_lineno': 117, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b691c0>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'dispatch', 'lineno': 509, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/trending/'>"), ('args', '()'), ('kwargs', '{}'), ('handler', '<bound method ProductViewSet.trending of <products.views.ProductViewSet object at 0x7fd83c57e140>>')], 'id': 140566842479040, 'pre_context': ['                                  self.http_method_not_allowed)', '            else:', '                handler = self.http_method_not_allowed', '', '            response = handler(request, *args, **kwargs)', '', '        except Exception as exc:'], 'context_line': '            response = self.handle_exception(exc)', 'post_context': ['', '        self.response = self.finalize_response(request, response, *args, **kwargs)', '        return self.response', '', '    def options(self, request, *args, **kwargs):', '        """'], 'pre_context_lineno': 502, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69700>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'handle_exception', 'lineno': 469, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('exc', 'FieldError("Cannot resolve keyword \'average_rating\' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists")'), ('exception_handler', '<function exception_handler at 0x7fd83c96bf40>'), ('context', "{'args': (),\n 'kwargs': {},\n 'request': <rest_framework.request.Request: GET '/products/api/products/trending/'>,\n 'view': <products.views.ProductViewSet object at 0x7fd83c57e140>}"), ('response', 'None')], 'id': 140566842480384, 'pre_context': ['', '        exception_handler = self.get_exception_handler()', '', '        context = self.get_exception_handler_context()', '        response = exception_handler(exc, context)', '', '        if response is None:'], 'context_line': '            self.raise_uncaught_exception(exc)', 'post_context': ['', '        response.exception = True', '        return response', '', '    def raise_uncaught_exception(self, exc):', '        if settings.DEBUG:'], 'pre_context_lineno': 462, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b68740>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'raise_uncaught_exception', 'lineno': 480, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('exc', 'FieldError("Cannot resolve keyword \'average_rating\' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists")'), ('request', "<rest_framework.request.Request: GET '/products/api/products/trending/'>"), ('renderer_format', "'json'"), ('use_plaintext_traceback', 'True')], 'id': 140566842476352, 'pre_context': ['', '    def raise_uncaught_exception(self, exc):', '        if settings.DEBUG:', '            request = self.request', "            renderer_format = getattr(request.accepted_renderer, 'format')", "            use_plaintext_traceback = renderer_format not in ('html', 'api', 'admin')", '            request.force_plaintext_errors(use_plaintext_traceback)'], 'context_line': '        raise exc', 'post_context': ['', '    # Note: Views are made CSRF exempt from within `as_view` as to prevent', '    # accidental removal of this exemption in cases where `dispatch` needs to', '    # be overridden.', '    def dispatch(self, request, *args, **kwargs):', '        """'], 'pre_context_lineno': 473, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b68d00>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'dispatch', 'lineno': 506, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/trending/'>"), ('args', '()'), ('kwargs', '{}'), ('handler', '<bound method ProductViewSet.trending of <products.views.ProductViewSet object at 0x7fd83c57e140>>')], 'id': 140566842477824, 'pre_context': ['            # Get the appropriate handler method', '            if request.method.lower() in self.http_method_names:', '                handler = getattr(self, request.method.lower(),', '                                  self.http_method_not_allowed)', '            else:', '                handler = self.http_method_not_allowed', ''], 'context_line': '            response = handler(request, *args, **kwargs)', 'post_context': ['', '        except Exception as exc:', '            response = self.handle_exception(exc)', '', '        self.response = self.finalize_response(request, response, *args, **kwargs)', '        return self.response'], 'pre_context_lineno': 499, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c133440>, 'type': 'user', 'filename': '/home/trent22/Documents/EasyMarket/./products/views.py', 'function': 'trending', 'lineno': 280, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/trending/'>"), ('cache_key', "'products:trending:'"), ('cached_results', 'None')], 'id': 140566697555008, 'pre_context': ["        cache_key = get_cache_key('trending', '')", '        cached_results = cache.get(cache_key)', '', '        if cached_results is not None:', '            return Response(cached_results)', '', '        # Get products with high view counts, sales and ratings'], 'context_line': '        queryset = self.get_queryset().filter(', 'post_context': ["            stock__gt=F('reserved_stock')", '        ).annotate(', '            popularity_score=(', "                F('views_count') * 0.3 +  # 30% weight to views", "                F('total_sales') * 0.4 +  # 40% weight to sales", "                F('average_rating') * 0.3  # 30% weight to ratings"], 'pre_context_lineno': 273, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c128140>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': 'annotate', 'lineno': 1630, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('args', '()'), ('kwargs', "{'popularity_score': <CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>}")], 'id': 140566697509184, 'pre_context': ['', '    def annotate(self, *args, **kwargs):', '        """', '        Return a query set in which the returned objects have been annotated', '        with extra data or aggregations.', '        """', '        self._not_support_combined_queries("annotate")'], 'context_line': '        return self._annotate(args, kwargs, select=True)', 'post_context': ['', '    def alias(self, *args, **kwargs):', '        """', '        Return a query set with added aliases for extra data or aggregations.', '        """', '        self._not_support_combined_queries("alias")'], 'pre_context_lineno': 1623, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b31a00>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '_annotate', 'lineno': 1680, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('args', '()'), ('kwargs', "{'popularity_score': <CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>}"), ('select', 'True'), ('annotations', "{'popularity_score': <CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>}"), ('clone', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('names', "{'cart',\n 'cartitem',\n 'category',\n 'category_id',\n 'condition',\n 'created_at',\n 'description',\n 'featured',\n 'id',\n 'image',\n 'is_active',\n 'last_sale_date',\n 'last_stock_update',\n 'orderitem',\n 'price',\n 'reserved_stock',\n 'reviews',\n 'slug',\n 'stock',\n 'student',\n 'student_id',\n 'title',\n 'total_revenue',\n 'total_sales',\n 'updated_at',\n 'variants',\n 'views_count',\n 'wishlists'}"), ('alias', "'popularity_score'"), ('annotation', '<CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>')], 'id': 140566842251776, 'pre_context': ['                raise ValueError(', '                    "The annotation \'%s\' conflicts with a field on "', '                    "the model." % alias', '                )', '            if isinstance(annotation, FilteredRelation):', '                clone.query.add_filtered_relation(annotation, alias)', '            else:'], 'context_line': '                clone.query.add_annotation(', 'post_context': ['                    annotation,', '                    alias,', '                    select=select,', '                )', '        for alias, annotation in clone.query.annotations.items():', '            if alias in annotations and annotation.contains_aggregate:'], 'pre_context_lineno': 1673, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b31d00>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'add_annotation', 'lineno': 1194, 'vars': [('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('annotation', '<CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>'), ('select', 'True'), ('alias', "'popularity_score'")], 'id': 140566842252544, 'pre_context': ['                "Column aliases cannot contain whitespace characters, quotation marks, "', '                "semicolons, or SQL comments."', '            )', '', '    def add_annotation(self, annotation, alias, select=True):', '        """Add a single annotation expression to the Query."""', '        self.check_alias(alias)'], 'context_line': '        annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)', 'post_context': ['        if select:', '            self.append_annotation_mask([alias])', '        else:', '            annotation_mask = (', '                value', '                for value in dict.fromkeys(self.annotation_select)'], 'pre_context_lineno': 1187, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b52c80>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py', 'function': 'resolve_expression', 'lineno': 756, 'vars': [('self', '<CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>'), ('query', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('allow_joins', 'True'), ('reuse', 'None'), ('summarize', 'False'), ('for_save', 'False'), ('lhs', '<CombinedExpression: Col(products_product, products.Product.views_count) * Value(0.3) + Col(products_product, products.Product.total_sales) * Value(0.4)>')], 'id': 140566842387584, 'pre_context': ['', '    def resolve_expression(', '        self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False', '    ):', '        lhs = self.lhs.resolve_expression(', '            query, allow_joins, reuse, summarize, for_save', '        )'], 'context_line': '        rhs = self.rhs.resolve_expression(', 'post_context': ['            query, allow_joins, reuse, summarize, for_save', '        )', '        if not isinstance(self, (DurationExpression, TemporalSubtraction)):', '            try:', '                lhs_type = lhs.output_field.get_internal_type()', '            except (AttributeError, FieldError):'], 'pre_context_lineno': 749, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b511c0>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py', 'function': 'resolve_expression', 'lineno': 753, 'vars': [('self', '<CombinedExpression: F(average_rating) * Value(0.3)>'), ('query', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('allow_joins', 'True'), ('reuse', 'None'), ('summarize', 'False'), ('for_save', 'False')], 'id': 140566842380736, 'pre_context': ['        expression_wrapper = "(%s)"', '        sql = connection.ops.combine_expression(self.connector, expressions)', '        return expression_wrapper % sql, expression_params', '', '    def resolve_expression(', '        self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False', '    ):'], 'context_line': '        lhs = self.lhs.resolve_expression(', 'post_context': ['            query, allow_joins, reuse, summarize, for_save', '        )', '        rhs = self.rhs.resolve_expression(', '            query, allow_joins, reuse, summarize, for_save', '        )', '        if not isinstance(self, (DurationExpression, TemporalSubtraction)):'], 'pre_context_lineno': 746, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b53a00>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py', 'function': 'resolve_expression', 'lineno': 895, 'vars': [('self', 'F(average_rating)'), ('query', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('allow_joins', 'True'), ('reuse', 'None'), ('summarize', 'False'), ('for_save', 'False')], 'id': 140566842391040, 'pre_context': ['        # Disable old-style iteration protocol inherited from implementing', '        # __getitem__() to prevent this method from hanging.', '        raise TypeError(f"argument of type \'{self.__class__.__name__}\' is not iterable")', '', '    def resolve_expression(', '        self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False', '    ):'], 'context_line': '        return query.resolve_ref(self.name, allow_joins, reuse, summarize)', 'post_context': ['', '    def replace_expressions(self, replacements):', '        return replacements.get(self, self)', '', '    def asc(self, **kwargs):', '        return OrderBy(self, **kwargs)'], 'pre_context_lineno': 888, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b5be40>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'resolve_ref', 'lineno': 2010, 'vars': [('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('name', "'average_rating'"), ('allow_joins', 'True'), ('reuse', 'None'), ('summarize', 'False'), ('annotation', 'None'), ('field_list', "['average_rating']")], 'id': 140566842424896, 'pre_context': ['        else:', '            field_list = name.split(LOOKUP_SEP)', '            annotation = self.annotations.get(field_list[0])', '            if annotation is not None:', '                for transform in field_list[1:]:', '                    annotation = self.try_transform(annotation, transform)', '                return annotation'], 'context_line': '            join_info = self.setup_joins(', 'post_context': ['                field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse', '            )', '            targets, final_alias, join_list = self.trim_joins(', '                join_info.targets, join_info.joins, join_info.path', '            )', '            if not allow_joins and len(join_list) > 1:'], 'pre_context_lineno': 2003, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b23180>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'setup_joins', 'lineno': 1863, 'vars': [('names', "['average_rating']"), ('opts', '<Options for Product>'), ('alias', "'products_product'"), ('can_reuse', 'None'), ('allow_many', 'True'), ('joins', "['products_product']"), ('final_transformer', '<function Query.setup_joins.<locals>.final_transformer at 0x7fd844b481f0>'), ('pivot', '1'), ('last_field_exception', 'None'), ('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>')], 'id': 140566842192256, 'pre_context': ['            return field.get_col(alias)', '', "        # Try resolving all the names as fields first. If there's an error,", '        # treat trailing names as lookups until a field can be resolved.', '        last_field_exception = None', '        for pivot in range(len(names), 0, -1):', '            try:'], 'context_line': '                path, final_field, targets, rest = self.names_to_path(', 'post_context': ['                    names[:pivot],', '                    opts,', '                    allow_many,', '                    fail_on_missing=True,', '                )', '            except FieldError as exc:'], 'pre_context_lineno': 1856, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b23fc0>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'names_to_path', 'lineno': 1768, 'vars': [('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('names', "['average_rating']"), ('opts', '<Options for Product>'), ('allow_many', 'True'), ('fail_on_missing', 'True'), ('path', '[]'), ('names_with_path', '[]'), ('pos', '-1'), ('name', "'average_rating'"), ('cur_names_with_path', "('average_rating', [])"), ('field', 'None'), ('filtered_relation', 'None'), ('available', "['avg_rating',\n 'cart',\n 'cartitem',\n 'category',\n 'category_id',\n 'condition',\n 'created_at',\n 'description',\n 'featured',\n 'id',\n 'image',\n 'is_active',\n 'last_sale_date',\n 'last_stock_update',\n 'orderitem',\n 'price',\n 'reserved_stock',\n 'review_count',\n 'reviews',\n 'slug',\n 'stock',\n 'student',\n 'student_id',\n 'title',\n 'total_revenue',\n 'total_sales',\n 'total_sales_amount',\n 'updated_at',\n 'variants',\n 'views_count',\n 'wishlists']")], 'id': 140566842195904, 'pre_context': ['                    available = sorted(', '                        [', '                            *get_field_names_from_opts(opts),', '                            *self.annotation_select,', '                            *self._filtered_relations,', '                        ]', '                    )'], 'context_line': '                    raise FieldError(', 'post_context': ['                        "Cannot resolve keyword \'%s\' into field. "', '                        "Choices are: %s" % (name, ", ".join(available))', '                    )', '                break', '            # Check if we need any joins for concrete inheritance cases (the', '            # field lives in parent, but we are currently in one of its'], 'pre_context_lineno': 1761, 'colno': '', 'tb_area_colno': ''}], 'request': <ASGIRequest: GET '/products/api/products/trending/'>, 'request_meta': {'REQUEST_METHOD': 'GET', 'QUERY_STRING': '', 'SCRIPT_NAME': '', 'PATH_INFO': '/products/api/products/trending/', 'wsgi.multithread': True, 'wsgi.multiprocess': True, 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_HOST': '127.0.0.1', 'REMOTE_PORT': 48042, 'SERVER_NAME': '127.0.0.1', 'SERVER_PORT': '8000', 'HTTP_HOST': 'localhost:8000', 'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:133.0) Gecko/20100101 Firefox/133.0', 'HTTP_ACCEPT': 'application/json, text/plain, */*', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.5', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate, br, zstd', 'HTTP_ORIGIN': 'http://localhost:3000', 'HTTP_DNT': '1', 'HTTP_SEC_GPC': '1', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_REFERER': 'http://localhost:3000/', 'HTTP_SEC_FETCH_DEST': 'empty', 'HTTP_SEC_FETCH_MODE': 'cors', 'HTTP_SEC_FETCH_SITE': 'same-site'}, 'request_COOKIES_items': dict_items([]), 'user_str': 'AnonymousUser', 'filtered_POST_items': [], 'settings': {'ABSOLUTE_URL_OVERRIDES': {}, 'ADMINS': [], 'ALLOWED_HOSTS': ['*'], 'APPEND_SLASH': True, 'ASGI_APPLICATION': 'marketplace.routing.application', 'AUTHENTICATION_BACKENDS': ['django.contrib.auth.backends.ModelBackend'], 'AUTH_PASSWORD_VALIDATORS': '********************', 'AUTH_USER_MODEL': 'auth.User', 'BASE_DIR': PosixPath('/home/trent22/Documents/EasyMarket'), 'CACHES': {'default': {'BACKEND': 'django_redis.cache.RedisCache', 'LOCATION': 'redis://127.0.0.1:6380/1', 'OPTIONS': {'CLIENT_CLASS': 'django_redis.client.DefaultClient'}}}, 'CACHE_MIDDLEWARE_ALIAS': 'default', 'CACHE_MIDDLEWARE_KEY_PREFIX': '********************', 'CACHE_MIDDLEWARE_SECONDS': 600, 'CHANNEL_LAYERS': {'default': {'BACKEND': 'channels.layers.InMemoryChannelLayer'}}, 'CORS_ALLOWED_ORIGINS': ['http://localhost:3000'], 'CORS_ALLOW_CREDENTIALS': True, 'CRISPY_TEMPLATE_PACK': 'bootstrap4', 'CSRF_COOKIE_AGE': 31449600, 'CSRF_COOKIE_DOMAIN': None, 'CSRF_COOKIE_HTTPONLY': False, 'CSRF_COOKIE_NAME': 'csrftoken', 'CSRF_COOKIE_PATH': '/', 'CSRF_COOKIE_SAMESITE': 'Lax', 'CSRF_COOKIE_SECURE': False, 'CSRF_FAILURE_VIEW': 'django.views.csrf.csrf_failure', 'CSRF_HEADER_NAME': 'HTTP_X_CSRFTOKEN', 'CSRF_TRUSTED_ORIGINS': [], 'CSRF_USE_SESSIONS': False, 'DATABASES': {'default': {'ENGINE': 'django.db.backends.sqlite3', 'NAME': PosixPath('/home/trent22/Documents/EasyMarket/db.sqlite3'), 'ATOMIC_REQUESTS': False, 'AUTOCOMMIT': True, 'CONN_MAX_AGE': 0, 'CONN_HEALTH_CHECKS': False, 'OPTIONS': {}, 'TIME_ZONE': None, 'USER': '', 'PASSWORD': '********************', 'HOST': '', 'PORT': '', 'TEST': {'CHARSET': None, 'COLLATION': None, 'MIGRATE': True, 'MIRROR': None, 'NAME': None}}}, 'DATABASE_ROUTERS': [], 'DATA_UPLOAD_MAX_MEMORY_SIZE': 2621440, 'DATA_UPLOAD_MAX_NUMBER_FIELDS': 1000, 'DATA_UPLOAD_MAX_NUMBER_FILES': 100, 'DATETIME_FORMAT': 'N j, Y, P', 'DATETIME_INPUT_FORMATS': ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M'], 'DATE_FORMAT': 'N j, Y', 'DATE_INPUT_FORMATS': ['%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', '%b %d %Y', '%b %d, %Y', '%d %b %Y', '%d %b, %Y', '%B %d %Y', '%B %d, %Y', '%d %B %Y', '%d %B, %Y'], 'DEBUG': True, 'DEBUG_PROPAGATE_EXCEPTIONS': False, 'DECIMAL_SEPARATOR': '.', 'DEFAULT_AUTO_FIELD': 'django.db.models.BigAutoField', 'DEFAULT_CHARSET': 'utf-8', 'DEFAULT_EXCEPTION_REPORTER': 'django.views.debug.ExceptionReporter', 'DEFAULT_EXCEPTION_REPORTER_FILTER': 'django.views.debug.SafeExceptionReporterFilter', 'DEFAULT_FROM_EMAIL': 'webmaster@localhost', 'DEFAULT_INDEX_TABLESPACE': '', 'DEFAULT_TABLESPACE': '', 'DISALLOWED_USER_AGENTS': [], 'EMAIL_BACKEND': 'django.core.mail.backends.smtp.EmailBackend', 'EMAIL_HOST': 'smtp.gmail.com', 'EMAIL_HOST_PASSWORD': '********************', 'EMAIL_HOST_USER': None, 'EMAIL_PORT': 587, 'EMAIL_SSL_CERTFILE': None, 'EMAIL_SSL_KEYFILE': '********************', 'EMAIL_SUBJECT_PREFIX': '[Django] ', 'EMAIL_TIMEOUT': None, 'EMAIL_USE_LOCALTIME': False, 'EMAIL_USE_SSL': False, 'EMAIL_USE_TLS': True, 'FILE_UPLOAD_DIRECTORY_PERMISSIONS': None, 'FILE_UPLOAD_HANDLERS': ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler'], 'FILE_UPLOAD_MAX_MEMORY_SIZE': 2621440, 'FILE_UPLOAD_PERMISSIONS': 420, 'FILE_UPLOAD_TEMP_DIR': None, 'FIRST_DAY_OF_WEEK': 0, 'FIXTURE_DIRS': [], 'FORCE_SCRIPT_NAME': None, 'FORMAT_MODULE_PATH': None, 'FORMS_URLFIELD_ASSUME_HTTPS': False, 'FORM_RENDERER': 'django.forms.renderers.DjangoTemplates', 'IGNORABLE_404_URLS': [], 'INSTALLED_APPS': ['django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'marketplace.apps.MarketplaceConfig', 'products.apps.ProductsConfig', 'orders.apps.OrdersConfig', 'payment.apps.PaymentConfig', 'adminapp.apps.AdminappConfig', 'staticpages.apps.StaticpagesConfig', 'django_daraja', 'widget_tweaks', 'rest_framework', 'rest_framework_simplejwt', 'corsheaders', 'channels', 'crispy_forms', 'livereload', 'django_redis'], 'INTERNAL_IPS': [], 'LANGUAGES': [('af', 'Afrikaans'), ('ar', 'Arabic'), ('ar-dz', 'Algerian Arabic'), ('ast', 'Asturian'), ('az', 'Azerbaijani'), ('bg', 'Bulgarian'), ('be', 'Belarusian'), ('bn', 'Bengali'), ('br', 'Breton'), ('bs', 'Bosnian'), ('ca', 'Catalan'), ('ckb', 'Central Kurdish (Sorani)'), ('cs', 'Czech'), ('cy', 'Welsh'), ('da', 'Danish'), ('de', 'German'), ('dsb', 'Lower Sorbian'), ('el', 'Greek'), ('en', 'English'), ('en-au', 'Australian English'), ('en-gb', 'British English'), ('eo', 'Esperanto'), ('es', 'Spanish'), ('es-ar', 'Argentinian Spanish'), ('es-co', 'Colombian Spanish'), ('es-mx', 'Mexican Spanish'), ('es-ni', 'Nicaraguan Spanish'), ('es-ve', 'Venezuelan Spanish'), ('et', 'Estonian'), ('eu', 'Basque'), ('fa', 'Persian'), ('fi', 'Finnish'), ('fr', 'French'), ('fy', 'Frisian'), ('ga', 'Irish'), ('gd', 'Scottish Gaelic'), ('gl', 'Galician'), ('he', 'Hebrew'), ('hi', 'Hindi'), ('hr', 'Croatian'), ('hsb', 'Upper Sorbian'), ('hu', 'Hungarian'), ('hy', 'Armenian'), ('ia', 'Interlingua'), ('id', 'Indonesian'), ('ig', 'Igbo'), ('io', 'Ido'), ('is', 'Icelandic'), ('it', 'Italian'), ('ja', 'Japanese'), ('ka', 'Georgian'), ('kab', 'Kabyle'), ('kk', 'Kazakh'), ('km', 'Khmer'), ('kn', 'Kannada'), ('ko', 'Korean'), ('ky', 'Kyrgyz'), ('lb', 'Luxembourgish'), ('lt', 'Lithuanian'), ('lv', 'Latvian'), ('mk', 'Macedonian'), ('ml', 'Malayalam'), ('mn', 'Mongolian'), ('mr', 'Marathi'), ('ms', 'Malay'), ('my', 'Burmese'), ('nb', 'Norwegian Bokml'), ('ne', 'Nepali'), ('nl', 'Dutch'), ('nn', 'Norwegian Nynorsk'), ('os', 'Ossetic'), ('pa', 'Punjabi'), ('pl', 'Polish'), ('pt', 'Portuguese'), ('pt-br', 'Brazilian Portuguese'), ('ro', 'Romanian'), ('ru', 'Russian'), ('sk', 'Slovak'), ('sl', 'Slovenian'), ('sq', 'Albanian'), ('sr', 'Serbian'), ('sr-latn', 'Serbian Latin'), ('sv', 'Swedish'), ('sw', 'Swahili'), ('ta', 'Tamil'), ('te', 'Telugu'), ('tg', 'Tajik'), ('th', 'Thai'), ('tk', 'Turkmen'), ('tr', 'Turkish'), ('tt', 'Tatar'), ('udm', 'Udmurt'), ('ug', 'Uyghur'), ('uk', 'Ukrainian'), ('ur', 'Urdu'), ('uz', 'Uzbek'), ('vi', 'Vietnamese'), ('zh-hans', 'Simplified Chinese'), ('zh-hant', 'Traditional Chinese')], 'LANGUAGES_BIDI': ['he', 'ar', 'ar-dz', 'ckb', 'fa', 'ug', 'ur'], 'LANGUAGE_CODE': 'en-us', 'LANGUAGE_COOKIE_AGE': None, 'LANGUAGE_COOKIE_DOMAIN': None, 'LANGUAGE_COOKIE_HTTPONLY': False, 'LANGUAGE_COOKIE_NAME': 'django_language', 'LANGUAGE_COOKIE_PATH': '/', 'LANGUAGE_COOKIE_SAMESITE': None, 'LANGUAGE_COOKIE_SECURE': False, 'LOCALE_PATHS': [], 'LOGGING': {'version': 1, 'disable_existing_loggers': False, 'formatters': {'verbose': {'format': '{levelname} {asctime} {module} {message}', 'style': '{'}, 'simple': {'format': '{levelname} {message}', 'style': '{'}}, 'handlers': {'console': {'class': 'logging.StreamHandler', 'formatter': 'verbose', 'stream': <_io.TextIOWrapper name='<stdout>' mode='w' encoding='utf-8'>}, 'file': {'level': 'DEBUG', 'class': 'logging.FileHandler', 'filename': '/home/trent22/Documents/EasyMarket/django_debug.log', 'formatter': 'verbose'}}, 'loggers': {'django': {'handlers': ['console', 'file'], 'level': 'DEBUG', 'propagate': True}, 'myapp': {'handlers': ['console', 'file'], 'level': 'DEBUG', 'propagate': False}}}, 'LOGGING_CONFIG': 'logging.config.dictConfig', 'LOGIN_REDIRECT_URL': 'home', 'LOGIN_URL': 'marketplace:signin', 'LOGOUT_REDIRECT_URL': 'home', 'LOGOUT_URL': 'marketplace:signout', 'MANAGERS': [], 'MEDIA_ROOT': PosixPath('/home/trent22/Documents/EasyMarket/media'), 'MEDIA_URL': '/media/', 'MESSAGE_STORAGE': 'django.contrib.messages.storage.fallback.FallbackStorage', 'MIDDLEWARE': ['django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'corsheaders.middleware.CorsMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'whitenoise.middleware.WhiteNoiseMiddleware', 'marketplace.middleware.TwoFactorMiddleware', 'livereload.middleware.LiveReloadScript'], 'MIGRATION_MODULES': {}, 'MONTH_DAY_FORMAT': 'F j', 'MPESA_CALLBACK_URL': 'mpesa_callback', 'MPESA_CONSUMER_KEY': '********************', 'MPESA_CONSUMER_SECRET': '********************', 'MPESA_ENVIRONMENT': 'sandbox', 'MPESA_EXPRESS_SHORTCODE': '174379', 'MPESA_INITIATOR_SECURITY_CREDENTIALS': None, 'MPESA_INITIATOR_USERNAME': None, 'MPESA_PASSKEY': '********************', 'MPESA_SHORTCODE': '174379', 'MPESA_SHORTCODE_TYPE': 'paybill', 'NUMBER_GROUPING': 0, 'PASSWORD_HASHERS': '********************', 'PASSWORD_RESET_TIMEOUT': '********************', 'PAYMENT_HOST': 'http://localhost:8000', 'PAYMENT_MODEL': 'students.Payment', 'PAYMENT_VARIANTS': {'default': ('payments.dummy.DummyProvider', {'url': '/payment/process/'})}, 'PREPEND_WWW': False, 'REST_FRAMEWORK': {'DEFAULT_AUTHENTICATION_CLASSES': ('rest_framework_simplejwt.authentication.JWTAuthentication',), 'DEFAULT_PERMISSION_CLASSES': ['rest_framework.permissions.IsAuthenticated'], 'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination', 'PAGE_SIZE': 10}, 'ROOT_URLCONF': 'students.urls', 'SECRET_KEY': '********************', 'SECRET_KEY_FALLBACKS': '********************', 'SECURE_CONTENT_TYPE_NOSNIFF': True, 'SECURE_CROSS_ORIGIN_OPENER_POLICY': 'same-origin', 'SECURE_HSTS_INCLUDE_SUBDOMAINS': False, 'SECURE_HSTS_PRELOAD': False, 'SECURE_HSTS_SECONDS': 0, 'SECURE_PROXY_SSL_HEADER': None, 'SECURE_REDIRECT_EXEMPT': [], 'SECURE_REFERRER_POLICY': 'same-origin', 'SECURE_SSL_HOST': None, 'SECURE_SSL_REDIRECT': False, 'SERVER_EMAIL': 'root@localhost', 'SESSION_CACHE_ALIAS': 'default', 'SESSION_COOKIE_AGE': 1209600, 'SESSION_COOKIE_DOMAIN': None, 'SESSION_COOKIE_HTTPONLY': True, 'SESSION_COOKIE_NAME': 'sessionid', 'SESSION_COOKIE_PATH': '/', 'SESSION_COOKIE_SAMESITE': 'Lax', 'SESSION_COOKIE_SECURE': False, 'SESSION_ENGINE': 'django.contrib.sessions.backends.cache', 'SESSION_EXPIRE_AT_BROWSER_CLOSE': False, 'SESSION_FILE_PATH': None, 'SESSION_SAVE_EVERY_REQUEST': False, 'SESSION_SERIALIZER': 'django.contrib.sessions.serializers.JSONSerializer', 'SETTINGS_MODULE': 'students.settings', 'SHORT_DATETIME_FORMAT': 'm/d/Y P', 'SHORT_DATE_FORMAT': 'm/d/Y', 'SIGNING_BACKEND': 'django.core.signing.TimestampSigner', 'SILENCED_SYSTEM_CHECKS': [], 'SIMPLE_JWT': {'ACCESS_TOKEN_LIFETIME': '********************', 'REFRESH_TOKEN_LIFETIME': '********************'}, 'STATICFILES_DIRS': [PosixPath('/home/trent22/Documents/EasyMarket/static')], 'STATICFILES_FINDERS': ['django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder'], 'STATICFILES_STORAGE': 'django.contrib.staticfiles.storage.StaticFilesStorage', 'STATIC_ROOT': PosixPath('/home/trent22/Documents/EasyMarket/staticfiles'), 'STATIC_URL': '/static/', 'STORAGES': {'default': {'BACKEND': 'django.core.files.storage.FileSystemStorage'}, 'staticfiles': {'BACKEND': 'django.contrib.staticfiles.storage.StaticFilesStorage'}}, 'TEMPLATES': [{'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [PosixPath('/home/trent22/Documents/EasyMarket/templates')], 'APP_DIRS': True, 'OPTIONS': {'context_processors': ['django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages']}}], 'TEST_NON_SERIALIZED_APPS': [], 'TEST_RUNNER': 'django.test.runner.DiscoverRunner', 'THOUSAND_SEPARATOR': ',', 'TIME_FORMAT': 'P', 'TIME_INPUT_FORMATS': ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M'], 'TIME_ZONE': 'UTC', 'USE_I18N': True, 'USE_THOUSAND_SEPARATOR': False, 'USE_TZ': True, 'USE_X_FORWARDED_HOST': False, 'USE_X_FORWARDED_PORT': False, 'WSGI_APPLICATION': 'students.wsgi.application', 'X_FRAME_OPTIONS': 'DENY', 'YEAR_MONTH_FORMAT': 'F Y'}, 'sys_executable': '/home/trent22/Documents/sudplace/env/sim/bin/python3', 'sys_version_info': '3.10.12', 'server_time': datetime.datetime(2024, 12, 12, 6, 29, 42, 909071, tzinfo=datetime.timezone.utc), 'django_version_info': '5.1.4', 'sys_path': ['.', '/home/trent22/Documents/sudplace/env/sim/bin', '/usr/lib/python310.zip', '/usr/lib/python3.10', '/usr/lib/python3.10/lib-dynload', '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages', '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/setuptools/_vendor'], 'template_info': None, 'template_does_not_exist': False, 'postmortem': None, 'request_GET_items': <generator object MultiValueDict.items at 0x7fd83c5f7140>, 'request_FILES_items': <generator object MultiValueDict.items at 0x7fd83c5f6ff0>, 'request_insecure_uri': 'http://localhost:8000/products/api/products/trending/', 'raising_view_name': 'products.views.ProductViewSet', 'exception_type': 'FieldError', 'exception_value': "Cannot resolve keyword 'average_rating' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists", 'lastframe': {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b23fc0>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'names_to_path', 'lineno': 1768, 'vars': [('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('names', "['average_rating']"), ('opts', '<Options for Product>'), ('allow_many', 'True'), ('fail_on_missing', 'True'), ('path', '[]'), ('names_with_path', '[]'), ('pos', '-1'), ('name', "'average_rating'"), ('cur_names_with_path', "('average_rating', [])"), ('field', 'None'), ('filtered_relation', 'None'), ('available', "['avg_rating',\n 'cart',\n 'cartitem',\n 'category',\n 'category_id',\n 'condition',\n 'created_at',\n 'description',\n 'featured',\n 'id',\n 'image',\n 'is_active',\n 'last_sale_date',\n 'last_stock_update',\n 'orderitem',\n 'price',\n 'reserved_stock',\n 'review_count',\n 'reviews',\n 'slug',\n 'stock',\n 'student',\n 'student_id',\n 'title',\n 'total_revenue',\n 'total_sales',\n 'total_sales_amount',\n 'updated_at',\n 'variants',\n 'views_count',\n 'wishlists']")], 'id': 140566842195904, 'pre_context': ['                    available = sorted(', '                        [', '                            *get_field_names_from_opts(opts),', '                            *self.annotation_select,', '                            *self._filtered_relations,', '                        ]', '                    )'], 'context_line': '                    raise FieldError(', 'post_context': ['                        "Cannot resolve keyword \'%s\' into field. "', '                        "Choices are: %s" % (name, ", ".join(available))', '                    )', '                break', '            # Check if we need any joins for concrete inheritance cases (the', '            # field lives in parent, but we are currently in one of its'], 'pre_context_lineno': 1761, 'colno': '', 'tb_area_colno': ''}}]
DEBUG 2024-12-12 06:29:42,911 utils (0.027) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:43,707 utils (0.001) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", AVG("marketplace_review"."rating") AS "avg_rating", COUNT("marketplace_review"."id") AS "review_count", (CAST(SUM((CAST(("products_product"."price" * "products_product"."total_sales") AS NUMERIC))) AS NUMERIC)) AS "total_sales_amount", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE ("products_product"."featured" AND "products_product"."stock" > ("products_product"."reserved_stock")) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" ORDER BY "products_product"."created_at" DESC LIMIT 8; args=(); alias=default
DEBUG 2024-12-12 06:29:43,734 base Exception while resolving variable 'exception_notes' in template 'unknown'.
Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/current_thread_executor.py", line 40, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py", line 124, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/trent22/Documents/EasyMarket/./products/views.py", line 266, in featured
    response_data = serializer.data
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py", line 795, in data
    ret = super().data
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py", line 249, in data
    self._data = self.to_representation(self.instance)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py", line 713, in to_representation
    return [
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 400, in __iter__
    self._fetch_all()
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 131, in __iter__
    setattr(obj, attr_name, row[col_pos])
AttributeError: can't set attribute 'review_count'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 883, in _resolve_lookup
    current = current[bit]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/context.py", line 85, in __getitem__
    raise KeyError(key)
KeyError: 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 889, in _resolve_lookup
    if isinstance(current, BaseContext) and getattr(
AttributeError: type object 'Context' has no attribute 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 899, in _resolve_lookup
    current = current[int(bit)]
ValueError: invalid literal for int() with base 10: 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 906, in _resolve_lookup
    raise VariableDoesNotExist(
django.template.base.VariableDoesNotExist: Failed lookup for key [exception_notes] in [{'True': True, 'False': False, 'None': None}, {'is_email': False, 'unicode_hint': '', 'frames': [{'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c1890c0>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py', 'function': 'inner', 'lineno': 42, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/featured/'>"), ('exc', 'AttributeError("can\'t set attribute \'review_count\'")'), ('get_response', '<bound method BaseHandler._get_response_async of <django.core.handlers.asgi.ASGIHandler object at 0x7fd8455e7070>>')], 'id': 140566697906368, 'pre_context': ['    can rely on getting a response instead of an exception.', '    """', '    if iscoroutinefunction(get_response):', '', '        @wraps(get_response)', '        async def inner(request):', '            try:'], 'context_line': '                response = await get_response(request)', 'post_context': ['            except Exception as exc:', '                response = await sync_to_async(', '                    response_for_exception, thread_sensitive=False', '                )(request, exc)', '            return response', ''], 'pre_context_lineno': 35, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c186e40>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py', 'function': '_get_response_async', 'lineno': 253, 'vars': [('self', '<django.core.handlers.asgi.ASGIHandler object at 0x7fd8455e7070>'), ('request', "<ASGIRequest: GET '/products/api/products/featured/'>"), ('response', 'None'), ('callback', '<function ProductViewSet at 0x7fd83c543910>'), ('callback_args', '()'), ('callback_kwargs', '{}'), ('middleware_method', '<asgiref.sync.SyncToAsync object at 0x7fd844eb17e0>'), ('wrapped_callback', '<asgiref.sync.SyncToAsync object at 0x7fd83c5cdde0>')], 'id': 140566697897536, 'pre_context': ['            wrapped_callback = self.make_view_atomic(callback)', '            # If it is a synchronous view, run it in a subthread', '            if not iscoroutinefunction(wrapped_callback):', '                wrapped_callback = sync_to_async(', '                    wrapped_callback, thread_sensitive=True', '                )', '            try:'], 'context_line': '                response = await wrapped_callback(', 'post_context': ['                    request, *callback_args, **callback_kwargs', '                )', '            except Exception as e:', '                response = await sync_to_async(', '                    self.process_exception_by_middleware,', '                    thread_sensitive=True,'], 'pre_context_lineno': 246, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c160540>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py', 'function': '_view_wrapper', 'lineno': 65, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/featured/'>"), ('args', '()'), ('kwargs', '{}'), ('view_func', '<function ProductViewSet at 0x7fd83c543880>')], 'id': 140566697739584, 'pre_context': ['', '        async def _view_wrapper(request, *args, **kwargs):', '            return await view_func(request, *args, **kwargs)', '', '    else:', '', '        def _view_wrapper(request, *args, **kwargs):'], 'context_line': '            return view_func(request, *args, **kwargs)', 'post_context': ['', '    _view_wrapper.csrf_exempt = True', '', '    return wraps(view_func)(_view_wrapper)'], 'pre_context_lineno': 58, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c101bc0>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py', 'function': 'view', 'lineno': 124, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/featured/'>"), ('args', '()'), ('kwargs', '{}'), ('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('method', "'head'"), ('action', "'featured'"), ('handler', '<bound method ProductViewSet.featured of <products.views.ProductViewSet object at 0x7fd83c5ccca0>>'), ('actions', "{'get': 'featured', 'head': 'featured'}"), ('cls', "<class 'products.views.ProductViewSet'>"), ('initkwargs', "{'basename': 'product',\n 'description': 'Get featured products with caching',\n 'detail': False,\n 'name': 'Featured'}")], 'id': 140566697352128, 'pre_context': ['                setattr(self, method, handler)', '', '            self.request = request', '            self.args = args', '            self.kwargs = kwargs', '', '            # And continue as usual'], 'context_line': '            return self.dispatch(request, *args, **kwargs)', 'post_context': ['', '        # take name and docstring from class', '        update_wrapper(view, cls, updated=())', '', '        # and possible attributes set by decorators', '        # like csrf_exempt from dispatch'], 'pre_context_lineno': 117, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c162380>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'dispatch', 'lineno': 509, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/featured/'>"), ('args', '()'), ('kwargs', '{}'), ('handler', '<bound method ProductViewSet.featured of <products.views.ProductViewSet object at 0x7fd83c5ccca0>>')], 'id': 140566697747328, 'pre_context': ['                                  self.http_method_not_allowed)', '            else:', '                handler = self.http_method_not_allowed', '', '            response = handler(request, *args, **kwargs)', '', '        except Exception as exc:'], 'context_line': '            response = self.handle_exception(exc)', 'post_context': ['', '        self.response = self.finalize_response(request, response, *args, **kwargs)', '        return self.response', '', '    def options(self, request, *args, **kwargs):', '        """'], 'pre_context_lineno': 502, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c15b940>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'handle_exception', 'lineno': 469, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('exc', 'AttributeError("can\'t set attribute \'review_count\'")'), ('exception_handler', '<function exception_handler at 0x7fd83c96bf40>'), ('context', "{'args': (),\n 'kwargs': {},\n 'request': <rest_framework.request.Request: GET '/products/api/products/featured/'>,\n 'view': <products.views.ProductViewSet object at 0x7fd83c5ccca0>}"), ('response', 'None')], 'id': 140566697720128, 'pre_context': ['', '        exception_handler = self.get_exception_handler()', '', '        context = self.get_exception_handler_context()', '        response = exception_handler(exc, context)', '', '        if response is None:'], 'context_line': '            self.raise_uncaught_exception(exc)', 'post_context': ['', '        response.exception = True', '        return response', '', '    def raise_uncaught_exception(self, exc):', '        if settings.DEBUG:'], 'pre_context_lineno': 462, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c15b800>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'raise_uncaught_exception', 'lineno': 480, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('exc', 'AttributeError("can\'t set attribute \'review_count\'")'), ('request', "<rest_framework.request.Request: GET '/products/api/products/featured/'>"), ('renderer_format', "'json'"), ('use_plaintext_traceback', 'True')], 'id': 140566697719808, 'pre_context': ['', '    def raise_uncaught_exception(self, exc):', '        if settings.DEBUG:', '            request = self.request', "            renderer_format = getattr(request.accepted_renderer, 'format')", "            use_plaintext_traceback = renderer_format not in ('html', 'api', 'admin')", '            request.force_plaintext_errors(use_plaintext_traceback)'], 'context_line': '        raise exc', 'post_context': ['', '    # Note: Views are made CSRF exempt from within `as_view` as to prevent', '    # accidental removal of this exemption in cases where `dispatch` needs to', '    # be overridden.', '    def dispatch(self, request, *args, **kwargs):', '        """'], 'pre_context_lineno': 473, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c15b500>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'dispatch', 'lineno': 506, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/featured/'>"), ('args', '()'), ('kwargs', '{}'), ('handler', '<bound method ProductViewSet.featured of <products.views.ProductViewSet object at 0x7fd83c5ccca0>>')], 'id': 140566697719040, 'pre_context': ['            # Get the appropriate handler method', '            if request.method.lower() in self.http_method_names:', '                handler = getattr(self, request.method.lower(),', '                                  self.http_method_not_allowed)', '            else:', '                handler = self.http_method_not_allowed', ''], 'context_line': '            response = handler(request, *args, **kwargs)', 'post_context': ['', '        except Exception as exc:', '            response = self.handle_exception(exc)', '', '        self.response = self.finalize_response(request, response, *args, **kwargs)', '        return self.response'], 'pre_context_lineno': 499, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c15ba40>, 'type': 'user', 'filename': '/home/trent22/Documents/EasyMarket/./products/views.py', 'function': 'featured', 'lineno': 266, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/featured/'>"), ('cache_key', "'products:featured:'"), ('cached_results', 'None'), ('queryset', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('serializer', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697720384, 'pre_context': ["        ).order_by('-created_at')[:8]", '', '        serializer = ProductListSerializer(', '            queryset,', '            many=True,', "            context={'request': request}", '        )'], 'context_line': '        response_data = serializer.data', 'post_context': ['        cache.set(cache_key, response_data, CACHE_TTL)', '        return Response(response_data)', '', "    @action(detail=False, methods=['get'])", '    def trending(self, request):', '        """Get trending products based on views, sales and ratings"""'], 'pre_context_lineno': 259, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c185300>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py', 'function': 'data', 'lineno': 795, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('__class__', "<class 'rest_framework.serializers.ListSerializer'>")], 'id': 140566697890560, 'pre_context': ['        return representation.list_repr(self, indent=1)', '', '    # Include a backlink to the serializer class on return objects.', '    # Allows renderers such as HTMLFormRenderer to get the full field info.', '', '    @property', '    def data(self):'], 'context_line': '        ret = super().data', 'post_context': ['        return ReturnList(ret, serializer=self)', '', '    @property', '    def errors(self):', '        ret = super().errors', "        if isinstance(ret, list) and len(ret) == 1 and getattr(ret[0], 'code', None) == 'null':"], 'pre_context_lineno': 788, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c186780>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py', 'function': 'data', 'lineno': 249, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697895808, 'pre_context': ["                'You should either call `.is_valid()` first, '", "                'or access `.initial_data` instead.'", '            )', '            raise AssertionError(msg)', '', "        if not hasattr(self, '_data'):", "            if self.instance is not None and not getattr(self, '_errors', None):"], 'context_line': '                self._data = self.to_representation(self.instance)', 'post_context': ["            elif hasattr(self, '_validated_data') and not getattr(self, '_errors', None):", '                self._data = self.to_representation(self.validated_data)', '            else:', '                self._data = self.get_initial()', '        return self._data', ''], 'pre_context_lineno': 242, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c187e40>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py', 'function': 'to_representation', 'lineno': 713, 'vars': [('data', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('iterable', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('self', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697901632, 'pre_context': ['        """', '        List of object instances -> List of dicts of primitive datatypes.', '        """', '        # Dealing with nested relationships, data can be a Manager,', '        # so, first get a queryset from the Manager if needed', '        iterable = data.all() if isinstance(data, models.manager.BaseManager) else data', ''], 'context_line': '        return [', 'post_context': ['            self.child.to_representation(item) for item in iterable', '        ]', '', '    def validate(self, attrs):', '        return attrs', ''], 'pre_context_lineno': 706, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c155a40>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '__iter__', 'lineno': 400, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697695808, 'pre_context': ['            2. sql.compiler.results_iter()', '               - Returns one row at time. At this point the rows are still just', '                 tuples. In some cases the return values are converted to', '                 Python values at this location.', '            3. self.iterator()', '               - Responsible for turning the rows into model objects.', '        """'], 'context_line': '        self._fetch_all()', 'post_context': ['        return iter(self._result_cache)', '', '    def __aiter__(self):', "        # Remember, __aiter__ itself is synchronous, it's the thing it returns", '        # that is async!', '        async def generator():'], 'pre_context_lineno': 393, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c142c40>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '_fetch_all', 'lineno': 1928, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697618496, 'pre_context': ['        c._known_related_objects = self._known_related_objects', '        c._iterable_class = self._iterable_class', '        c._fields = self._fields', '        return c', '', '    def _fetch_all(self):', '        if self._result_cache is None:'], 'context_line': '            self._result_cache = list(self._iterable_class(self))', 'post_context': ['        if self._prefetch_related_lookups and not self._prefetch_done:', '            self._prefetch_related_objects()', '', '    def _next_is_sticky(self):', '        """', '        Indicate that the next filter call and the one following that should'], 'pre_context_lineno': 1921, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c9d4840>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '__iter__', 'lineno': 131, 'vars': [('self', '<django.db.models.query.ModelIterable object at 0x7fd83c9e78b0>'), ('db', "'default'"), ('compiler', "<SQLCompiler model=Product connection=<DatabaseWrapper vendor='sqlite' alias='default'> using='default'>"), ('results', "[[(1,\n   'the larry',\n   'The best way to test is to be involved.',\n   12000,\n   1,\n   1,\n   'new',\n   datetime.datetime(2024, 12, 7, 21, 40, 39),\n   datetime.datetime(2024, 12, 7, 21, 43, 27, 946553),\n   True,\n   'product_images/keith-misner-h0Vxgz5tyXA-unsplash.jpg',\n   'the-larry',\n   30,\n   10,\n   1230,\n   True,\n   datetime.datetime(2024, 12, 7, 21, 43, 27, 994220),\n   10,\n   120000,\n   datetime.datetime(2024, 12, 7, 21, 43, 20),\n   5.0,\n   1,\n   120000,\n   1,\n   1,\n   '',\n   '',\n   'admin@example.com',\n   '',\n   1,\n   'pbkdf2_sha256$870000$sodWaWj3ANl1sXywlNwRQO$kAvUvyl2c2Ak/SlPHY84zb2UQ2XfS6O+SFACCvM6ZuM=',\n   datetime.datetime(2024, 12, 7, 21, 40, 26, 257373),\n   True,\n   'admin',\n   '',\n   '',\n   'admin@example.com',\n   True,\n   True,\n   datetime.datetime(2024, 12, 7, 21, 12, 48, 557204),\n   1,\n   'Uncategorized',\n   'Default category for uncategorized products',\n   'category_images/laptop_1.jpg',\n   'uncategorized',\n   True,\n   datetime.datetime(2024, 12, 7, 21, 40, 38, 779996),\n   datetime.datetime(2024, 12, 7, 21, 47, 14, 90701))]]"), ('select', '[(Col(products_product, products.Product.id),\n  (\'"products_product"."id"\', []),\n  None),\n (Col(products_product, products.Product.title),\n  (\'"products_product"."title"\', []),\n  None),\n (Col(products_product, products.Product.description),\n  (\'"products_product"."description"\', []),\n  None),\n (Col(products_product, products.Product.price),\n  (\'"products_product"."price"\', []),\n  None),\n (Col(products_product, products.Product.student),\n  (\'"products_product"."student_id"\', []),\n  None),\n (Col(products_product, products.Product.category),\n  (\'"products_product"."category_id"\', []),\n  None),\n (Col(products_product, products.Product.condition),\n  (\'"products_product"."condition"\', []),\n  None),\n (Col(products_product, products.Product.created_at),\n  (\'"products_product"."created_at"\', []),\n  None),\n (Col(products_product, products.Product.updated_at),\n  (\'"products_product"."updated_at"\', []),\n  None),\n (Col(products_product, products.Product.is_active),\n  (\'"products_product"."is_active"\', []),\n  None),\n (Col(products_product, products.Product.image),\n  (\'"products_product"."image"\', []),\n  None),\n (Col(products_product, products.Product.slug),\n  (\'"products_product"."slug"\', []),\n  None),\n (Col(products_product, products.Product.stock),\n  (\'"products_product"."stock"\', []),\n  None),\n (Col(products_product, products.Product.reserved_stock),\n  (\'"products_product"."reserved_stock"\', []),\n  None),\n (Col(products_product, products.Product.views_count),\n  (\'"products_product"."views_count"\', []),\n  None),\n (Col(products_product, products.Product.featured),\n  (\'"products_product"."featured"\', []),\n  None),\n (Col(products_product, products.Product.last_stock_update),\n  (\'"products_product"."last_stock_update"\', []),\n  None),\n (Col(products_product, products.Product.total_sales),\n  (\'"products_product"."total_sales"\', []),\n  None),\n (Col(products_product, products.Product.total_revenue),\n  (\'"products_product"."total_revenue"\', []),\n  None),\n (Col(products_product, products.Product.last_sale_date),\n  (\'"products_product"."last_sale_date"\', []),\n  None),\n (Avg(Col(marketplace_review, marketplace.Review.rating)),\n  (\'AVG("marketplace_review"."rating")\', []),\n  \'avg_rating\'),\n (Count(Col(marketplace_review, marketplace.Review.id)),\n  (\'COUNT("marketplace_review"."id")\', []),\n  \'review_count\'),\n (Sum(Col(products_product, products.Product.price) * Col(products_product, products.Product.total_sales)),\n  (\'(CAST(SUM((CAST(("products_product"."price" * \'\n   \'"products_product"."total_sales") AS NUMERIC))) AS NUMERIC))\',\n   []),\n  \'total_sales_amount\'),\n (Col(marketplace_student, marketplace.Student.id),\n  (\'"marketplace_student"."id"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.user),\n  (\'"marketplace_student"."user_id"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.first_name),\n  (\'"marketplace_student"."first_name"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.last_name),\n  (\'"marketplace_student"."last_name"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.email),\n  (\'"marketplace_student"."email"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.bio),\n  (\'"marketplace_student"."bio"\', []),\n  None),\n (Col(auth_user, auth.User.id), (\'"auth_user"."id"\', []), None),\n (Col(auth_user, auth.User.password), (\'"auth_user"."password"\', []), None),\n (Col(auth_user, auth.User.last_login), (\'"auth_user"."last_login"\', []), None),\n (Col(auth_user, auth.User.is_superuser),\n  (\'"auth_user"."is_superuser"\', []),\n  None),\n (Col(auth_user, auth.User.username), (\'"auth_user"."username"\', []), None),\n (Col(auth_user, auth.User.first_name), (\'"auth_user"."first_name"\', []), None),\n (Col(auth_user, auth.User.last_name), (\'"auth_user"."last_name"\', []), None),\n (Col(auth_user, auth.User.email), (\'"auth_user"."email"\', []), None),\n (Col(auth_user, auth.User.is_staff), (\'"auth_user"."is_staff"\', []), None),\n (Col(auth_user, auth.User.is_active), (\'"auth_user"."is_active"\', []), None),\n (Col(auth_user, auth.User.date_joined),\n  (\'"auth_user"."date_joined"\', []),\n  None),\n (Col(prod <trimmed 4907 bytes string>'), ('klass_info', "{'model': <class 'products.models.Product'>,\n 'related_klass_infos': [{'field': <django.db.models.fields.related.ForeignKey: student>,\n                          'from_parent': False,\n                          'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.ForeignKey: student>>,\n                          'model': <class 'marketplace.models.Student'>,\n                          'related_klass_infos': [{'field': <django.db.models.fields.related.OneToOneField: user>,\n                                                   'from_parent': False,\n                                                   'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.OneToOneField: user>>,\n                                                   'model': <class 'django.contrib.auth.models.User'>,\n                                                   'related_klass_infos': [],\n                                                   'remote_setter': <bound method FieldCacheMixin.set_cached_value of <OneToOneRel: marketplace.student>>,\n                                                   'reverse': False,\n                                                   'select_fields': [29,\n                                                                     30,\n                                                                     31,\n                                                                     32,\n                                                                     33,\n                                                                     34,\n                                                                     35,\n                                                                     36,\n                                                                     37,\n                                                                     38,\n                                                                     39]}],\n                          'remote_setter': <function SQLCompiler.get_related_selections.<locals>.<lambda> at 0x7fd83c5f2b00>,\n                          'reverse': False,\n                          'select_fields': [23, 24, 25, 26, 27, 28]},\n                         {'field': <django.db.models.fields.related.ForeignKey: category>,\n                          'from_parent': False,\n                          'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.ForeignKey: category>>,\n                          'model': <class 'products.models.Category'>,\n                          'related_klass_infos': [],\n                          'remote_setter': <function SQLCompiler.get_related_selections.<locals>.<lambda> at 0x7fd83c5f2ef0>,\n                          'reverse': False,\n                          'select_fields': [40, 41, 42, 43, 44, 45, 46, 47]}],\n 'select_fields': [0,\n                   1,\n                   2,\n                   3,\n                   4,\n                   5,\n                   6,\n                   7,\n                   8,\n                   9,\n                   10,\n                   11,\n                   12,\n                   13,\n                   14,\n                   15,\n                   16,\n                   17,\n                   18,\n                   19]}"), ('annotation_col_map', "{'avg_rating': 20, 'review_count': 21, 'total_sales_amount': 22}"), ('model_cls', "<class 'products.models.Product'>"), ('select_fields', '[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]'), ('model_fields_start', '0'), ('model_fields_end', '20'), ('init_list', "['id',\n 'title',\n 'description',\n 'price',\n 'student_id',\n 'category_id',\n 'condition',\n 'created_at',\n 'updated_at',\n 'is_active',\n 'image',\n 'slug',\n 'stock',\n 'reserved_stock',\n 'views_count',\n 'featured',\n 'last_stock_update',\n 'total_sales',\n 'total_revenue',\n 'last_sale_date']"), ('related_populators', '[<django.db.models.query.RelatedPopulator object at 0x7fd844b3d090>,\n <django.db.models.query.RelatedPopulator object at 0x7fd844b3c730>]'), ('known_related_objects', '[]'), ('row', "[1,\n 'the larry',\n 'The best way to test is to be involved.',\n Decimal('12000.00'),\n 1,\n 1,\n 'new',\n datetime.datetime(2024, 12, 7, 21, 40, 39, tzinfo=datetime.timezone.utc),\n datetime.datetime(2024, 12, 7, 21, 43, 27, 946553, tzinfo=datetime.timezone.utc),\n True,\n 'product_images/keith-misner-h0Vxgz5tyXA-unsplash.jpg',\n 'the-larry',\n 30,\n 10,\n 1230,\n True,\n datetime.datetime(2024, 12, 7, 21, 43, 27, 994220, tzinfo=datetime.timezone.utc),\n 10,\n Decimal('120000.00'),\n datetime.datetime(2024, 12, 7, 21, 43, 20, tzinfo=datetime.timezone.utc),\n 5.0,\n 1,\n Decimal('120000'),\n 1,\n 1,\n '',\n '',\n 'admin@example.com',\n '',\n 1,\n 'pbkdf2_sha256$870000$sodWaWj3ANl1sXywlNwRQO$kAvUvyl2c2Ak/SlPHY84zb2UQ2XfS6O+SFACCvM6ZuM=',\n datetime.datetime(2024, 12, 7, 21, 40, 26, 257373, tzinfo=datetime.timezone.utc),\n True,\n 'admin',\n '',\n '',\n 'admin@example.com',\n True,\n True,\n datetime.datetime(2024, 12, 7, 21, 12, 48, 557204, tzinfo=datetime.timezone.utc),\n 1,\n 'Uncategorized',\n 'Default category for uncategorized products',\n 'category_images/laptop_1.jpg',\n 'uncategorized',\n True,\n datetime.datetime(2024, 12, 7, 21, 40, 38, 779996, tzinfo=datetime.timezone.utc),\n datetime.datetime(2024, 12, 7, 21, 47, 14, 90701, tzinfo=datetime.timezone.utc)]"), ('obj', '<Product: the larry>'), ('rel_populator', '<django.db.models.query.RelatedPopulator object at 0x7fd844b3c730>'), ('attr_name', "'review_count'"), ('col_pos', '21'), ('queryset', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566706604096, 'pre_context': ['            obj = model_cls.from_db(', '                db, init_list, row[model_fields_start:model_fields_end]', '            )', '            for rel_populator in related_populators:', '                rel_populator.populate(row, obj)', '            if annotation_col_map:', '                for attr_name, col_pos in annotation_col_map.items():'], 'context_line': '                    setattr(obj, attr_name, row[col_pos])', 'post_context': ['', '            # Add the known related objects to the model.', '            for field, rel_objs, rel_getter in known_related_objects:', '                # Avoid overwriting objects loaded by, e.g., select_related().', '                if field.is_cached(obj):', '                    continue'], 'pre_context_lineno': 124, 'colno': '', 'tb_area_colno': ''}], 'request': <ASGIRequest: GET '/products/api/products/featured/'>, 'request_meta': {'REQUEST_METHOD': 'GET', 'QUERY_STRING': '', 'SCRIPT_NAME': '', 'PATH_INFO': '/products/api/products/featured/', 'wsgi.multithread': True, 'wsgi.multiprocess': True, 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_HOST': '127.0.0.1', 'REMOTE_PORT': 48034, 'SERVER_NAME': '127.0.0.1', 'SERVER_PORT': '8000', 'HTTP_HOST': 'localhost:8000', 'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:133.0) Gecko/20100101 Firefox/133.0', 'HTTP_ACCEPT': 'application/json, text/plain, */*', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.5', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate, br, zstd', 'HTTP_ORIGIN': 'http://localhost:3000', 'HTTP_DNT': '1', 'HTTP_SEC_GPC': '1', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_REFERER': 'http://localhost:3000/', 'HTTP_SEC_FETCH_DEST': 'empty', 'HTTP_SEC_FETCH_MODE': 'cors', 'HTTP_SEC_FETCH_SITE': 'same-site'}, 'request_COOKIES_items': dict_items([]), 'user_str': 'AnonymousUser', 'filtered_POST_items': [], 'settings': {'ABSOLUTE_URL_OVERRIDES': {}, 'ADMINS': [], 'ALLOWED_HOSTS': ['*'], 'APPEND_SLASH': True, 'ASGI_APPLICATION': 'marketplace.routing.application', 'AUTHENTICATION_BACKENDS': ['django.contrib.auth.backends.ModelBackend'], 'AUTH_PASSWORD_VALIDATORS': '********************', 'AUTH_USER_MODEL': 'auth.User', 'BASE_DIR': PosixPath('/home/trent22/Documents/EasyMarket'), 'CACHES': {'default': {'BACKEND': 'django_redis.cache.RedisCache', 'LOCATION': 'redis://127.0.0.1:6380/1', 'OPTIONS': {'CLIENT_CLASS': 'django_redis.client.DefaultClient'}}}, 'CACHE_MIDDLEWARE_ALIAS': 'default', 'CACHE_MIDDLEWARE_KEY_PREFIX': '********************', 'CACHE_MIDDLEWARE_SECONDS': 600, 'CHANNEL_LAYERS': {'default': {'BACKEND': 'channels.layers.InMemoryChannelLayer'}}, 'CORS_ALLOWED_ORIGINS': ['http://localhost:3000'], 'CORS_ALLOW_CREDENTIALS': True, 'CRISPY_TEMPLATE_PACK': 'bootstrap4', 'CSRF_COOKIE_AGE': 31449600, 'CSRF_COOKIE_DOMAIN': None, 'CSRF_COOKIE_HTTPONLY': False, 'CSRF_COOKIE_NAME': 'csrftoken', 'CSRF_COOKIE_PATH': '/', 'CSRF_COOKIE_SAMESITE': 'Lax', 'CSRF_COOKIE_SECURE': False, 'CSRF_FAILURE_VIEW': 'django.views.csrf.csrf_failure', 'CSRF_HEADER_NAME': 'HTTP_X_CSRFTOKEN', 'CSRF_TRUSTED_ORIGINS': [], 'CSRF_USE_SESSIONS': False, 'DATABASES': {'default': {'ENGINE': 'django.db.backends.sqlite3', 'NAME': PosixPath('/home/trent22/Documents/EasyMarket/db.sqlite3'), 'ATOMIC_REQUESTS': False, 'AUTOCOMMIT': True, 'CONN_MAX_AGE': 0, 'CONN_HEALTH_CHECKS': False, 'OPTIONS': {}, 'TIME_ZONE': None, 'USER': '', 'PASSWORD': '********************', 'HOST': '', 'PORT': '', 'TEST': {'CHARSET': None, 'COLLATION': None, 'MIGRATE': True, 'MIRROR': None, 'NAME': None}}}, 'DATABASE_ROUTERS': [], 'DATA_UPLOAD_MAX_MEMORY_SIZE': 2621440, 'DATA_UPLOAD_MAX_NUMBER_FIELDS': 1000, 'DATA_UPLOAD_MAX_NUMBER_FILES': 100, 'DATETIME_FORMAT': 'N j, Y, P', 'DATETIME_INPUT_FORMATS': ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M'], 'DATE_FORMAT': 'N j, Y', 'DATE_INPUT_FORMATS': ['%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', '%b %d %Y', '%b %d, %Y', '%d %b %Y', '%d %b, %Y', '%B %d %Y', '%B %d, %Y', '%d %B %Y', '%d %B, %Y'], 'DEBUG': True, 'DEBUG_PROPAGATE_EXCEPTIONS': False, 'DECIMAL_SEPARATOR': '.', 'DEFAULT_AUTO_FIELD': 'django.db.models.BigAutoField', 'DEFAULT_CHARSET': 'utf-8', 'DEFAULT_EXCEPTION_REPORTER': 'django.views.debug.ExceptionReporter', 'DEFAULT_EXCEPTION_REPORTER_FILTER': 'django.views.debug.SafeExceptionReporterFilter', 'DEFAULT_FROM_EMAIL': 'webmaster@localhost', 'DEFAULT_INDEX_TABLESPACE': '', 'DEFAULT_TABLESPACE': '', 'DISALLOWED_USER_AGENTS': [], 'EMAIL_BACKEND': 'django.core.mail.backends.smtp.EmailBackend', 'EMAIL_HOST': 'smtp.gmail.com', 'EMAIL_HOST_PASSWORD': '********************', 'EMAIL_HOST_USER': None, 'EMAIL_PORT': 587, 'EMAIL_SSL_CERTFILE': None, 'EMAIL_SSL_KEYFILE': '********************', 'EMAIL_SUBJECT_PREFIX': '[Django] ', 'EMAIL_TIMEOUT': None, 'EMAIL_USE_LOCALTIME': False, 'EMAIL_USE_SSL': False, 'EMAIL_USE_TLS': True, 'FILE_UPLOAD_DIRECTORY_PERMISSIONS': None, 'FILE_UPLOAD_HANDLERS': ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler'], 'FILE_UPLOAD_MAX_MEMORY_SIZE': 2621440, 'FILE_UPLOAD_PERMISSIONS': 420, 'FILE_UPLOAD_TEMP_DIR': None, 'FIRST_DAY_OF_WEEK': 0, 'FIXTURE_DIRS': [], 'FORCE_SCRIPT_NAME': None, 'FORMAT_MODULE_PATH': None, 'FORMS_URLFIELD_ASSUME_HTTPS': False, 'FORM_RENDERER': 'django.forms.renderers.DjangoTemplates', 'IGNORABLE_404_URLS': [], 'INSTALLED_APPS': ['django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'marketplace.apps.MarketplaceConfig', 'products.apps.ProductsConfig', 'orders.apps.OrdersConfig', 'payment.apps.PaymentConfig', 'adminapp.apps.AdminappConfig', 'staticpages.apps.StaticpagesConfig', 'django_daraja', 'widget_tweaks', 'rest_framework', 'rest_framework_simplejwt', 'corsheaders', 'channels', 'crispy_forms', 'livereload', 'django_redis'], 'INTERNAL_IPS': [], 'LANGUAGES': [('af', 'Afrikaans'), ('ar', 'Arabic'), ('ar-dz', 'Algerian Arabic'), ('ast', 'Asturian'), ('az', 'Azerbaijani'), ('bg', 'Bulgarian'), ('be', 'Belarusian'), ('bn', 'Bengali'), ('br', 'Breton'), ('bs', 'Bosnian'), ('ca', 'Catalan'), ('ckb', 'Central Kurdish (Sorani)'), ('cs', 'Czech'), ('cy', 'Welsh'), ('da', 'Danish'), ('de', 'German'), ('dsb', 'Lower Sorbian'), ('el', 'Greek'), ('en', 'English'), ('en-au', 'Australian English'), ('en-gb', 'British English'), ('eo', 'Esperanto'), ('es', 'Spanish'), ('es-ar', 'Argentinian Spanish'), ('es-co', 'Colombian Spanish'), ('es-mx', 'Mexican Spanish'), ('es-ni', 'Nicaraguan Spanish'), ('es-ve', 'Venezuelan Spanish'), ('et', 'Estonian'), ('eu', 'Basque'), ('fa', 'Persian'), ('fi', 'Finnish'), ('fr', 'French'), ('fy', 'Frisian'), ('ga', 'Irish'), ('gd', 'Scottish Gaelic'), ('gl', 'Galician'), ('he', 'Hebrew'), ('hi', 'Hindi'), ('hr', 'Croatian'), ('hsb', 'Upper Sorbian'), ('hu', 'Hungarian'), ('hy', 'Armenian'), ('ia', 'Interlingua'), ('id', 'Indonesian'), ('ig', 'Igbo'), ('io', 'Ido'), ('is', 'Icelandic'), ('it', 'Italian'), ('ja', 'Japanese'), ('ka', 'Georgian'), ('kab', 'Kabyle'), ('kk', 'Kazakh'), ('km', 'Khmer'), ('kn', 'Kannada'), ('ko', 'Korean'), ('ky', 'Kyrgyz'), ('lb', 'Luxembourgish'), ('lt', 'Lithuanian'), ('lv', 'Latvian'), ('mk', 'Macedonian'), ('ml', 'Malayalam'), ('mn', 'Mongolian'), ('mr', 'Marathi'), ('ms', 'Malay'), ('my', 'Burmese'), ('nb', 'Norwegian Bokml'), ('ne', 'Nepali'), ('nl', 'Dutch'), ('nn', 'Norwegian Nynorsk'), ('os', 'Ossetic'), ('pa', 'Punjabi'), ('pl', 'Polish'), ('pt', 'Portuguese'), ('pt-br', 'Brazilian Portuguese'), ('ro', 'Romanian'), ('ru', 'Russian'), ('sk', 'Slovak'), ('sl', 'Slovenian'), ('sq', 'Albanian'), ('sr', 'Serbian'), ('sr-latn', 'Serbian Latin'), ('sv', 'Swedish'), ('sw', 'Swahili'), ('ta', 'Tamil'), ('te', 'Telugu'), ('tg', 'Tajik'), ('th', 'Thai'), ('tk', 'Turkmen'), ('tr', 'Turkish'), ('tt', 'Tatar'), ('udm', 'Udmurt'), ('ug', 'Uyghur'), ('uk', 'Ukrainian'), ('ur', 'Urdu'), ('uz', 'Uzbek'), ('vi', 'Vietnamese'), ('zh-hans', 'Simplified Chinese'), ('zh-hant', 'Traditional Chinese')], 'LANGUAGES_BIDI': ['he', 'ar', 'ar-dz', 'ckb', 'fa', 'ug', 'ur'], 'LANGUAGE_CODE': 'en-us', 'LANGUAGE_COOKIE_AGE': None, 'LANGUAGE_COOKIE_DOMAIN': None, 'LANGUAGE_COOKIE_HTTPONLY': False, 'LANGUAGE_COOKIE_NAME': 'django_language', 'LANGUAGE_COOKIE_PATH': '/', 'LANGUAGE_COOKIE_SAMESITE': None, 'LANGUAGE_COOKIE_SECURE': False, 'LOCALE_PATHS': [], 'LOGGING': {'version': 1, 'disable_existing_loggers': False, 'formatters': {'verbose': {'format': '{levelname} {asctime} {module} {message}', 'style': '{'}, 'simple': {'format': '{levelname} {message}', 'style': '{'}}, 'handlers': {'console': {'class': 'logging.StreamHandler', 'formatter': 'verbose', 'stream': <_io.TextIOWrapper name='<stdout>' mode='w' encoding='utf-8'>}, 'file': {'level': 'DEBUG', 'class': 'logging.FileHandler', 'filename': '/home/trent22/Documents/EasyMarket/django_debug.log', 'formatter': 'verbose'}}, 'loggers': {'django': {'handlers': ['console', 'file'], 'level': 'DEBUG', 'propagate': True}, 'myapp': {'handlers': ['console', 'file'], 'level': 'DEBUG', 'propagate': False}}}, 'LOGGING_CONFIG': 'logging.config.dictConfig', 'LOGIN_REDIRECT_URL': 'home', 'LOGIN_URL': 'marketplace:signin', 'LOGOUT_REDIRECT_URL': 'home', 'LOGOUT_URL': 'marketplace:signout', 'MANAGERS': [], 'MEDIA_ROOT': PosixPath('/home/trent22/Documents/EasyMarket/media'), 'MEDIA_URL': '/media/', 'MESSAGE_STORAGE': 'django.contrib.messages.storage.fallback.FallbackStorage', 'MIDDLEWARE': ['django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'corsheaders.middleware.CorsMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'whitenoise.middleware.WhiteNoiseMiddleware', 'marketplace.middleware.TwoFactorMiddleware', 'livereload.middleware.LiveReloadScript'], 'MIGRATION_MODULES': {}, 'MONTH_DAY_FORMAT': 'F j', 'MPESA_CALLBACK_URL': 'mpesa_callback', 'MPESA_CONSUMER_KEY': '********************', 'MPESA_CONSUMER_SECRET': '********************', 'MPESA_ENVIRONMENT': 'sandbox', 'MPESA_EXPRESS_SHORTCODE': '174379', 'MPESA_INITIATOR_SECURITY_CREDENTIALS': None, 'MPESA_INITIATOR_USERNAME': None, 'MPESA_PASSKEY': '********************', 'MPESA_SHORTCODE': '174379', 'MPESA_SHORTCODE_TYPE': 'paybill', 'NUMBER_GROUPING': 0, 'PASSWORD_HASHERS': '********************', 'PASSWORD_RESET_TIMEOUT': '********************', 'PAYMENT_HOST': 'http://localhost:8000', 'PAYMENT_MODEL': 'students.Payment', 'PAYMENT_VARIANTS': {'default': ('payments.dummy.DummyProvider', {'url': '/payment/process/'})}, 'PREPEND_WWW': False, 'REST_FRAMEWORK': {'DEFAULT_AUTHENTICATION_CLASSES': ('rest_framework_simplejwt.authentication.JWTAuthentication',), 'DEFAULT_PERMISSION_CLASSES': ['rest_framework.permissions.IsAuthenticated'], 'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination', 'PAGE_SIZE': 10}, 'ROOT_URLCONF': 'students.urls', 'SECRET_KEY': '********************', 'SECRET_KEY_FALLBACKS': '********************', 'SECURE_CONTENT_TYPE_NOSNIFF': True, 'SECURE_CROSS_ORIGIN_OPENER_POLICY': 'same-origin', 'SECURE_HSTS_INCLUDE_SUBDOMAINS': False, 'SECURE_HSTS_PRELOAD': False, 'SECURE_HSTS_SECONDS': 0, 'SECURE_PROXY_SSL_HEADER': None, 'SECURE_REDIRECT_EXEMPT': [], 'SECURE_REFERRER_POLICY': 'same-origin', 'SECURE_SSL_HOST': None, 'SECURE_SSL_REDIRECT': False, 'SERVER_EMAIL': 'root@localhost', 'SESSION_CACHE_ALIAS': 'default', 'SESSION_COOKIE_AGE': 1209600, 'SESSION_COOKIE_DOMAIN': None, 'SESSION_COOKIE_HTTPONLY': True, 'SESSION_COOKIE_NAME': 'sessionid', 'SESSION_COOKIE_PATH': '/', 'SESSION_COOKIE_SAMESITE': 'Lax', 'SESSION_COOKIE_SECURE': False, 'SESSION_ENGINE': 'django.contrib.sessions.backends.cache', 'SESSION_EXPIRE_AT_BROWSER_CLOSE': False, 'SESSION_FILE_PATH': None, 'SESSION_SAVE_EVERY_REQUEST': False, 'SESSION_SERIALIZER': 'django.contrib.sessions.serializers.JSONSerializer', 'SETTINGS_MODULE': 'students.settings', 'SHORT_DATETIME_FORMAT': 'm/d/Y P', 'SHORT_DATE_FORMAT': 'm/d/Y', 'SIGNING_BACKEND': 'django.core.signing.TimestampSigner', 'SILENCED_SYSTEM_CHECKS': [], 'SIMPLE_JWT': {'ACCESS_TOKEN_LIFETIME': '********************', 'REFRESH_TOKEN_LIFETIME': '********************'}, 'STATICFILES_DIRS': [PosixPath('/home/trent22/Documents/EasyMarket/static')], 'STATICFILES_FINDERS': ['django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder'], 'STATICFILES_STORAGE': 'django.contrib.staticfiles.storage.StaticFilesStorage', 'STATIC_ROOT': PosixPath('/home/trent22/Documents/EasyMarket/staticfiles'), 'STATIC_URL': '/static/', 'STORAGES': {'default': {'BACKEND': 'django.core.files.storage.FileSystemStorage'}, 'staticfiles': {'BACKEND': 'django.contrib.staticfiles.storage.StaticFilesStorage'}}, 'TEMPLATES': [{'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [PosixPath('/home/trent22/Documents/EasyMarket/templates')], 'APP_DIRS': True, 'OPTIONS': {'context_processors': ['django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages']}}], 'TEST_NON_SERIALIZED_APPS': [], 'TEST_RUNNER': 'django.test.runner.DiscoverRunner', 'THOUSAND_SEPARATOR': ',', 'TIME_FORMAT': 'P', 'TIME_INPUT_FORMATS': ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M'], 'TIME_ZONE': 'UTC', 'USE_I18N': True, 'USE_THOUSAND_SEPARATOR': False, 'USE_TZ': True, 'USE_X_FORWARDED_HOST': False, 'USE_X_FORWARDED_PORT': False, 'WSGI_APPLICATION': 'students.wsgi.application', 'X_FRAME_OPTIONS': 'DENY', 'YEAR_MONTH_FORMAT': 'F Y'}, 'sys_executable': '/home/trent22/Documents/sudplace/env/sim/bin/python3', 'sys_version_info': '3.10.12', 'server_time': datetime.datetime(2024, 12, 12, 6, 29, 43, 733739, tzinfo=datetime.timezone.utc), 'django_version_info': '5.1.4', 'sys_path': ['.', '/home/trent22/Documents/sudplace/env/sim/bin', '/usr/lib/python310.zip', '/usr/lib/python3.10', '/usr/lib/python3.10/lib-dynload', '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages', '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/setuptools/_vendor'], 'template_info': None, 'template_does_not_exist': False, 'postmortem': None, 'request_GET_items': <generator object MultiValueDict.items at 0x7fd83c5f7290>, 'request_FILES_items': <generator object MultiValueDict.items at 0x7fd83c5f73e0>, 'request_insecure_uri': 'http://localhost:8000/products/api/products/featured/', 'raising_view_name': 'products.views.ProductViewSet', 'exception_type': 'AttributeError', 'exception_value': "can't set attribute 'review_count'", 'lastframe': {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c9d4840>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '__iter__', 'lineno': 131, 'vars': [('self', '<django.db.models.query.ModelIterable object at 0x7fd83c9e78b0>'), ('db', "'default'"), ('compiler', "<SQLCompiler model=Product connection=<DatabaseWrapper vendor='sqlite' alias='default'> using='default'>"), ('results', "[[(1,\n   'the larry',\n   'The best way to test is to be involved.',\n   12000,\n   1,\n   1,\n   'new',\n   datetime.datetime(2024, 12, 7, 21, 40, 39),\n   datetime.datetime(2024, 12, 7, 21, 43, 27, 946553),\n   True,\n   'product_images/keith-misner-h0Vxgz5tyXA-unsplash.jpg',\n   'the-larry',\n   30,\n   10,\n   1230,\n   True,\n   datetime.datetime(2024, 12, 7, 21, 43, 27, 994220),\n   10,\n   120000,\n   datetime.datetime(2024, 12, 7, 21, 43, 20),\n   5.0,\n   1,\n   120000,\n   1,\n   1,\n   '',\n   '',\n   'admin@example.com',\n   '',\n   1,\n   'pbkdf2_sha256$870000$sodWaWj3ANl1sXywlNwRQO$kAvUvyl2c2Ak/SlPHY84zb2UQ2XfS6O+SFACCvM6ZuM=',\n   datetime.datetime(2024, 12, 7, 21, 40, 26, 257373),\n   True,\n   'admin',\n   '',\n   '',\n   'admin@example.com',\n   True,\n   True,\n   datetime.datetime(2024, 12, 7, 21, 12, 48, 557204),\n   1,\n   'Uncategorized',\n   'Default category for uncategorized products',\n   'category_images/laptop_1.jpg',\n   'uncategorized',\n   True,\n   datetime.datetime(2024, 12, 7, 21, 40, 38, 779996),\n   datetime.datetime(2024, 12, 7, 21, 47, 14, 90701))]]"), ('select', '[(Col(products_product, products.Product.id),\n  (\'"products_product"."id"\', []),\n  None),\n (Col(products_product, products.Product.title),\n  (\'"products_product"."title"\', []),\n  None),\n (Col(products_product, products.Product.description),\n  (\'"products_product"."description"\', []),\n  None),\n (Col(products_product, products.Product.price),\n  (\'"products_product"."price"\', []),\n  None),\n (Col(products_product, products.Product.student),\n  (\'"products_product"."student_id"\', []),\n  None),\n (Col(products_product, products.Product.category),\n  (\'"products_product"."category_id"\', []),\n  None),\n (Col(products_product, products.Product.condition),\n  (\'"products_product"."condition"\', []),\n  None),\n (Col(products_product, products.Product.created_at),\n  (\'"products_product"."created_at"\', []),\n  None),\n (Col(products_product, products.Product.updated_at),\n  (\'"products_product"."updated_at"\', []),\n  None),\n (Col(products_product, products.Product.is_active),\n  (\'"products_product"."is_active"\', []),\n  None),\n (Col(products_product, products.Product.image),\n  (\'"products_product"."image"\', []),\n  None),\n (Col(products_product, products.Product.slug),\n  (\'"products_product"."slug"\', []),\n  None),\n (Col(products_product, products.Product.stock),\n  (\'"products_product"."stock"\', []),\n  None),\n (Col(products_product, products.Product.reserved_stock),\n  (\'"products_product"."reserved_stock"\', []),\n  None),\n (Col(products_product, products.Product.views_count),\n  (\'"products_product"."views_count"\', []),\n  None),\n (Col(products_product, products.Product.featured),\n  (\'"products_product"."featured"\', []),\n  None),\n (Col(products_product, products.Product.last_stock_update),\n  (\'"products_product"."last_stock_update"\', []),\n  None),\n (Col(products_product, products.Product.total_sales),\n  (\'"products_product"."total_sales"\', []),\n  None),\n (Col(products_product, products.Product.total_revenue),\n  (\'"products_product"."total_revenue"\', []),\n  None),\n (Col(products_product, products.Product.last_sale_date),\n  (\'"products_product"."last_sale_date"\', []),\n  None),\n (Avg(Col(marketplace_review, marketplace.Review.rating)),\n  (\'AVG("marketplace_review"."rating")\', []),\n  \'avg_rating\'),\n (Count(Col(marketplace_review, marketplace.Review.id)),\n  (\'COUNT("marketplace_review"."id")\', []),\n  \'review_count\'),\n (Sum(Col(products_product, products.Product.price) * Col(products_product, products.Product.total_sales)),\n  (\'(CAST(SUM((CAST(("products_product"."price" * \'\n   \'"products_product"."total_sales") AS NUMERIC))) AS NUMERIC))\',\n   []),\n  \'total_sales_amount\'),\n (Col(marketplace_student, marketplace.Student.id),\n  (\'"marketplace_student"."id"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.user),\n  (\'"marketplace_student"."user_id"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.first_name),\n  (\'"marketplace_student"."first_name"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.last_name),\n  (\'"marketplace_student"."last_name"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.email),\n  (\'"marketplace_student"."email"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.bio),\n  (\'"marketplace_student"."bio"\', []),\n  None),\n (Col(auth_user, auth.User.id), (\'"auth_user"."id"\', []), None),\n (Col(auth_user, auth.User.password), (\'"auth_user"."password"\', []), None),\n (Col(auth_user, auth.User.last_login), (\'"auth_user"."last_login"\', []), None),\n (Col(auth_user, auth.User.is_superuser),\n  (\'"auth_user"."is_superuser"\', []),\n  None),\n (Col(auth_user, auth.User.username), (\'"auth_user"."username"\', []), None),\n (Col(auth_user, auth.User.first_name), (\'"auth_user"."first_name"\', []), None),\n (Col(auth_user, auth.User.last_name), (\'"auth_user"."last_name"\', []), None),\n (Col(auth_user, auth.User.email), (\'"auth_user"."email"\', []), None),\n (Col(auth_user, auth.User.is_staff), (\'"auth_user"."is_staff"\', []), None),\n (Col(auth_user, auth.User.is_active), (\'"auth_user"."is_active"\', []), None),\n (Col(auth_user, auth.User.date_joined),\n  (\'"auth_user"."date_joined"\', []),\n  None),\n (Col(prod <trimmed 4907 bytes string>'), ('klass_info', "{'model': <class 'products.models.Product'>,\n 'related_klass_infos': [{'field': <django.db.models.fields.related.ForeignKey: student>,\n                          'from_parent': False,\n                          'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.ForeignKey: student>>,\n                          'model': <class 'marketplace.models.Student'>,\n                          'related_klass_infos': [{'field': <django.db.models.fields.related.OneToOneField: user>,\n                                                   'from_parent': False,\n                                                   'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.OneToOneField: user>>,\n                                                   'model': <class 'django.contrib.auth.models.User'>,\n                                                   'related_klass_infos': [],\n                                                   'remote_setter': <bound method FieldCacheMixin.set_cached_value of <OneToOneRel: marketplace.student>>,\n                                                   'reverse': False,\n                                                   'select_fields': [29,\n                                                                     30,\n                                                                     31,\n                                                                     32,\n                                                                     33,\n                                                                     34,\n                                                                     35,\n                                                                     36,\n                                                                     37,\n                                                                     38,\n                                                                     39]}],\n                          'remote_setter': <function SQLCompiler.get_related_selections.<locals>.<lambda> at 0x7fd83c5f2b00>,\n                          'reverse': False,\n                          'select_fields': [23, 24, 25, 26, 27, 28]},\n                         {'field': <django.db.models.fields.related.ForeignKey: category>,\n                          'from_parent': False,\n                          'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.ForeignKey: category>>,\n                          'model': <class 'products.models.Category'>,\n                          'related_klass_infos': [],\n                          'remote_setter': <function SQLCompiler.get_related_selections.<locals>.<lambda> at 0x7fd83c5f2ef0>,\n                          'reverse': False,\n                          'select_fields': [40, 41, 42, 43, 44, 45, 46, 47]}],\n 'select_fields': [0,\n                   1,\n                   2,\n                   3,\n                   4,\n                   5,\n                   6,\n                   7,\n                   8,\n                   9,\n                   10,\n                   11,\n                   12,\n                   13,\n                   14,\n                   15,\n                   16,\n                   17,\n                   18,\n                   19]}"), ('annotation_col_map', "{'avg_rating': 20, 'review_count': 21, 'total_sales_amount': 22}"), ('model_cls', "<class 'products.models.Product'>"), ('select_fields', '[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]'), ('model_fields_start', '0'), ('model_fields_end', '20'), ('init_list', "['id',\n 'title',\n 'description',\n 'price',\n 'student_id',\n 'category_id',\n 'condition',\n 'created_at',\n 'updated_at',\n 'is_active',\n 'image',\n 'slug',\n 'stock',\n 'reserved_stock',\n 'views_count',\n 'featured',\n 'last_stock_update',\n 'total_sales',\n 'total_revenue',\n 'last_sale_date']"), ('related_populators', '[<django.db.models.query.RelatedPopulator object at 0x7fd844b3d090>,\n <django.db.models.query.RelatedPopulator object at 0x7fd844b3c730>]'), ('known_related_objects', '[]'), ('row', "[1,\n 'the larry',\n 'The best way to test is to be involved.',\n Decimal('12000.00'),\n 1,\n 1,\n 'new',\n datetime.datetime(2024, 12, 7, 21, 40, 39, tzinfo=datetime.timezone.utc),\n datetime.datetime(2024, 12, 7, 21, 43, 27, 946553, tzinfo=datetime.timezone.utc),\n True,\n 'product_images/keith-misner-h0Vxgz5tyXA-unsplash.jpg',\n 'the-larry',\n 30,\n 10,\n 1230,\n True,\n datetime.datetime(2024, 12, 7, 21, 43, 27, 994220, tzinfo=datetime.timezone.utc),\n 10,\n Decimal('120000.00'),\n datetime.datetime(2024, 12, 7, 21, 43, 20, tzinfo=datetime.timezone.utc),\n 5.0,\n 1,\n Decimal('120000'),\n 1,\n 1,\n '',\n '',\n 'admin@example.com',\n '',\n 1,\n 'pbkdf2_sha256$870000$sodWaWj3ANl1sXywlNwRQO$kAvUvyl2c2Ak/SlPHY84zb2UQ2XfS6O+SFACCvM6ZuM=',\n datetime.datetime(2024, 12, 7, 21, 40, 26, 257373, tzinfo=datetime.timezone.utc),\n True,\n 'admin',\n '',\n '',\n 'admin@example.com',\n True,\n True,\n datetime.datetime(2024, 12, 7, 21, 12, 48, 557204, tzinfo=datetime.timezone.utc),\n 1,\n 'Uncategorized',\n 'Default category for uncategorized products',\n 'category_images/laptop_1.jpg',\n 'uncategorized',\n True,\n datetime.datetime(2024, 12, 7, 21, 40, 38, 779996, tzinfo=datetime.timezone.utc),\n datetime.datetime(2024, 12, 7, 21, 47, 14, 90701, tzinfo=datetime.timezone.utc)]"), ('obj', '<Product: the larry>'), ('rel_populator', '<django.db.models.query.RelatedPopulator object at 0x7fd844b3c730>'), ('attr_name', "'review_count'"), ('col_pos', '21'), ('queryset', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566706604096, 'pre_context': ['            obj = model_cls.from_db(', '                db, init_list, row[model_fields_start:model_fields_end]', '            )', '            for rel_populator in related_populators:', '                rel_populator.populate(row, obj)', '            if annotation_col_map:', '                for attr_name, col_pos in annotation_col_map.items():'], 'context_line': '                    setattr(obj, attr_name, row[col_pos])', 'post_context': ['', '            # Add the known related objects to the model.', '            for field, rel_objs, rel_getter in known_related_objects:', '                # Avoid overwriting objects loaded by, e.g., select_related().', '                if field.is_cached(obj):', '                    continue'], 'pre_context_lineno': 124, 'colno': '', 'tb_area_colno': ''}}]
DEBUG 2024-12-12 06:29:46,102 base Exception while resolving variable 'exception_notes' in template 'unknown'.
Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/current_thread_executor.py", line 40, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py", line 124, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/trent22/Documents/EasyMarket/./products/views.py", line 266, in featured
    response_data = serializer.data
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py", line 795, in data
    ret = super().data
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py", line 249, in data
    self._data = self.to_representation(self.instance)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py", line 713, in to_representation
    return [
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 400, in __iter__
    self._fetch_all()
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 131, in __iter__
    setattr(obj, attr_name, row[col_pos])
AttributeError: can't set attribute 'review_count'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 883, in _resolve_lookup
    current = current[bit]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/context.py", line 85, in __getitem__
    raise KeyError(key)
KeyError: 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 889, in _resolve_lookup
    if isinstance(current, BaseContext) and getattr(
AttributeError: type object 'Context' has no attribute 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 899, in _resolve_lookup
    current = current[int(bit)]
ValueError: invalid literal for int() with base 10: 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 906, in _resolve_lookup
    raise VariableDoesNotExist(
django.template.base.VariableDoesNotExist: Failed lookup for key [exception_notes] in [{'True': True, 'False': False, 'None': None}, {'is_email': False, 'unicode_hint': '', 'frames': [{'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c1890c0>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py', 'function': 'inner', 'lineno': 42, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/featured/'>"), ('exc', 'AttributeError("can\'t set attribute \'review_count\'")'), ('get_response', '<bound method BaseHandler._get_response_async of <django.core.handlers.asgi.ASGIHandler object at 0x7fd8455e7070>>')], 'id': 140566697906368, 'pre_context': ['    can rely on getting a response instead of an exception.', '    """', '    if iscoroutinefunction(get_response):', '', '        @wraps(get_response)', '        async def inner(request):', '            try:'], 'context_line': '                response = await get_response(request)', 'post_context': ['            except Exception as exc:', '                response = await sync_to_async(', '                    response_for_exception, thread_sensitive=False', '                )(request, exc)', '            return response', ''], 'pre_context_lineno': 35, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c186e40>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py', 'function': '_get_response_async', 'lineno': 253, 'vars': [('self', '<django.core.handlers.asgi.ASGIHandler object at 0x7fd8455e7070>'), ('request', "<ASGIRequest: GET '/products/api/products/featured/'>"), ('response', 'None'), ('callback', '<function ProductViewSet at 0x7fd83c543910>'), ('callback_args', '()'), ('callback_kwargs', '{}'), ('middleware_method', '<asgiref.sync.SyncToAsync object at 0x7fd844eb17e0>'), ('wrapped_callback', '<asgiref.sync.SyncToAsync object at 0x7fd83c5cdde0>')], 'id': 140566697897536, 'pre_context': ['            wrapped_callback = self.make_view_atomic(callback)', '            # If it is a synchronous view, run it in a subthread', '            if not iscoroutinefunction(wrapped_callback):', '                wrapped_callback = sync_to_async(', '                    wrapped_callback, thread_sensitive=True', '                )', '            try:'], 'context_line': '                response = await wrapped_callback(', 'post_context': ['                    request, *callback_args, **callback_kwargs', '                )', '            except Exception as e:', '                response = await sync_to_async(', '                    self.process_exception_by_middleware,', '                    thread_sensitive=True,'], 'pre_context_lineno': 246, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c160540>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py', 'function': '_view_wrapper', 'lineno': 65, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/featured/'>"), ('args', '()'), ('kwargs', '{}'), ('view_func', '<function ProductViewSet at 0x7fd83c543880>')], 'id': 140566697739584, 'pre_context': ['', '        async def _view_wrapper(request, *args, **kwargs):', '            return await view_func(request, *args, **kwargs)', '', '    else:', '', '        def _view_wrapper(request, *args, **kwargs):'], 'context_line': '            return view_func(request, *args, **kwargs)', 'post_context': ['', '    _view_wrapper.csrf_exempt = True', '', '    return wraps(view_func)(_view_wrapper)'], 'pre_context_lineno': 58, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c101bc0>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py', 'function': 'view', 'lineno': 124, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/featured/'>"), ('args', '()'), ('kwargs', '{}'), ('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('method', "'head'"), ('action', "'featured'"), ('handler', '<bound method ProductViewSet.featured of <products.views.ProductViewSet object at 0x7fd83c5ccca0>>'), ('actions', "{'get': 'featured', 'head': 'featured'}"), ('cls', "<class 'products.views.ProductViewSet'>"), ('initkwargs', "{'basename': 'product',\n 'description': 'Get featured products with caching',\n 'detail': False,\n 'name': 'Featured'}")], 'id': 140566697352128, 'pre_context': ['                setattr(self, method, handler)', '', '            self.request = request', '            self.args = args', '            self.kwargs = kwargs', '', '            # And continue as usual'], 'context_line': '            return self.dispatch(request, *args, **kwargs)', 'post_context': ['', '        # take name and docstring from class', '        update_wrapper(view, cls, updated=())', '', '        # and possible attributes set by decorators', '        # like csrf_exempt from dispatch'], 'pre_context_lineno': 117, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c162380>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'dispatch', 'lineno': 509, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/featured/'>"), ('args', '()'), ('kwargs', '{}'), ('handler', '<bound method ProductViewSet.featured of <products.views.ProductViewSet object at 0x7fd83c5ccca0>>')], 'id': 140566697747328, 'pre_context': ['                                  self.http_method_not_allowed)', '            else:', '                handler = self.http_method_not_allowed', '', '            response = handler(request, *args, **kwargs)', '', '        except Exception as exc:'], 'context_line': '            response = self.handle_exception(exc)', 'post_context': ['', '        self.response = self.finalize_response(request, response, *args, **kwargs)', '        return self.response', '', '    def options(self, request, *args, **kwargs):', '        """'], 'pre_context_lineno': 502, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c15b940>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'handle_exception', 'lineno': 469, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('exc', 'AttributeError("can\'t set attribute \'review_count\'")'), ('exception_handler', '<function exception_handler at 0x7fd83c96bf40>'), ('context', "{'args': (),\n 'kwargs': {},\n 'request': <rest_framework.request.Request: GET '/products/api/products/featured/'>,\n 'view': <products.views.ProductViewSet object at 0x7fd83c5ccca0>}"), ('response', 'None')], 'id': 140566697720128, 'pre_context': ['', '        exception_handler = self.get_exception_handler()', '', '        context = self.get_exception_handler_context()', '        response = exception_handler(exc, context)', '', '        if response is None:'], 'context_line': '            self.raise_uncaught_exception(exc)', 'post_context': ['', '        response.exception = True', '        return response', '', '    def raise_uncaught_exception(self, exc):', '        if settings.DEBUG:'], 'pre_context_lineno': 462, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c15b800>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'raise_uncaught_exception', 'lineno': 480, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('exc', 'AttributeError("can\'t set attribute \'review_count\'")'), ('request', "<rest_framework.request.Request: GET '/products/api/products/featured/'>"), ('renderer_format', "'json'"), ('use_plaintext_traceback', 'True')], 'id': 140566697719808, 'pre_context': ['', '    def raise_uncaught_exception(self, exc):', '        if settings.DEBUG:', '            request = self.request', "            renderer_format = getattr(request.accepted_renderer, 'format')", "            use_plaintext_traceback = renderer_format not in ('html', 'api', 'admin')", '            request.force_plaintext_errors(use_plaintext_traceback)'], 'context_line': '        raise exc', 'post_context': ['', '    # Note: Views are made CSRF exempt from within `as_view` as to prevent', '    # accidental removal of this exemption in cases where `dispatch` needs to', '    # be overridden.', '    def dispatch(self, request, *args, **kwargs):', '        """'], 'pre_context_lineno': 473, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c15b500>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'dispatch', 'lineno': 506, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/featured/'>"), ('args', '()'), ('kwargs', '{}'), ('handler', '<bound method ProductViewSet.featured of <products.views.ProductViewSet object at 0x7fd83c5ccca0>>')], 'id': 140566697719040, 'pre_context': ['            # Get the appropriate handler method', '            if request.method.lower() in self.http_method_names:', '                handler = getattr(self, request.method.lower(),', '                                  self.http_method_not_allowed)', '            else:', '                handler = self.http_method_not_allowed', ''], 'context_line': '            response = handler(request, *args, **kwargs)', 'post_context': ['', '        except Exception as exc:', '            response = self.handle_exception(exc)', '', '        self.response = self.finalize_response(request, response, *args, **kwargs)', '        return self.response'], 'pre_context_lineno': 499, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c15ba40>, 'type': 'user', 'filename': '/home/trent22/Documents/EasyMarket/./products/views.py', 'function': 'featured', 'lineno': 266, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c5ccca0>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/featured/'>"), ('cache_key', "'products:featured:'"), ('cached_results', 'None'), ('queryset', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('serializer', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697720384, 'pre_context': ["        ).order_by('-created_at')[:8]", '', '        serializer = ProductListSerializer(', '            queryset,', '            many=True,', "            context={'request': request}", '        )'], 'context_line': '        response_data = serializer.data', 'post_context': ['        cache.set(cache_key, response_data, CACHE_TTL)', '        return Response(response_data)', '', "    @action(detail=False, methods=['get'])", '    def trending(self, request):', '        """Get trending products based on views, sales and ratings"""'], 'pre_context_lineno': 259, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c185300>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py', 'function': 'data', 'lineno': 795, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('__class__', "<class 'rest_framework.serializers.ListSerializer'>")], 'id': 140566697890560, 'pre_context': ['        return representation.list_repr(self, indent=1)', '', '    # Include a backlink to the serializer class on return objects.', '    # Allows renderers such as HTMLFormRenderer to get the full field info.', '', '    @property', '    def data(self):'], 'context_line': '        ret = super().data', 'post_context': ['        return ReturnList(ret, serializer=self)', '', '    @property', '    def errors(self):', '        ret = super().errors', "        if isinstance(ret, list) and len(ret) == 1 and getattr(ret[0], 'code', None) == 'null':"], 'pre_context_lineno': 788, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c186780>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py', 'function': 'data', 'lineno': 249, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697895808, 'pre_context': ["                'You should either call `.is_valid()` first, '", "                'or access `.initial_data` instead.'", '            )', '            raise AssertionError(msg)', '', "        if not hasattr(self, '_data'):", "            if self.instance is not None and not getattr(self, '_errors', None):"], 'context_line': '                self._data = self.to_representation(self.instance)', 'post_context': ["            elif hasattr(self, '_validated_data') and not getattr(self, '_errors', None):", '                self._data = self.to_representation(self.validated_data)', '            else:', '                self._data = self.get_initial()', '        return self._data', ''], 'pre_context_lineno': 242, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c187e40>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py', 'function': 'to_representation', 'lineno': 713, 'vars': [('data', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('iterable', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('self', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697901632, 'pre_context': ['        """', '        List of object instances -> List of dicts of primitive datatypes.', '        """', '        # Dealing with nested relationships, data can be a Manager,', '        # so, first get a queryset from the Manager if needed', '        iterable = data.all() if isinstance(data, models.manager.BaseManager) else data', ''], 'context_line': '        return [', 'post_context': ['            self.child.to_representation(item) for item in iterable', '        ]', '', '    def validate(self, attrs):', '        return attrs', ''], 'pre_context_lineno': 706, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c155a40>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '__iter__', 'lineno': 400, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697695808, 'pre_context': ['            2. sql.compiler.results_iter()', '               - Returns one row at time. At this point the rows are still just', '                 tuples. In some cases the return values are converted to', '                 Python values at this location.', '            3. self.iterator()', '               - Responsible for turning the rows into model objects.', '        """'], 'context_line': '        self._fetch_all()', 'post_context': ['        return iter(self._result_cache)', '', '    def __aiter__(self):', "        # Remember, __aiter__ itself is synchronous, it's the thing it returns", '        # that is async!', '        async def generator():'], 'pre_context_lineno': 393, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c142c40>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '_fetch_all', 'lineno': 1928, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566697618496, 'pre_context': ['        c._known_related_objects = self._known_related_objects', '        c._iterable_class = self._iterable_class', '        c._fields = self._fields', '        return c', '', '    def _fetch_all(self):', '        if self._result_cache is None:'], 'context_line': '            self._result_cache = list(self._iterable_class(self))', 'post_context': ['        if self._prefetch_related_lookups and not self._prefetch_done:', '            self._prefetch_related_objects()', '', '    def _next_is_sticky(self):', '        """', '        Indicate that the next filter call and the one following that should'], 'pre_context_lineno': 1921, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c9d4840>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '__iter__', 'lineno': 131, 'vars': [('self', '<django.db.models.query.ModelIterable object at 0x7fd83c9e78b0>'), ('db', "'default'"), ('compiler', "<SQLCompiler model=Product connection=<DatabaseWrapper vendor='sqlite' alias='default'> using='default'>"), ('results', "[[(1,\n   'the larry',\n   'The best way to test is to be involved.',\n   12000,\n   1,\n   1,\n   'new',\n   datetime.datetime(2024, 12, 7, 21, 40, 39),\n   datetime.datetime(2024, 12, 7, 21, 43, 27, 946553),\n   True,\n   'product_images/keith-misner-h0Vxgz5tyXA-unsplash.jpg',\n   'the-larry',\n   30,\n   10,\n   1230,\n   True,\n   datetime.datetime(2024, 12, 7, 21, 43, 27, 994220),\n   10,\n   120000,\n   datetime.datetime(2024, 12, 7, 21, 43, 20),\n   5.0,\n   1,\n   120000,\n   1,\n   1,\n   '',\n   '',\n   'admin@example.com',\n   '',\n   1,\n   'pbkdf2_sha256$870000$sodWaWj3ANl1sXywlNwRQO$kAvUvyl2c2Ak/SlPHY84zb2UQ2XfS6O+SFACCvM6ZuM=',\n   datetime.datetime(2024, 12, 7, 21, 40, 26, 257373),\n   True,\n   'admin',\n   '',\n   '',\n   'admin@example.com',\n   True,\n   True,\n   datetime.datetime(2024, 12, 7, 21, 12, 48, 557204),\n   1,\n   'Uncategorized',\n   'Default category for uncategorized products',\n   'category_images/laptop_1.jpg',\n   'uncategorized',\n   True,\n   datetime.datetime(2024, 12, 7, 21, 40, 38, 779996),\n   datetime.datetime(2024, 12, 7, 21, 47, 14, 90701))]]"), ('select', '[(Col(products_product, products.Product.id),\n  (\'"products_product"."id"\', []),\n  None),\n (Col(products_product, products.Product.title),\n  (\'"products_product"."title"\', []),\n  None),\n (Col(products_product, products.Product.description),\n  (\'"products_product"."description"\', []),\n  None),\n (Col(products_product, products.Product.price),\n  (\'"products_product"."price"\', []),\n  None),\n (Col(products_product, products.Product.student),\n  (\'"products_product"."student_id"\', []),\n  None),\n (Col(products_product, products.Product.category),\n  (\'"products_product"."category_id"\', []),\n  None),\n (Col(products_product, products.Product.condition),\n  (\'"products_product"."condition"\', []),\n  None),\n (Col(products_product, products.Product.created_at),\n  (\'"products_product"."created_at"\', []),\n  None),\n (Col(products_product, products.Product.updated_at),\n  (\'"products_product"."updated_at"\', []),\n  None),\n (Col(products_product, products.Product.is_active),\n  (\'"products_product"."is_active"\', []),\n  None),\n (Col(products_product, products.Product.image),\n  (\'"products_product"."image"\', []),\n  None),\n (Col(products_product, products.Product.slug),\n  (\'"products_product"."slug"\', []),\n  None),\n (Col(products_product, products.Product.stock),\n  (\'"products_product"."stock"\', []),\n  None),\n (Col(products_product, products.Product.reserved_stock),\n  (\'"products_product"."reserved_stock"\', []),\n  None),\n (Col(products_product, products.Product.views_count),\n  (\'"products_product"."views_count"\', []),\n  None),\n (Col(products_product, products.Product.featured),\n  (\'"products_product"."featured"\', []),\n  None),\n (Col(products_product, products.Product.last_stock_update),\n  (\'"products_product"."last_stock_update"\', []),\n  None),\n (Col(products_product, products.Product.total_sales),\n  (\'"products_product"."total_sales"\', []),\n  None),\n (Col(products_product, products.Product.total_revenue),\n  (\'"products_product"."total_revenue"\', []),\n  None),\n (Col(products_product, products.Product.last_sale_date),\n  (\'"products_product"."last_sale_date"\', []),\n  None),\n (Avg(Col(marketplace_review, marketplace.Review.rating)),\n  (\'AVG("marketplace_review"."rating")\', []),\n  \'avg_rating\'),\n (Count(Col(marketplace_review, marketplace.Review.id)),\n  (\'COUNT("marketplace_review"."id")\', []),\n  \'review_count\'),\n (Sum(Col(products_product, products.Product.price) * Col(products_product, products.Product.total_sales)),\n  (\'(CAST(SUM((CAST(("products_product"."price" * \'\n   \'"products_product"."total_sales") AS NUMERIC))) AS NUMERIC))\',\n   []),\n  \'total_sales_amount\'),\n (Col(marketplace_student, marketplace.Student.id),\n  (\'"marketplace_student"."id"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.user),\n  (\'"marketplace_student"."user_id"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.first_name),\n  (\'"marketplace_student"."first_name"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.last_name),\n  (\'"marketplace_student"."last_name"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.email),\n  (\'"marketplace_student"."email"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.bio),\n  (\'"marketplace_student"."bio"\', []),\n  None),\n (Col(auth_user, auth.User.id), (\'"auth_user"."id"\', []), None),\n (Col(auth_user, auth.User.password), (\'"auth_user"."password"\', []), None),\n (Col(auth_user, auth.User.last_login), (\'"auth_user"."last_login"\', []), None),\n (Col(auth_user, auth.User.is_superuser),\n  (\'"auth_user"."is_superuser"\', []),\n  None),\n (Col(auth_user, auth.User.username), (\'"auth_user"."username"\', []), None),\n (Col(auth_user, auth.User.first_name), (\'"auth_user"."first_name"\', []), None),\n (Col(auth_user, auth.User.last_name), (\'"auth_user"."last_name"\', []), None),\n (Col(auth_user, auth.User.email), (\'"auth_user"."email"\', []), None),\n (Col(auth_user, auth.User.is_staff), (\'"auth_user"."is_staff"\', []), None),\n (Col(auth_user, auth.User.is_active), (\'"auth_user"."is_active"\', []), None),\n (Col(auth_user, auth.User.date_joined),\n  (\'"auth_user"."date_joined"\', []),\n  None),\n (Col(prod <trimmed 4907 bytes string>'), ('klass_info', "{'model': <class 'products.models.Product'>,\n 'related_klass_infos': [{'field': <django.db.models.fields.related.ForeignKey: student>,\n                          'from_parent': False,\n                          'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.ForeignKey: student>>,\n                          'model': <class 'marketplace.models.Student'>,\n                          'related_klass_infos': [{'field': <django.db.models.fields.related.OneToOneField: user>,\n                                                   'from_parent': False,\n                                                   'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.OneToOneField: user>>,\n                                                   'model': <class 'django.contrib.auth.models.User'>,\n                                                   'related_klass_infos': [],\n                                                   'remote_setter': <bound method FieldCacheMixin.set_cached_value of <OneToOneRel: marketplace.student>>,\n                                                   'reverse': False,\n                                                   'select_fields': [29,\n                                                                     30,\n                                                                     31,\n                                                                     32,\n                                                                     33,\n                                                                     34,\n                                                                     35,\n                                                                     36,\n                                                                     37,\n                                                                     38,\n                                                                     39]}],\n                          'remote_setter': <function SQLCompiler.get_related_selections.<locals>.<lambda> at 0x7fd83c5f2b00>,\n                          'reverse': False,\n                          'select_fields': [23, 24, 25, 26, 27, 28]},\n                         {'field': <django.db.models.fields.related.ForeignKey: category>,\n                          'from_parent': False,\n                          'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.ForeignKey: category>>,\n                          'model': <class 'products.models.Category'>,\n                          'related_klass_infos': [],\n                          'remote_setter': <function SQLCompiler.get_related_selections.<locals>.<lambda> at 0x7fd83c5f2ef0>,\n                          'reverse': False,\n                          'select_fields': [40, 41, 42, 43, 44, 45, 46, 47]}],\n 'select_fields': [0,\n                   1,\n                   2,\n                   3,\n                   4,\n                   5,\n                   6,\n                   7,\n                   8,\n                   9,\n                   10,\n                   11,\n                   12,\n                   13,\n                   14,\n                   15,\n                   16,\n                   17,\n                   18,\n                   19]}"), ('annotation_col_map', "{'avg_rating': 20, 'review_count': 21, 'total_sales_amount': 22}"), ('model_cls', "<class 'products.models.Product'>"), ('select_fields', '[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]'), ('model_fields_start', '0'), ('model_fields_end', '20'), ('init_list', "['id',\n 'title',\n 'description',\n 'price',\n 'student_id',\n 'category_id',\n 'condition',\n 'created_at',\n 'updated_at',\n 'is_active',\n 'image',\n 'slug',\n 'stock',\n 'reserved_stock',\n 'views_count',\n 'featured',\n 'last_stock_update',\n 'total_sales',\n 'total_revenue',\n 'last_sale_date']"), ('related_populators', '[<django.db.models.query.RelatedPopulator object at 0x7fd844b3d090>,\n <django.db.models.query.RelatedPopulator object at 0x7fd844b3c730>]'), ('known_related_objects', '[]'), ('row', "[1,\n 'the larry',\n 'The best way to test is to be involved.',\n Decimal('12000.00'),\n 1,\n 1,\n 'new',\n datetime.datetime(2024, 12, 7, 21, 40, 39, tzinfo=datetime.timezone.utc),\n datetime.datetime(2024, 12, 7, 21, 43, 27, 946553, tzinfo=datetime.timezone.utc),\n True,\n 'product_images/keith-misner-h0Vxgz5tyXA-unsplash.jpg',\n 'the-larry',\n 30,\n 10,\n 1230,\n True,\n datetime.datetime(2024, 12, 7, 21, 43, 27, 994220, tzinfo=datetime.timezone.utc),\n 10,\n Decimal('120000.00'),\n datetime.datetime(2024, 12, 7, 21, 43, 20, tzinfo=datetime.timezone.utc),\n 5.0,\n 1,\n Decimal('120000'),\n 1,\n 1,\n '',\n '',\n 'admin@example.com',\n '',\n 1,\n 'pbkdf2_sha256$870000$sodWaWj3ANl1sXywlNwRQO$kAvUvyl2c2Ak/SlPHY84zb2UQ2XfS6O+SFACCvM6ZuM=',\n datetime.datetime(2024, 12, 7, 21, 40, 26, 257373, tzinfo=datetime.timezone.utc),\n True,\n 'admin',\n '',\n '',\n 'admin@example.com',\n True,\n True,\n datetime.datetime(2024, 12, 7, 21, 12, 48, 557204, tzinfo=datetime.timezone.utc),\n 1,\n 'Uncategorized',\n 'Default category for uncategorized products',\n 'category_images/laptop_1.jpg',\n 'uncategorized',\n True,\n datetime.datetime(2024, 12, 7, 21, 40, 38, 779996, tzinfo=datetime.timezone.utc),\n datetime.datetime(2024, 12, 7, 21, 47, 14, 90701, tzinfo=datetime.timezone.utc)]"), ('obj', '<Product: the larry>'), ('rel_populator', '<django.db.models.query.RelatedPopulator object at 0x7fd844b3c730>'), ('attr_name', "'review_count'"), ('col_pos', '21'), ('queryset', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566706604096, 'pre_context': ['            obj = model_cls.from_db(', '                db, init_list, row[model_fields_start:model_fields_end]', '            )', '            for rel_populator in related_populators:', '                rel_populator.populate(row, obj)', '            if annotation_col_map:', '                for attr_name, col_pos in annotation_col_map.items():'], 'context_line': '                    setattr(obj, attr_name, row[col_pos])', 'post_context': ['', '            # Add the known related objects to the model.', '            for field, rel_objs, rel_getter in known_related_objects:', '                # Avoid overwriting objects loaded by, e.g., select_related().', '                if field.is_cached(obj):', '                    continue'], 'pre_context_lineno': 124, 'colno': '', 'tb_area_colno': ''}], 'request': <ASGIRequest: GET '/products/api/products/featured/'>, 'request_meta': {'REQUEST_METHOD': 'GET', 'QUERY_STRING': '', 'SCRIPT_NAME': '', 'PATH_INFO': '/products/api/products/featured/', 'wsgi.multithread': True, 'wsgi.multiprocess': True, 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_HOST': '127.0.0.1', 'REMOTE_PORT': 48034, 'SERVER_NAME': '127.0.0.1', 'SERVER_PORT': '8000', 'HTTP_HOST': 'localhost:8000', 'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:133.0) Gecko/20100101 Firefox/133.0', 'HTTP_ACCEPT': 'application/json, text/plain, */*', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.5', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate, br, zstd', 'HTTP_ORIGIN': 'http://localhost:3000', 'HTTP_DNT': '1', 'HTTP_SEC_GPC': '1', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_REFERER': 'http://localhost:3000/', 'HTTP_SEC_FETCH_DEST': 'empty', 'HTTP_SEC_FETCH_MODE': 'cors', 'HTTP_SEC_FETCH_SITE': 'same-site'}, 'request_COOKIES_items': dict_items([]), 'user_str': 'AnonymousUser', 'filtered_POST_items': [], 'settings': {'ABSOLUTE_URL_OVERRIDES': {}, 'ADMINS': [], 'ALLOWED_HOSTS': ['*'], 'APPEND_SLASH': True, 'ASGI_APPLICATION': 'marketplace.routing.application', 'AUTHENTICATION_BACKENDS': ['django.contrib.auth.backends.ModelBackend'], 'AUTH_PASSWORD_VALIDATORS': '********************', 'AUTH_USER_MODEL': 'auth.User', 'BASE_DIR': PosixPath('/home/trent22/Documents/EasyMarket'), 'CACHES': {'default': {'BACKEND': 'django_redis.cache.RedisCache', 'LOCATION': 'redis://127.0.0.1:6380/1', 'OPTIONS': {'CLIENT_CLASS': 'django_redis.client.DefaultClient'}}}, 'CACHE_MIDDLEWARE_ALIAS': 'default', 'CACHE_MIDDLEWARE_KEY_PREFIX': '********************', 'CACHE_MIDDLEWARE_SECONDS': 600, 'CHANNEL_LAYERS': {'default': {'BACKEND': 'channels.layers.InMemoryChannelLayer'}}, 'CORS_ALLOWED_ORIGINS': ['http://localhost:3000'], 'CORS_ALLOW_CREDENTIALS': True, 'CRISPY_TEMPLATE_PACK': 'bootstrap4', 'CSRF_COOKIE_AGE': 31449600, 'CSRF_COOKIE_DOMAIN': None, 'CSRF_COOKIE_HTTPONLY': False, 'CSRF_COOKIE_NAME': 'csrftoken', 'CSRF_COOKIE_PATH': '/', 'CSRF_COOKIE_SAMESITE': 'Lax', 'CSRF_COOKIE_SECURE': False, 'CSRF_FAILURE_VIEW': 'django.views.csrf.csrf_failure', 'CSRF_HEADER_NAME': 'HTTP_X_CSRFTOKEN', 'CSRF_TRUSTED_ORIGINS': [], 'CSRF_USE_SESSIONS': False, 'DATABASES': {'default': {'ENGINE': 'django.db.backends.sqlite3', 'NAME': PosixPath('/home/trent22/Documents/EasyMarket/db.sqlite3'), 'ATOMIC_REQUESTS': False, 'AUTOCOMMIT': True, 'CONN_MAX_AGE': 0, 'CONN_HEALTH_CHECKS': False, 'OPTIONS': {}, 'TIME_ZONE': None, 'USER': '', 'PASSWORD': '********************', 'HOST': '', 'PORT': '', 'TEST': {'CHARSET': None, 'COLLATION': None, 'MIGRATE': True, 'MIRROR': None, 'NAME': None}}}, 'DATABASE_ROUTERS': [], 'DATA_UPLOAD_MAX_MEMORY_SIZE': 2621440, 'DATA_UPLOAD_MAX_NUMBER_FIELDS': 1000, 'DATA_UPLOAD_MAX_NUMBER_FILES': 100, 'DATETIME_FORMAT': 'N j, Y, P', 'DATETIME_INPUT_FORMATS': ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M'], 'DATE_FORMAT': 'N j, Y', 'DATE_INPUT_FORMATS': ['%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', '%b %d %Y', '%b %d, %Y', '%d %b %Y', '%d %b, %Y', '%B %d %Y', '%B %d, %Y', '%d %B %Y', '%d %B, %Y'], 'DEBUG': True, 'DEBUG_PROPAGATE_EXCEPTIONS': False, 'DECIMAL_SEPARATOR': '.', 'DEFAULT_AUTO_FIELD': 'django.db.models.BigAutoField', 'DEFAULT_CHARSET': 'utf-8', 'DEFAULT_EXCEPTION_REPORTER': 'django.views.debug.ExceptionReporter', 'DEFAULT_EXCEPTION_REPORTER_FILTER': 'django.views.debug.SafeExceptionReporterFilter', 'DEFAULT_FROM_EMAIL': 'webmaster@localhost', 'DEFAULT_INDEX_TABLESPACE': '', 'DEFAULT_TABLESPACE': '', 'DISALLOWED_USER_AGENTS': [], 'EMAIL_BACKEND': 'django.core.mail.backends.smtp.EmailBackend', 'EMAIL_HOST': 'smtp.gmail.com', 'EMAIL_HOST_PASSWORD': '********************', 'EMAIL_HOST_USER': None, 'EMAIL_PORT': 587, 'EMAIL_SSL_CERTFILE': None, 'EMAIL_SSL_KEYFILE': '********************', 'EMAIL_SUBJECT_PREFIX': '[Django] ', 'EMAIL_TIMEOUT': None, 'EMAIL_USE_LOCALTIME': False, 'EMAIL_USE_SSL': False, 'EMAIL_USE_TLS': True, 'FILE_UPLOAD_DIRECTORY_PERMISSIONS': None, 'FILE_UPLOAD_HANDLERS': ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler'], 'FILE_UPLOAD_MAX_MEMORY_SIZE': 2621440, 'FILE_UPLOAD_PERMISSIONS': 420, 'FILE_UPLOAD_TEMP_DIR': None, 'FIRST_DAY_OF_WEEK': 0, 'FIXTURE_DIRS': [], 'FORCE_SCRIPT_NAME': None, 'FORMAT_MODULE_PATH': None, 'FORMS_URLFIELD_ASSUME_HTTPS': False, 'FORM_RENDERER': 'django.forms.renderers.DjangoTemplates', 'IGNORABLE_404_URLS': [], 'INSTALLED_APPS': ['django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'marketplace.apps.MarketplaceConfig', 'products.apps.ProductsConfig', 'orders.apps.OrdersConfig', 'payment.apps.PaymentConfig', 'adminapp.apps.AdminappConfig', 'staticpages.apps.StaticpagesConfig', 'django_daraja', 'widget_tweaks', 'rest_framework', 'rest_framework_simplejwt', 'corsheaders', 'channels', 'crispy_forms', 'livereload', 'django_redis'], 'INTERNAL_IPS': [], 'LANGUAGES': [('af', 'Afrikaans'), ('ar', 'Arabic'), ('ar-dz', 'Algerian Arabic'), ('ast', 'Asturian'), ('az', 'Azerbaijani'), ('bg', 'Bulgarian'), ('be', 'Belarusian'), ('bn', 'Bengali'), ('br', 'Breton'), ('bs', 'Bosnian'), ('ca', 'Catalan'), ('ckb', 'Central Kurdish (Sorani)'), ('cs', 'Czech'), ('cy', 'Welsh'), ('da', 'Danish'), ('de', 'German'), ('dsb', 'Lower Sorbian'), ('el', 'Greek'), ('en', 'English'), ('en-au', 'Australian English'), ('en-gb', 'British English'), ('eo', 'Esperanto'), ('es', 'Spanish'), ('es-ar', 'Argentinian Spanish'), ('es-co', 'Colombian Spanish'), ('es-mx', 'Mexican Spanish'), ('es-ni', 'Nicaraguan Spanish'), ('es-ve', 'Venezuelan Spanish'), ('et', 'Estonian'), ('eu', 'Basque'), ('fa', 'Persian'), ('fi', 'Finnish'), ('fr', 'French'), ('fy', 'Frisian'), ('ga', 'Irish'), ('gd', 'Scottish Gaelic'), ('gl', 'Galician'), ('he', 'Hebrew'), ('hi', 'Hindi'), ('hr', 'Croatian'), ('hsb', 'Upper Sorbian'), ('hu', 'Hungarian'), ('hy', 'Armenian'), ('ia', 'Interlingua'), ('id', 'Indonesian'), ('ig', 'Igbo'), ('io', 'Ido'), ('is', 'Icelandic'), ('it', 'Italian'), ('ja', 'Japanese'), ('ka', 'Georgian'), ('kab', 'Kabyle'), ('kk', 'Kazakh'), ('km', 'Khmer'), ('kn', 'Kannada'), ('ko', 'Korean'), ('ky', 'Kyrgyz'), ('lb', 'Luxembourgish'), ('lt', 'Lithuanian'), ('lv', 'Latvian'), ('mk', 'Macedonian'), ('ml', 'Malayalam'), ('mn', 'Mongolian'), ('mr', 'Marathi'), ('ms', 'Malay'), ('my', 'Burmese'), ('nb', 'Norwegian Bokml'), ('ne', 'Nepali'), ('nl', 'Dutch'), ('nn', 'Norwegian Nynorsk'), ('os', 'Ossetic'), ('pa', 'Punjabi'), ('pl', 'Polish'), ('pt', 'Portuguese'), ('pt-br', 'Brazilian Portuguese'), ('ro', 'Romanian'), ('ru', 'Russian'), ('sk', 'Slovak'), ('sl', 'Slovenian'), ('sq', 'Albanian'), ('sr', 'Serbian'), ('sr-latn', 'Serbian Latin'), ('sv', 'Swedish'), ('sw', 'Swahili'), ('ta', 'Tamil'), ('te', 'Telugu'), ('tg', 'Tajik'), ('th', 'Thai'), ('tk', 'Turkmen'), ('tr', 'Turkish'), ('tt', 'Tatar'), ('udm', 'Udmurt'), ('ug', 'Uyghur'), ('uk', 'Ukrainian'), ('ur', 'Urdu'), ('uz', 'Uzbek'), ('vi', 'Vietnamese'), ('zh-hans', 'Simplified Chinese'), ('zh-hant', 'Traditional Chinese')], 'LANGUAGES_BIDI': ['he', 'ar', 'ar-dz', 'ckb', 'fa', 'ug', 'ur'], 'LANGUAGE_CODE': 'en-us', 'LANGUAGE_COOKIE_AGE': None, 'LANGUAGE_COOKIE_DOMAIN': None, 'LANGUAGE_COOKIE_HTTPONLY': False, 'LANGUAGE_COOKIE_NAME': 'django_language', 'LANGUAGE_COOKIE_PATH': '/', 'LANGUAGE_COOKIE_SAMESITE': None, 'LANGUAGE_COOKIE_SECURE': False, 'LOCALE_PATHS': [], 'LOGGING': {'version': 1, 'disable_existing_loggers': False, 'formatters': {'verbose': {'format': '{levelname} {asctime} {module} {message}', 'style': '{'}, 'simple': {'format': '{levelname} {message}', 'style': '{'}}, 'handlers': {'console': {'class': 'logging.StreamHandler', 'formatter': 'verbose', 'stream': <_io.TextIOWrapper name='<stdout>' mode='w' encoding='utf-8'>}, 'file': {'level': 'DEBUG', 'class': 'logging.FileHandler', 'filename': '/home/trent22/Documents/EasyMarket/django_debug.log', 'formatter': 'verbose'}}, 'loggers': {'django': {'handlers': ['console', 'file'], 'level': 'DEBUG', 'propagate': True}, 'myapp': {'handlers': ['console', 'file'], 'level': 'DEBUG', 'propagate': False}}}, 'LOGGING_CONFIG': 'logging.config.dictConfig', 'LOGIN_REDIRECT_URL': 'home', 'LOGIN_URL': 'marketplace:signin', 'LOGOUT_REDIRECT_URL': 'home', 'LOGOUT_URL': 'marketplace:signout', 'MANAGERS': [], 'MEDIA_ROOT': PosixPath('/home/trent22/Documents/EasyMarket/media'), 'MEDIA_URL': '/media/', 'MESSAGE_STORAGE': 'django.contrib.messages.storage.fallback.FallbackStorage', 'MIDDLEWARE': ['django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'corsheaders.middleware.CorsMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'whitenoise.middleware.WhiteNoiseMiddleware', 'marketplace.middleware.TwoFactorMiddleware', 'livereload.middleware.LiveReloadScript'], 'MIGRATION_MODULES': {}, 'MONTH_DAY_FORMAT': 'F j', 'MPESA_CALLBACK_URL': 'mpesa_callback', 'MPESA_CONSUMER_KEY': '********************', 'MPESA_CONSUMER_SECRET': '********************', 'MPESA_ENVIRONMENT': 'sandbox', 'MPESA_EXPRESS_SHORTCODE': '174379', 'MPESA_INITIATOR_SECURITY_CREDENTIALS': None, 'MPESA_INITIATOR_USERNAME': None, 'MPESA_PASSKEY': '********************', 'MPESA_SHORTCODE': '174379', 'MPESA_SHORTCODE_TYPE': 'paybill', 'NUMBER_GROUPING': 0, 'PASSWORD_HASHERS': '********************', 'PASSWORD_RESET_TIMEOUT': '********************', 'PAYMENT_HOST': 'http://localhost:8000', 'PAYMENT_MODEL': 'students.Payment', 'PAYMENT_VARIANTS': {'default': ('payments.dummy.DummyProvider', {'url': '/payment/process/'})}, 'PREPEND_WWW': False, 'REST_FRAMEWORK': {'DEFAULT_AUTHENTICATION_CLASSES': ('rest_framework_simplejwt.authentication.JWTAuthentication',), 'DEFAULT_PERMISSION_CLASSES': ['rest_framework.permissions.IsAuthenticated'], 'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination', 'PAGE_SIZE': 10}, 'ROOT_URLCONF': 'students.urls', 'SECRET_KEY': '********************', 'SECRET_KEY_FALLBACKS': '********************', 'SECURE_CONTENT_TYPE_NOSNIFF': True, 'SECURE_CROSS_ORIGIN_OPENER_POLICY': 'same-origin', 'SECURE_HSTS_INCLUDE_SUBDOMAINS': False, 'SECURE_HSTS_PRELOAD': False, 'SECURE_HSTS_SECONDS': 0, 'SECURE_PROXY_SSL_HEADER': None, 'SECURE_REDIRECT_EXEMPT': [], 'SECURE_REFERRER_POLICY': 'same-origin', 'SECURE_SSL_HOST': None, 'SECURE_SSL_REDIRECT': False, 'SERVER_EMAIL': 'root@localhost', 'SESSION_CACHE_ALIAS': 'default', 'SESSION_COOKIE_AGE': 1209600, 'SESSION_COOKIE_DOMAIN': None, 'SESSION_COOKIE_HTTPONLY': True, 'SESSION_COOKIE_NAME': 'sessionid', 'SESSION_COOKIE_PATH': '/', 'SESSION_COOKIE_SAMESITE': 'Lax', 'SESSION_COOKIE_SECURE': False, 'SESSION_ENGINE': 'django.contrib.sessions.backends.cache', 'SESSION_EXPIRE_AT_BROWSER_CLOSE': False, 'SESSION_FILE_PATH': None, 'SESSION_SAVE_EVERY_REQUEST': False, 'SESSION_SERIALIZER': 'django.contrib.sessions.serializers.JSONSerializer', 'SETTINGS_MODULE': 'students.settings', 'SHORT_DATETIME_FORMAT': 'm/d/Y P', 'SHORT_DATE_FORMAT': 'm/d/Y', 'SIGNING_BACKEND': 'django.core.signing.TimestampSigner', 'SILENCED_SYSTEM_CHECKS': [], 'SIMPLE_JWT': {'ACCESS_TOKEN_LIFETIME': '********************', 'REFRESH_TOKEN_LIFETIME': '********************'}, 'STATICFILES_DIRS': [PosixPath('/home/trent22/Documents/EasyMarket/static')], 'STATICFILES_FINDERS': ['django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder'], 'STATICFILES_STORAGE': 'django.contrib.staticfiles.storage.StaticFilesStorage', 'STATIC_ROOT': PosixPath('/home/trent22/Documents/EasyMarket/staticfiles'), 'STATIC_URL': '/static/', 'STORAGES': {'default': {'BACKEND': 'django.core.files.storage.FileSystemStorage'}, 'staticfiles': {'BACKEND': 'django.contrib.staticfiles.storage.StaticFilesStorage'}}, 'TEMPLATES': [{'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [PosixPath('/home/trent22/Documents/EasyMarket/templates')], 'APP_DIRS': True, 'OPTIONS': {'context_processors': ['django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages']}}], 'TEST_NON_SERIALIZED_APPS': [], 'TEST_RUNNER': 'django.test.runner.DiscoverRunner', 'THOUSAND_SEPARATOR': ',', 'TIME_FORMAT': 'P', 'TIME_INPUT_FORMATS': ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M'], 'TIME_ZONE': 'UTC', 'USE_I18N': True, 'USE_THOUSAND_SEPARATOR': False, 'USE_TZ': True, 'USE_X_FORWARDED_HOST': False, 'USE_X_FORWARDED_PORT': False, 'WSGI_APPLICATION': 'students.wsgi.application', 'X_FRAME_OPTIONS': 'DENY', 'YEAR_MONTH_FORMAT': 'F Y'}, 'sys_executable': '/home/trent22/Documents/sudplace/env/sim/bin/python3', 'sys_version_info': '3.10.12', 'server_time': datetime.datetime(2024, 12, 12, 6, 29, 43, 733739, tzinfo=datetime.timezone.utc), 'django_version_info': '5.1.4', 'sys_path': ['.', '/home/trent22/Documents/sudplace/env/sim/bin', '/usr/lib/python310.zip', '/usr/lib/python3.10', '/usr/lib/python3.10/lib-dynload', '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages', '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/setuptools/_vendor'], 'template_info': None, 'template_does_not_exist': False, 'postmortem': None, 'request_GET_items': <generator object MultiValueDict.items at 0x7fd83c5f7290>, 'request_FILES_items': <generator object MultiValueDict.items at 0x7fd83c5f73e0>, 'request_insecure_uri': 'http://localhost:8000/products/api/products/featured/', 'raising_view_name': 'products.views.ProductViewSet', 'exception_type': 'AttributeError', 'exception_value': "can't set attribute 'review_count'", 'lastframe': {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c9d4840>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '__iter__', 'lineno': 131, 'vars': [('self', '<django.db.models.query.ModelIterable object at 0x7fd83c9e78b0>'), ('db', "'default'"), ('compiler', "<SQLCompiler model=Product connection=<DatabaseWrapper vendor='sqlite' alias='default'> using='default'>"), ('results', "[[(1,\n   'the larry',\n   'The best way to test is to be involved.',\n   12000,\n   1,\n   1,\n   'new',\n   datetime.datetime(2024, 12, 7, 21, 40, 39),\n   datetime.datetime(2024, 12, 7, 21, 43, 27, 946553),\n   True,\n   'product_images/keith-misner-h0Vxgz5tyXA-unsplash.jpg',\n   'the-larry',\n   30,\n   10,\n   1230,\n   True,\n   datetime.datetime(2024, 12, 7, 21, 43, 27, 994220),\n   10,\n   120000,\n   datetime.datetime(2024, 12, 7, 21, 43, 20),\n   5.0,\n   1,\n   120000,\n   1,\n   1,\n   '',\n   '',\n   'admin@example.com',\n   '',\n   1,\n   'pbkdf2_sha256$870000$sodWaWj3ANl1sXywlNwRQO$kAvUvyl2c2Ak/SlPHY84zb2UQ2XfS6O+SFACCvM6ZuM=',\n   datetime.datetime(2024, 12, 7, 21, 40, 26, 257373),\n   True,\n   'admin',\n   '',\n   '',\n   'admin@example.com',\n   True,\n   True,\n   datetime.datetime(2024, 12, 7, 21, 12, 48, 557204),\n   1,\n   'Uncategorized',\n   'Default category for uncategorized products',\n   'category_images/laptop_1.jpg',\n   'uncategorized',\n   True,\n   datetime.datetime(2024, 12, 7, 21, 40, 38, 779996),\n   datetime.datetime(2024, 12, 7, 21, 47, 14, 90701))]]"), ('select', '[(Col(products_product, products.Product.id),\n  (\'"products_product"."id"\', []),\n  None),\n (Col(products_product, products.Product.title),\n  (\'"products_product"."title"\', []),\n  None),\n (Col(products_product, products.Product.description),\n  (\'"products_product"."description"\', []),\n  None),\n (Col(products_product, products.Product.price),\n  (\'"products_product"."price"\', []),\n  None),\n (Col(products_product, products.Product.student),\n  (\'"products_product"."student_id"\', []),\n  None),\n (Col(products_product, products.Product.category),\n  (\'"products_product"."category_id"\', []),\n  None),\n (Col(products_product, products.Product.condition),\n  (\'"products_product"."condition"\', []),\n  None),\n (Col(products_product, products.Product.created_at),\n  (\'"products_product"."created_at"\', []),\n  None),\n (Col(products_product, products.Product.updated_at),\n  (\'"products_product"."updated_at"\', []),\n  None),\n (Col(products_product, products.Product.is_active),\n  (\'"products_product"."is_active"\', []),\n  None),\n (Col(products_product, products.Product.image),\n  (\'"products_product"."image"\', []),\n  None),\n (Col(products_product, products.Product.slug),\n  (\'"products_product"."slug"\', []),\n  None),\n (Col(products_product, products.Product.stock),\n  (\'"products_product"."stock"\', []),\n  None),\n (Col(products_product, products.Product.reserved_stock),\n  (\'"products_product"."reserved_stock"\', []),\n  None),\n (Col(products_product, products.Product.views_count),\n  (\'"products_product"."views_count"\', []),\n  None),\n (Col(products_product, products.Product.featured),\n  (\'"products_product"."featured"\', []),\n  None),\n (Col(products_product, products.Product.last_stock_update),\n  (\'"products_product"."last_stock_update"\', []),\n  None),\n (Col(products_product, products.Product.total_sales),\n  (\'"products_product"."total_sales"\', []),\n  None),\n (Col(products_product, products.Product.total_revenue),\n  (\'"products_product"."total_revenue"\', []),\n  None),\n (Col(products_product, products.Product.last_sale_date),\n  (\'"products_product"."last_sale_date"\', []),\n  None),\n (Avg(Col(marketplace_review, marketplace.Review.rating)),\n  (\'AVG("marketplace_review"."rating")\', []),\n  \'avg_rating\'),\n (Count(Col(marketplace_review, marketplace.Review.id)),\n  (\'COUNT("marketplace_review"."id")\', []),\n  \'review_count\'),\n (Sum(Col(products_product, products.Product.price) * Col(products_product, products.Product.total_sales)),\n  (\'(CAST(SUM((CAST(("products_product"."price" * \'\n   \'"products_product"."total_sales") AS NUMERIC))) AS NUMERIC))\',\n   []),\n  \'total_sales_amount\'),\n (Col(marketplace_student, marketplace.Student.id),\n  (\'"marketplace_student"."id"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.user),\n  (\'"marketplace_student"."user_id"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.first_name),\n  (\'"marketplace_student"."first_name"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.last_name),\n  (\'"marketplace_student"."last_name"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.email),\n  (\'"marketplace_student"."email"\', []),\n  None),\n (Col(marketplace_student, marketplace.Student.bio),\n  (\'"marketplace_student"."bio"\', []),\n  None),\n (Col(auth_user, auth.User.id), (\'"auth_user"."id"\', []), None),\n (Col(auth_user, auth.User.password), (\'"auth_user"."password"\', []), None),\n (Col(auth_user, auth.User.last_login), (\'"auth_user"."last_login"\', []), None),\n (Col(auth_user, auth.User.is_superuser),\n  (\'"auth_user"."is_superuser"\', []),\n  None),\n (Col(auth_user, auth.User.username), (\'"auth_user"."username"\', []), None),\n (Col(auth_user, auth.User.first_name), (\'"auth_user"."first_name"\', []), None),\n (Col(auth_user, auth.User.last_name), (\'"auth_user"."last_name"\', []), None),\n (Col(auth_user, auth.User.email), (\'"auth_user"."email"\', []), None),\n (Col(auth_user, auth.User.is_staff), (\'"auth_user"."is_staff"\', []), None),\n (Col(auth_user, auth.User.is_active), (\'"auth_user"."is_active"\', []), None),\n (Col(auth_user, auth.User.date_joined),\n  (\'"auth_user"."date_joined"\', []),\n  None),\n (Col(prod <trimmed 4907 bytes string>'), ('klass_info', "{'model': <class 'products.models.Product'>,\n 'related_klass_infos': [{'field': <django.db.models.fields.related.ForeignKey: student>,\n                          'from_parent': False,\n                          'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.ForeignKey: student>>,\n                          'model': <class 'marketplace.models.Student'>,\n                          'related_klass_infos': [{'field': <django.db.models.fields.related.OneToOneField: user>,\n                                                   'from_parent': False,\n                                                   'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.OneToOneField: user>>,\n                                                   'model': <class 'django.contrib.auth.models.User'>,\n                                                   'related_klass_infos': [],\n                                                   'remote_setter': <bound method FieldCacheMixin.set_cached_value of <OneToOneRel: marketplace.student>>,\n                                                   'reverse': False,\n                                                   'select_fields': [29,\n                                                                     30,\n                                                                     31,\n                                                                     32,\n                                                                     33,\n                                                                     34,\n                                                                     35,\n                                                                     36,\n                                                                     37,\n                                                                     38,\n                                                                     39]}],\n                          'remote_setter': <function SQLCompiler.get_related_selections.<locals>.<lambda> at 0x7fd83c5f2b00>,\n                          'reverse': False,\n                          'select_fields': [23, 24, 25, 26, 27, 28]},\n                         {'field': <django.db.models.fields.related.ForeignKey: category>,\n                          'from_parent': False,\n                          'local_setter': <bound method FieldCacheMixin.set_cached_value of <django.db.models.fields.related.ForeignKey: category>>,\n                          'model': <class 'products.models.Category'>,\n                          'related_klass_infos': [],\n                          'remote_setter': <function SQLCompiler.get_related_selections.<locals>.<lambda> at 0x7fd83c5f2ef0>,\n                          'reverse': False,\n                          'select_fields': [40, 41, 42, 43, 44, 45, 46, 47]}],\n 'select_fields': [0,\n                   1,\n                   2,\n                   3,\n                   4,\n                   5,\n                   6,\n                   7,\n                   8,\n                   9,\n                   10,\n                   11,\n                   12,\n                   13,\n                   14,\n                   15,\n                   16,\n                   17,\n                   18,\n                   19]}"), ('annotation_col_map', "{'avg_rating': 20, 'review_count': 21, 'total_sales_amount': 22}"), ('model_cls', "<class 'products.models.Product'>"), ('select_fields', '[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]'), ('model_fields_start', '0'), ('model_fields_end', '20'), ('init_list', "['id',\n 'title',\n 'description',\n 'price',\n 'student_id',\n 'category_id',\n 'condition',\n 'created_at',\n 'updated_at',\n 'is_active',\n 'image',\n 'slug',\n 'stock',\n 'reserved_stock',\n 'views_count',\n 'featured',\n 'last_stock_update',\n 'total_sales',\n 'total_revenue',\n 'last_sale_date']"), ('related_populators', '[<django.db.models.query.RelatedPopulator object at 0x7fd844b3d090>,\n <django.db.models.query.RelatedPopulator object at 0x7fd844b3c730>]'), ('known_related_objects', '[]'), ('row', "[1,\n 'the larry',\n 'The best way to test is to be involved.',\n Decimal('12000.00'),\n 1,\n 1,\n 'new',\n datetime.datetime(2024, 12, 7, 21, 40, 39, tzinfo=datetime.timezone.utc),\n datetime.datetime(2024, 12, 7, 21, 43, 27, 946553, tzinfo=datetime.timezone.utc),\n True,\n 'product_images/keith-misner-h0Vxgz5tyXA-unsplash.jpg',\n 'the-larry',\n 30,\n 10,\n 1230,\n True,\n datetime.datetime(2024, 12, 7, 21, 43, 27, 994220, tzinfo=datetime.timezone.utc),\n 10,\n Decimal('120000.00'),\n datetime.datetime(2024, 12, 7, 21, 43, 20, tzinfo=datetime.timezone.utc),\n 5.0,\n 1,\n Decimal('120000'),\n 1,\n 1,\n '',\n '',\n 'admin@example.com',\n '',\n 1,\n 'pbkdf2_sha256$870000$sodWaWj3ANl1sXywlNwRQO$kAvUvyl2c2Ak/SlPHY84zb2UQ2XfS6O+SFACCvM6ZuM=',\n datetime.datetime(2024, 12, 7, 21, 40, 26, 257373, tzinfo=datetime.timezone.utc),\n True,\n 'admin',\n '',\n '',\n 'admin@example.com',\n True,\n True,\n datetime.datetime(2024, 12, 7, 21, 12, 48, 557204, tzinfo=datetime.timezone.utc),\n 1,\n 'Uncategorized',\n 'Default category for uncategorized products',\n 'category_images/laptop_1.jpg',\n 'uncategorized',\n True,\n datetime.datetime(2024, 12, 7, 21, 40, 38, 779996, tzinfo=datetime.timezone.utc),\n datetime.datetime(2024, 12, 7, 21, 47, 14, 90701, tzinfo=datetime.timezone.utc)]"), ('obj', '<Product: the larry>'), ('rel_populator', '<django.db.models.query.RelatedPopulator object at 0x7fd844b3c730>'), ('attr_name', "'review_count'"), ('col_pos', '21'), ('queryset', "Error in formatting: AttributeError: can't set attribute 'review_count'")], 'id': 140566706604096, 'pre_context': ['            obj = model_cls.from_db(', '                db, init_list, row[model_fields_start:model_fields_end]', '            )', '            for rel_populator in related_populators:', '                rel_populator.populate(row, obj)', '            if annotation_col_map:', '                for attr_name, col_pos in annotation_col_map.items():'], 'context_line': '                    setattr(obj, attr_name, row[col_pos])', 'post_context': ['', '            # Add the known related objects to the model.', '            for field, rel_objs, rel_getter in known_related_objects:', '                # Avoid overwriting objects loaded by, e.g., select_related().', '                if field.is_cached(obj):', '                    continue'], 'pre_context_lineno': 124, 'colno': '', 'tb_area_colno': ''}}]
DEBUG 2024-12-12 06:29:46,131 base Exception while resolving variable 'exception_notes' in template 'unknown'.
Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/current_thread_executor.py", line 40, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py", line 124, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/trent22/Documents/EasyMarket/./products/views.py", line 280, in trending
    queryset = self.get_queryset().filter(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py", line 756, in resolve_expression
    rhs = self.rhs.resolve_expression(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py", line 753, in resolve_expression
    lhs = self.lhs.resolve_expression(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 2010, in resolve_ref
    join_info = self.setup_joins(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 1863, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
django.core.exceptions.FieldError: Cannot resolve keyword 'average_rating' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 883, in _resolve_lookup
    current = current[bit]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/context.py", line 85, in __getitem__
    raise KeyError(key)
KeyError: 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 889, in _resolve_lookup
    if isinstance(current, BaseContext) and getattr(
AttributeError: type object 'Context' has no attribute 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 899, in _resolve_lookup
    current = current[int(bit)]
ValueError: invalid literal for int() with base 10: 'exception_notes'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/template/base.py", line 906, in _resolve_lookup
    raise VariableDoesNotExist(
django.template.base.VariableDoesNotExist: Failed lookup for key [exception_notes] in [{'True': True, 'False': False, 'None': None}, {'is_email': False, 'unicode_hint': '', 'frames': [{'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69800>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py', 'function': 'inner', 'lineno': 42, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/trending/'>"), ('exc', 'FieldError("Cannot resolve keyword \'average_rating\' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists")'), ('get_response', '<bound method BaseHandler._get_response_async of <django.core.handlers.asgi.ASGIHandler object at 0x7fd8455e7070>>')], 'id': 140566842480640, 'pre_context': ['    can rely on getting a response instead of an exception.', '    """', '    if iscoroutinefunction(get_response):', '', '        @wraps(get_response)', '        async def inner(request):', '            try:'], 'context_line': '                response = await get_response(request)', 'post_context': ['            except Exception as exc:', '                response = await sync_to_async(', '                    response_for_exception, thread_sensitive=False', '                )(request, exc)', '            return response', ''], 'pre_context_lineno': 35, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69080>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py', 'function': '_get_response_async', 'lineno': 253, 'vars': [('self', '<django.core.handlers.asgi.ASGIHandler object at 0x7fd8455e7070>'), ('request', "<ASGIRequest: GET '/products/api/products/trending/'>"), ('response', 'None'), ('callback', '<function ProductViewSet at 0x7fd83c543b50>'), ('callback_args', '()'), ('callback_kwargs', '{}'), ('middleware_method', '<asgiref.sync.SyncToAsync object at 0x7fd844eb17e0>'), ('wrapped_callback', '<asgiref.sync.SyncToAsync object at 0x7fd83c57ebf0>')], 'id': 140566842478720, 'pre_context': ['            wrapped_callback = self.make_view_atomic(callback)', '            # If it is a synchronous view, run it in a subthread', '            if not iscoroutinefunction(wrapped_callback):', '                wrapped_callback = sync_to_async(', '                    wrapped_callback, thread_sensitive=True', '                )', '            try:'], 'context_line': '                response = await wrapped_callback(', 'post_context': ['                    request, *callback_args, **callback_kwargs', '                )', '            except Exception as e:', '                response = await sync_to_async(', '                    self.process_exception_by_middleware,', '                    thread_sensitive=True,'], 'pre_context_lineno': 246, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69840>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py', 'function': '_view_wrapper', 'lineno': 65, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/trending/'>"), ('args', '()'), ('kwargs', '{}'), ('view_func', '<function ProductViewSet at 0x7fd83c543ac0>')], 'id': 140566842480704, 'pre_context': ['', '        async def _view_wrapper(request, *args, **kwargs):', '            return await view_func(request, *args, **kwargs)', '', '    else:', '', '        def _view_wrapper(request, *args, **kwargs):'], 'context_line': '            return view_func(request, *args, **kwargs)', 'post_context': ['', '    _view_wrapper.csrf_exempt = True', '', '    return wraps(view_func)(_view_wrapper)'], 'pre_context_lineno': 58, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69200>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py', 'function': 'view', 'lineno': 124, 'vars': [('request', "<ASGIRequest: GET '/products/api/products/trending/'>"), ('args', '()'), ('kwargs', '{}'), ('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('method', "'head'"), ('action', "'trending'"), ('handler', '<bound method ProductViewSet.trending of <products.views.ProductViewSet object at 0x7fd83c57e140>>'), ('actions', "{'get': 'trending', 'head': 'trending'}"), ('cls', "<class 'products.views.ProductViewSet'>"), ('initkwargs', "{'basename': 'product',\n 'description': 'Get trending products based on views, sales and ratings',\n 'detail': False,\n 'name': 'Trending'}")], 'id': 140566842479104, 'pre_context': ['                setattr(self, method, handler)', '', '            self.request = request', '            self.args = args', '            self.kwargs = kwargs', '', '            # And continue as usual'], 'context_line': '            return self.dispatch(request, *args, **kwargs)', 'post_context': ['', '        # take name and docstring from class', '        update_wrapper(view, cls, updated=())', '', '        # and possible attributes set by decorators', '        # like csrf_exempt from dispatch'], 'pre_context_lineno': 117, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b691c0>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'dispatch', 'lineno': 509, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/trending/'>"), ('args', '()'), ('kwargs', '{}'), ('handler', '<bound method ProductViewSet.trending of <products.views.ProductViewSet object at 0x7fd83c57e140>>')], 'id': 140566842479040, 'pre_context': ['                                  self.http_method_not_allowed)', '            else:', '                handler = self.http_method_not_allowed', '', '            response = handler(request, *args, **kwargs)', '', '        except Exception as exc:'], 'context_line': '            response = self.handle_exception(exc)', 'post_context': ['', '        self.response = self.finalize_response(request, response, *args, **kwargs)', '        return self.response', '', '    def options(self, request, *args, **kwargs):', '        """'], 'pre_context_lineno': 502, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b69700>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'handle_exception', 'lineno': 469, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('exc', 'FieldError("Cannot resolve keyword \'average_rating\' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists")'), ('exception_handler', '<function exception_handler at 0x7fd83c96bf40>'), ('context', "{'args': (),\n 'kwargs': {},\n 'request': <rest_framework.request.Request: GET '/products/api/products/trending/'>,\n 'view': <products.views.ProductViewSet object at 0x7fd83c57e140>}"), ('response', 'None')], 'id': 140566842480384, 'pre_context': ['', '        exception_handler = self.get_exception_handler()', '', '        context = self.get_exception_handler_context()', '        response = exception_handler(exc, context)', '', '        if response is None:'], 'context_line': '            self.raise_uncaught_exception(exc)', 'post_context': ['', '        response.exception = True', '        return response', '', '    def raise_uncaught_exception(self, exc):', '        if settings.DEBUG:'], 'pre_context_lineno': 462, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b68740>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'raise_uncaught_exception', 'lineno': 480, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('exc', 'FieldError("Cannot resolve keyword \'average_rating\' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists")'), ('request', "<rest_framework.request.Request: GET '/products/api/products/trending/'>"), ('renderer_format', "'json'"), ('use_plaintext_traceback', 'True')], 'id': 140566842476352, 'pre_context': ['', '    def raise_uncaught_exception(self, exc):', '        if settings.DEBUG:', '            request = self.request', "            renderer_format = getattr(request.accepted_renderer, 'format')", "            use_plaintext_traceback = renderer_format not in ('html', 'api', 'admin')", '            request.force_plaintext_errors(use_plaintext_traceback)'], 'context_line': '        raise exc', 'post_context': ['', '    # Note: Views are made CSRF exempt from within `as_view` as to prevent', '    # accidental removal of this exemption in cases where `dispatch` needs to', '    # be overridden.', '    def dispatch(self, request, *args, **kwargs):', '        """'], 'pre_context_lineno': 473, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b68d00>, 'type': 'user', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py', 'function': 'dispatch', 'lineno': 506, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/trending/'>"), ('args', '()'), ('kwargs', '{}'), ('handler', '<bound method ProductViewSet.trending of <products.views.ProductViewSet object at 0x7fd83c57e140>>')], 'id': 140566842477824, 'pre_context': ['            # Get the appropriate handler method', '            if request.method.lower() in self.http_method_names:', '                handler = getattr(self, request.method.lower(),', '                                  self.http_method_not_allowed)', '            else:', '                handler = self.http_method_not_allowed', ''], 'context_line': '            response = handler(request, *args, **kwargs)', 'post_context': ['', '        except Exception as exc:', '            response = self.handle_exception(exc)', '', '        self.response = self.finalize_response(request, response, *args, **kwargs)', '        return self.response'], 'pre_context_lineno': 499, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c133440>, 'type': 'user', 'filename': '/home/trent22/Documents/EasyMarket/./products/views.py', 'function': 'trending', 'lineno': 280, 'vars': [('self', '<products.views.ProductViewSet object at 0x7fd83c57e140>'), ('request', "<rest_framework.request.Request: GET '/products/api/products/trending/'>"), ('cache_key', "'products:trending:'"), ('cached_results', 'None')], 'id': 140566697555008, 'pre_context': ["        cache_key = get_cache_key('trending', '')", '        cached_results = cache.get(cache_key)', '', '        if cached_results is not None:', '            return Response(cached_results)', '', '        # Get products with high view counts, sales and ratings'], 'context_line': '        queryset = self.get_queryset().filter(', 'post_context': ["            stock__gt=F('reserved_stock')", '        ).annotate(', '            popularity_score=(', "                F('views_count') * 0.3 +  # 30% weight to views", "                F('total_sales') * 0.4 +  # 40% weight to sales", "                F('average_rating') * 0.3  # 30% weight to ratings"], 'pre_context_lineno': 273, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd83c128140>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': 'annotate', 'lineno': 1630, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('args', '()'), ('kwargs', "{'popularity_score': <CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>}")], 'id': 140566697509184, 'pre_context': ['', '    def annotate(self, *args, **kwargs):', '        """', '        Return a query set in which the returned objects have been annotated', '        with extra data or aggregations.', '        """', '        self._not_support_combined_queries("annotate")'], 'context_line': '        return self._annotate(args, kwargs, select=True)', 'post_context': ['', '    def alias(self, *args, **kwargs):', '        """', '        Return a query set with added aliases for extra data or aggregations.', '        """', '        self._not_support_combined_queries("alias")'], 'pre_context_lineno': 1623, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b31a00>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py', 'function': '_annotate', 'lineno': 1680, 'vars': [('self', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('args', '()'), ('kwargs', "{'popularity_score': <CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>}"), ('select', 'True'), ('annotations', "{'popularity_score': <CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>}"), ('clone', "Error in formatting: AttributeError: can't set attribute 'review_count'"), ('names', "{'cart',\n 'cartitem',\n 'category',\n 'category_id',\n 'condition',\n 'created_at',\n 'description',\n 'featured',\n 'id',\n 'image',\n 'is_active',\n 'last_sale_date',\n 'last_stock_update',\n 'orderitem',\n 'price',\n 'reserved_stock',\n 'reviews',\n 'slug',\n 'stock',\n 'student',\n 'student_id',\n 'title',\n 'total_revenue',\n 'total_sales',\n 'updated_at',\n 'variants',\n 'views_count',\n 'wishlists'}"), ('alias', "'popularity_score'"), ('annotation', '<CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>')], 'id': 140566842251776, 'pre_context': ['                raise ValueError(', '                    "The annotation \'%s\' conflicts with a field on "', '                    "the model." % alias', '                )', '            if isinstance(annotation, FilteredRelation):', '                clone.query.add_filtered_relation(annotation, alias)', '            else:'], 'context_line': '                clone.query.add_annotation(', 'post_context': ['                    annotation,', '                    alias,', '                    select=select,', '                )', '        for alias, annotation in clone.query.annotations.items():', '            if alias in annotations and annotation.contains_aggregate:'], 'pre_context_lineno': 1673, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b31d00>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'add_annotation', 'lineno': 1194, 'vars': [('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('annotation', '<CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>'), ('select', 'True'), ('alias', "'popularity_score'")], 'id': 140566842252544, 'pre_context': ['                "Column aliases cannot contain whitespace characters, quotation marks, "', '                "semicolons, or SQL comments."', '            )', '', '    def add_annotation(self, annotation, alias, select=True):', '        """Add a single annotation expression to the Query."""', '        self.check_alias(alias)'], 'context_line': '        annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)', 'post_context': ['        if select:', '            self.append_annotation_mask([alias])', '        else:', '            annotation_mask = (', '                value', '                for value in dict.fromkeys(self.annotation_select)'], 'pre_context_lineno': 1187, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b52c80>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py', 'function': 'resolve_expression', 'lineno': 756, 'vars': [('self', '<CombinedExpression: F(views_count) * Value(0.3) + F(total_sales) * Value(0.4) + F(average_rating) * Value(0.3)>'), ('query', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('allow_joins', 'True'), ('reuse', 'None'), ('summarize', 'False'), ('for_save', 'False'), ('lhs', '<CombinedExpression: Col(products_product, products.Product.views_count) * Value(0.3) + Col(products_product, products.Product.total_sales) * Value(0.4)>')], 'id': 140566842387584, 'pre_context': ['', '    def resolve_expression(', '        self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False', '    ):', '        lhs = self.lhs.resolve_expression(', '            query, allow_joins, reuse, summarize, for_save', '        )'], 'context_line': '        rhs = self.rhs.resolve_expression(', 'post_context': ['            query, allow_joins, reuse, summarize, for_save', '        )', '        if not isinstance(self, (DurationExpression, TemporalSubtraction)):', '            try:', '                lhs_type = lhs.output_field.get_internal_type()', '            except (AttributeError, FieldError):'], 'pre_context_lineno': 749, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b511c0>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py', 'function': 'resolve_expression', 'lineno': 753, 'vars': [('self', '<CombinedExpression: F(average_rating) * Value(0.3)>'), ('query', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('allow_joins', 'True'), ('reuse', 'None'), ('summarize', 'False'), ('for_save', 'False')], 'id': 140566842380736, 'pre_context': ['        expression_wrapper = "(%s)"', '        sql = connection.ops.combine_expression(self.connector, expressions)', '        return expression_wrapper % sql, expression_params', '', '    def resolve_expression(', '        self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False', '    ):'], 'context_line': '        lhs = self.lhs.resolve_expression(', 'post_context': ['            query, allow_joins, reuse, summarize, for_save', '        )', '        rhs = self.rhs.resolve_expression(', '            query, allow_joins, reuse, summarize, for_save', '        )', '        if not isinstance(self, (DurationExpression, TemporalSubtraction)):'], 'pre_context_lineno': 746, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b53a00>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py', 'function': 'resolve_expression', 'lineno': 895, 'vars': [('self', 'F(average_rating)'), ('query', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('allow_joins', 'True'), ('reuse', 'None'), ('summarize', 'False'), ('for_save', 'False')], 'id': 140566842391040, 'pre_context': ['        # Disable old-style iteration protocol inherited from implementing', '        # __getitem__() to prevent this method from hanging.', '        raise TypeError(f"argument of type \'{self.__class__.__name__}\' is not iterable")', '', '    def resolve_expression(', '        self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False', '    ):'], 'context_line': '        return query.resolve_ref(self.name, allow_joins, reuse, summarize)', 'post_context': ['', '    def replace_expressions(self, replacements):', '        return replacements.get(self, self)', '', '    def asc(self, **kwargs):', '        return OrderBy(self, **kwargs)'], 'pre_context_lineno': 888, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b5be40>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'resolve_ref', 'lineno': 2010, 'vars': [('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('name', "'average_rating'"), ('allow_joins', 'True'), ('reuse', 'None'), ('summarize', 'False'), ('annotation', 'None'), ('field_list', "['average_rating']")], 'id': 140566842424896, 'pre_context': ['        else:', '            field_list = name.split(LOOKUP_SEP)', '            annotation = self.annotations.get(field_list[0])', '            if annotation is not None:', '                for transform in field_list[1:]:', '                    annotation = self.try_transform(annotation, transform)', '                return annotation'], 'context_line': '            join_info = self.setup_joins(', 'post_context': ['                field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse', '            )', '            targets, final_alias, join_list = self.trim_joins(', '                join_info.targets, join_info.joins, join_info.path', '            )', '            if not allow_joins and len(join_list) > 1:'], 'pre_context_lineno': 2003, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b23180>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'setup_joins', 'lineno': 1863, 'vars': [('names', "['average_rating']"), ('opts', '<Options for Product>'), ('alias', "'products_product'"), ('can_reuse', 'None'), ('allow_many', 'True'), ('joins', "['products_product']"), ('final_transformer', '<function Query.setup_joins.<locals>.final_transformer at 0x7fd844b481f0>'), ('pivot', '1'), ('last_field_exception', 'None'), ('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>')], 'id': 140566842192256, 'pre_context': ['            return field.get_col(alias)', '', "        # Try resolving all the names as fields first. If there's an error,", '        # treat trailing names as lookups until a field can be resolved.', '        last_field_exception = None', '        for pivot in range(len(names), 0, -1):', '            try:'], 'context_line': '                path, final_field, targets, rest = self.names_to_path(', 'post_context': ['                    names[:pivot],', '                    opts,', '                    allow_many,', '                    fail_on_missing=True,', '                )', '            except FieldError as exc:'], 'pre_context_lineno': 1856, 'colno': '', 'tb_area_colno': ''}, {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b23fc0>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'names_to_path', 'lineno': 1768, 'vars': [('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('names', "['average_rating']"), ('opts', '<Options for Product>'), ('allow_many', 'True'), ('fail_on_missing', 'True'), ('path', '[]'), ('names_with_path', '[]'), ('pos', '-1'), ('name', "'average_rating'"), ('cur_names_with_path', "('average_rating', [])"), ('field', 'None'), ('filtered_relation', 'None'), ('available', "['avg_rating',\n 'cart',\n 'cartitem',\n 'category',\n 'category_id',\n 'condition',\n 'created_at',\n 'description',\n 'featured',\n 'id',\n 'image',\n 'is_active',\n 'last_sale_date',\n 'last_stock_update',\n 'orderitem',\n 'price',\n 'reserved_stock',\n 'review_count',\n 'reviews',\n 'slug',\n 'stock',\n 'student',\n 'student_id',\n 'title',\n 'total_revenue',\n 'total_sales',\n 'total_sales_amount',\n 'updated_at',\n 'variants',\n 'views_count',\n 'wishlists']")], 'id': 140566842195904, 'pre_context': ['                    available = sorted(', '                        [', '                            *get_field_names_from_opts(opts),', '                            *self.annotation_select,', '                            *self._filtered_relations,', '                        ]', '                    )'], 'context_line': '                    raise FieldError(', 'post_context': ['                        "Cannot resolve keyword \'%s\' into field. "', '                        "Choices are: %s" % (name, ", ".join(available))', '                    )', '                break', '            # Check if we need any joins for concrete inheritance cases (the', '            # field lives in parent, but we are currently in one of its'], 'pre_context_lineno': 1761, 'colno': '', 'tb_area_colno': ''}], 'request': <ASGIRequest: GET '/products/api/products/trending/'>, 'request_meta': {'REQUEST_METHOD': 'GET', 'QUERY_STRING': '', 'SCRIPT_NAME': '', 'PATH_INFO': '/products/api/products/trending/', 'wsgi.multithread': True, 'wsgi.multiprocess': True, 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_HOST': '127.0.0.1', 'REMOTE_PORT': 48042, 'SERVER_NAME': '127.0.0.1', 'SERVER_PORT': '8000', 'HTTP_HOST': 'localhost:8000', 'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:133.0) Gecko/20100101 Firefox/133.0', 'HTTP_ACCEPT': 'application/json, text/plain, */*', 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.5', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate, br, zstd', 'HTTP_ORIGIN': 'http://localhost:3000', 'HTTP_DNT': '1', 'HTTP_SEC_GPC': '1', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_REFERER': 'http://localhost:3000/', 'HTTP_SEC_FETCH_DEST': 'empty', 'HTTP_SEC_FETCH_MODE': 'cors', 'HTTP_SEC_FETCH_SITE': 'same-site'}, 'request_COOKIES_items': dict_items([]), 'user_str': 'AnonymousUser', 'filtered_POST_items': [], 'settings': {'ABSOLUTE_URL_OVERRIDES': {}, 'ADMINS': [], 'ALLOWED_HOSTS': ['*'], 'APPEND_SLASH': True, 'ASGI_APPLICATION': 'marketplace.routing.application', 'AUTHENTICATION_BACKENDS': ['django.contrib.auth.backends.ModelBackend'], 'AUTH_PASSWORD_VALIDATORS': '********************', 'AUTH_USER_MODEL': 'auth.User', 'BASE_DIR': PosixPath('/home/trent22/Documents/EasyMarket'), 'CACHES': {'default': {'BACKEND': 'django_redis.cache.RedisCache', 'LOCATION': 'redis://127.0.0.1:6380/1', 'OPTIONS': {'CLIENT_CLASS': 'django_redis.client.DefaultClient'}}}, 'CACHE_MIDDLEWARE_ALIAS': 'default', 'CACHE_MIDDLEWARE_KEY_PREFIX': '********************', 'CACHE_MIDDLEWARE_SECONDS': 600, 'CHANNEL_LAYERS': {'default': {'BACKEND': 'channels.layers.InMemoryChannelLayer'}}, 'CORS_ALLOWED_ORIGINS': ['http://localhost:3000'], 'CORS_ALLOW_CREDENTIALS': True, 'CRISPY_TEMPLATE_PACK': 'bootstrap4', 'CSRF_COOKIE_AGE': 31449600, 'CSRF_COOKIE_DOMAIN': None, 'CSRF_COOKIE_HTTPONLY': False, 'CSRF_COOKIE_NAME': 'csrftoken', 'CSRF_COOKIE_PATH': '/', 'CSRF_COOKIE_SAMESITE': 'Lax', 'CSRF_COOKIE_SECURE': False, 'CSRF_FAILURE_VIEW': 'django.views.csrf.csrf_failure', 'CSRF_HEADER_NAME': 'HTTP_X_CSRFTOKEN', 'CSRF_TRUSTED_ORIGINS': [], 'CSRF_USE_SESSIONS': False, 'DATABASES': {'default': {'ENGINE': 'django.db.backends.sqlite3', 'NAME': PosixPath('/home/trent22/Documents/EasyMarket/db.sqlite3'), 'ATOMIC_REQUESTS': False, 'AUTOCOMMIT': True, 'CONN_MAX_AGE': 0, 'CONN_HEALTH_CHECKS': False, 'OPTIONS': {}, 'TIME_ZONE': None, 'USER': '', 'PASSWORD': '********************', 'HOST': '', 'PORT': '', 'TEST': {'CHARSET': None, 'COLLATION': None, 'MIGRATE': True, 'MIRROR': None, 'NAME': None}}}, 'DATABASE_ROUTERS': [], 'DATA_UPLOAD_MAX_MEMORY_SIZE': 2621440, 'DATA_UPLOAD_MAX_NUMBER_FIELDS': 1000, 'DATA_UPLOAD_MAX_NUMBER_FILES': 100, 'DATETIME_FORMAT': 'N j, Y, P', 'DATETIME_INPUT_FORMATS': ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M'], 'DATE_FORMAT': 'N j, Y', 'DATE_INPUT_FORMATS': ['%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', '%b %d %Y', '%b %d, %Y', '%d %b %Y', '%d %b, %Y', '%B %d %Y', '%B %d, %Y', '%d %B %Y', '%d %B, %Y'], 'DEBUG': True, 'DEBUG_PROPAGATE_EXCEPTIONS': False, 'DECIMAL_SEPARATOR': '.', 'DEFAULT_AUTO_FIELD': 'django.db.models.BigAutoField', 'DEFAULT_CHARSET': 'utf-8', 'DEFAULT_EXCEPTION_REPORTER': 'django.views.debug.ExceptionReporter', 'DEFAULT_EXCEPTION_REPORTER_FILTER': 'django.views.debug.SafeExceptionReporterFilter', 'DEFAULT_FROM_EMAIL': 'webmaster@localhost', 'DEFAULT_INDEX_TABLESPACE': '', 'DEFAULT_TABLESPACE': '', 'DISALLOWED_USER_AGENTS': [], 'EMAIL_BACKEND': 'django.core.mail.backends.smtp.EmailBackend', 'EMAIL_HOST': 'smtp.gmail.com', 'EMAIL_HOST_PASSWORD': '********************', 'EMAIL_HOST_USER': None, 'EMAIL_PORT': 587, 'EMAIL_SSL_CERTFILE': None, 'EMAIL_SSL_KEYFILE': '********************', 'EMAIL_SUBJECT_PREFIX': '[Django] ', 'EMAIL_TIMEOUT': None, 'EMAIL_USE_LOCALTIME': False, 'EMAIL_USE_SSL': False, 'EMAIL_USE_TLS': True, 'FILE_UPLOAD_DIRECTORY_PERMISSIONS': None, 'FILE_UPLOAD_HANDLERS': ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler'], 'FILE_UPLOAD_MAX_MEMORY_SIZE': 2621440, 'FILE_UPLOAD_PERMISSIONS': 420, 'FILE_UPLOAD_TEMP_DIR': None, 'FIRST_DAY_OF_WEEK': 0, 'FIXTURE_DIRS': [], 'FORCE_SCRIPT_NAME': None, 'FORMAT_MODULE_PATH': None, 'FORMS_URLFIELD_ASSUME_HTTPS': False, 'FORM_RENDERER': 'django.forms.renderers.DjangoTemplates', 'IGNORABLE_404_URLS': [], 'INSTALLED_APPS': ['django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'marketplace.apps.MarketplaceConfig', 'products.apps.ProductsConfig', 'orders.apps.OrdersConfig', 'payment.apps.PaymentConfig', 'adminapp.apps.AdminappConfig', 'staticpages.apps.StaticpagesConfig', 'django_daraja', 'widget_tweaks', 'rest_framework', 'rest_framework_simplejwt', 'corsheaders', 'channels', 'crispy_forms', 'livereload', 'django_redis'], 'INTERNAL_IPS': [], 'LANGUAGES': [('af', 'Afrikaans'), ('ar', 'Arabic'), ('ar-dz', 'Algerian Arabic'), ('ast', 'Asturian'), ('az', 'Azerbaijani'), ('bg', 'Bulgarian'), ('be', 'Belarusian'), ('bn', 'Bengali'), ('br', 'Breton'), ('bs', 'Bosnian'), ('ca', 'Catalan'), ('ckb', 'Central Kurdish (Sorani)'), ('cs', 'Czech'), ('cy', 'Welsh'), ('da', 'Danish'), ('de', 'German'), ('dsb', 'Lower Sorbian'), ('el', 'Greek'), ('en', 'English'), ('en-au', 'Australian English'), ('en-gb', 'British English'), ('eo', 'Esperanto'), ('es', 'Spanish'), ('es-ar', 'Argentinian Spanish'), ('es-co', 'Colombian Spanish'), ('es-mx', 'Mexican Spanish'), ('es-ni', 'Nicaraguan Spanish'), ('es-ve', 'Venezuelan Spanish'), ('et', 'Estonian'), ('eu', 'Basque'), ('fa', 'Persian'), ('fi', 'Finnish'), ('fr', 'French'), ('fy', 'Frisian'), ('ga', 'Irish'), ('gd', 'Scottish Gaelic'), ('gl', 'Galician'), ('he', 'Hebrew'), ('hi', 'Hindi'), ('hr', 'Croatian'), ('hsb', 'Upper Sorbian'), ('hu', 'Hungarian'), ('hy', 'Armenian'), ('ia', 'Interlingua'), ('id', 'Indonesian'), ('ig', 'Igbo'), ('io', 'Ido'), ('is', 'Icelandic'), ('it', 'Italian'), ('ja', 'Japanese'), ('ka', 'Georgian'), ('kab', 'Kabyle'), ('kk', 'Kazakh'), ('km', 'Khmer'), ('kn', 'Kannada'), ('ko', 'Korean'), ('ky', 'Kyrgyz'), ('lb', 'Luxembourgish'), ('lt', 'Lithuanian'), ('lv', 'Latvian'), ('mk', 'Macedonian'), ('ml', 'Malayalam'), ('mn', 'Mongolian'), ('mr', 'Marathi'), ('ms', 'Malay'), ('my', 'Burmese'), ('nb', 'Norwegian Bokml'), ('ne', 'Nepali'), ('nl', 'Dutch'), ('nn', 'Norwegian Nynorsk'), ('os', 'Ossetic'), ('pa', 'Punjabi'), ('pl', 'Polish'), ('pt', 'Portuguese'), ('pt-br', 'Brazilian Portuguese'), ('ro', 'Romanian'), ('ru', 'Russian'), ('sk', 'Slovak'), ('sl', 'Slovenian'), ('sq', 'Albanian'), ('sr', 'Serbian'), ('sr-latn', 'Serbian Latin'), ('sv', 'Swedish'), ('sw', 'Swahili'), ('ta', 'Tamil'), ('te', 'Telugu'), ('tg', 'Tajik'), ('th', 'Thai'), ('tk', 'Turkmen'), ('tr', 'Turkish'), ('tt', 'Tatar'), ('udm', 'Udmurt'), ('ug', 'Uyghur'), ('uk', 'Ukrainian'), ('ur', 'Urdu'), ('uz', 'Uzbek'), ('vi', 'Vietnamese'), ('zh-hans', 'Simplified Chinese'), ('zh-hant', 'Traditional Chinese')], 'LANGUAGES_BIDI': ['he', 'ar', 'ar-dz', 'ckb', 'fa', 'ug', 'ur'], 'LANGUAGE_CODE': 'en-us', 'LANGUAGE_COOKIE_AGE': None, 'LANGUAGE_COOKIE_DOMAIN': None, 'LANGUAGE_COOKIE_HTTPONLY': False, 'LANGUAGE_COOKIE_NAME': 'django_language', 'LANGUAGE_COOKIE_PATH': '/', 'LANGUAGE_COOKIE_SAMESITE': None, 'LANGUAGE_COOKIE_SECURE': False, 'LOCALE_PATHS': [], 'LOGGING': {'version': 1, 'disable_existing_loggers': False, 'formatters': {'verbose': {'format': '{levelname} {asctime} {module} {message}', 'style': '{'}, 'simple': {'format': '{levelname} {message}', 'style': '{'}}, 'handlers': {'console': {'class': 'logging.StreamHandler', 'formatter': 'verbose', 'stream': <_io.TextIOWrapper name='<stdout>' mode='w' encoding='utf-8'>}, 'file': {'level': 'DEBUG', 'class': 'logging.FileHandler', 'filename': '/home/trent22/Documents/EasyMarket/django_debug.log', 'formatter': 'verbose'}}, 'loggers': {'django': {'handlers': ['console', 'file'], 'level': 'DEBUG', 'propagate': True}, 'myapp': {'handlers': ['console', 'file'], 'level': 'DEBUG', 'propagate': False}}}, 'LOGGING_CONFIG': 'logging.config.dictConfig', 'LOGIN_REDIRECT_URL': 'home', 'LOGIN_URL': 'marketplace:signin', 'LOGOUT_REDIRECT_URL': 'home', 'LOGOUT_URL': 'marketplace:signout', 'MANAGERS': [], 'MEDIA_ROOT': PosixPath('/home/trent22/Documents/EasyMarket/media'), 'MEDIA_URL': '/media/', 'MESSAGE_STORAGE': 'django.contrib.messages.storage.fallback.FallbackStorage', 'MIDDLEWARE': ['django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'corsheaders.middleware.CorsMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'whitenoise.middleware.WhiteNoiseMiddleware', 'marketplace.middleware.TwoFactorMiddleware', 'livereload.middleware.LiveReloadScript'], 'MIGRATION_MODULES': {}, 'MONTH_DAY_FORMAT': 'F j', 'MPESA_CALLBACK_URL': 'mpesa_callback', 'MPESA_CONSUMER_KEY': '********************', 'MPESA_CONSUMER_SECRET': '********************', 'MPESA_ENVIRONMENT': 'sandbox', 'MPESA_EXPRESS_SHORTCODE': '174379', 'MPESA_INITIATOR_SECURITY_CREDENTIALS': None, 'MPESA_INITIATOR_USERNAME': None, 'MPESA_PASSKEY': '********************', 'MPESA_SHORTCODE': '174379', 'MPESA_SHORTCODE_TYPE': 'paybill', 'NUMBER_GROUPING': 0, 'PASSWORD_HASHERS': '********************', 'PASSWORD_RESET_TIMEOUT': '********************', 'PAYMENT_HOST': 'http://localhost:8000', 'PAYMENT_MODEL': 'students.Payment', 'PAYMENT_VARIANTS': {'default': ('payments.dummy.DummyProvider', {'url': '/payment/process/'})}, 'PREPEND_WWW': False, 'REST_FRAMEWORK': {'DEFAULT_AUTHENTICATION_CLASSES': ('rest_framework_simplejwt.authentication.JWTAuthentication',), 'DEFAULT_PERMISSION_CLASSES': ['rest_framework.permissions.IsAuthenticated'], 'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination', 'PAGE_SIZE': 10}, 'ROOT_URLCONF': 'students.urls', 'SECRET_KEY': '********************', 'SECRET_KEY_FALLBACKS': '********************', 'SECURE_CONTENT_TYPE_NOSNIFF': True, 'SECURE_CROSS_ORIGIN_OPENER_POLICY': 'same-origin', 'SECURE_HSTS_INCLUDE_SUBDOMAINS': False, 'SECURE_HSTS_PRELOAD': False, 'SECURE_HSTS_SECONDS': 0, 'SECURE_PROXY_SSL_HEADER': None, 'SECURE_REDIRECT_EXEMPT': [], 'SECURE_REFERRER_POLICY': 'same-origin', 'SECURE_SSL_HOST': None, 'SECURE_SSL_REDIRECT': False, 'SERVER_EMAIL': 'root@localhost', 'SESSION_CACHE_ALIAS': 'default', 'SESSION_COOKIE_AGE': 1209600, 'SESSION_COOKIE_DOMAIN': None, 'SESSION_COOKIE_HTTPONLY': True, 'SESSION_COOKIE_NAME': 'sessionid', 'SESSION_COOKIE_PATH': '/', 'SESSION_COOKIE_SAMESITE': 'Lax', 'SESSION_COOKIE_SECURE': False, 'SESSION_ENGINE': 'django.contrib.sessions.backends.cache', 'SESSION_EXPIRE_AT_BROWSER_CLOSE': False, 'SESSION_FILE_PATH': None, 'SESSION_SAVE_EVERY_REQUEST': False, 'SESSION_SERIALIZER': 'django.contrib.sessions.serializers.JSONSerializer', 'SETTINGS_MODULE': 'students.settings', 'SHORT_DATETIME_FORMAT': 'm/d/Y P', 'SHORT_DATE_FORMAT': 'm/d/Y', 'SIGNING_BACKEND': 'django.core.signing.TimestampSigner', 'SILENCED_SYSTEM_CHECKS': [], 'SIMPLE_JWT': {'ACCESS_TOKEN_LIFETIME': '********************', 'REFRESH_TOKEN_LIFETIME': '********************'}, 'STATICFILES_DIRS': [PosixPath('/home/trent22/Documents/EasyMarket/static')], 'STATICFILES_FINDERS': ['django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder'], 'STATICFILES_STORAGE': 'django.contrib.staticfiles.storage.StaticFilesStorage', 'STATIC_ROOT': PosixPath('/home/trent22/Documents/EasyMarket/staticfiles'), 'STATIC_URL': '/static/', 'STORAGES': {'default': {'BACKEND': 'django.core.files.storage.FileSystemStorage'}, 'staticfiles': {'BACKEND': 'django.contrib.staticfiles.storage.StaticFilesStorage'}}, 'TEMPLATES': [{'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [PosixPath('/home/trent22/Documents/EasyMarket/templates')], 'APP_DIRS': True, 'OPTIONS': {'context_processors': ['django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages']}}], 'TEST_NON_SERIALIZED_APPS': [], 'TEST_RUNNER': 'django.test.runner.DiscoverRunner', 'THOUSAND_SEPARATOR': ',', 'TIME_FORMAT': 'P', 'TIME_INPUT_FORMATS': ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M'], 'TIME_ZONE': 'UTC', 'USE_I18N': True, 'USE_THOUSAND_SEPARATOR': False, 'USE_TZ': True, 'USE_X_FORWARDED_HOST': False, 'USE_X_FORWARDED_PORT': False, 'WSGI_APPLICATION': 'students.wsgi.application', 'X_FRAME_OPTIONS': 'DENY', 'YEAR_MONTH_FORMAT': 'F Y'}, 'sys_executable': '/home/trent22/Documents/sudplace/env/sim/bin/python3', 'sys_version_info': '3.10.12', 'server_time': datetime.datetime(2024, 12, 12, 6, 29, 42, 909071, tzinfo=datetime.timezone.utc), 'django_version_info': '5.1.4', 'sys_path': ['.', '/home/trent22/Documents/sudplace/env/sim/bin', '/usr/lib/python310.zip', '/usr/lib/python3.10', '/usr/lib/python3.10/lib-dynload', '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages', '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/setuptools/_vendor'], 'template_info': None, 'template_does_not_exist': False, 'postmortem': None, 'request_GET_items': <generator object MultiValueDict.items at 0x7fd83c5f7140>, 'request_FILES_items': <generator object MultiValueDict.items at 0x7fd83c5f6ff0>, 'request_insecure_uri': 'http://localhost:8000/products/api/products/trending/', 'raising_view_name': 'products.views.ProductViewSet', 'exception_type': 'FieldError', 'exception_value': "Cannot resolve keyword 'average_rating' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists", 'lastframe': {'exc_cause': None, 'exc_cause_explicit': None, 'tb': <traceback object at 0x7fd844b23fc0>, 'type': 'django', 'filename': '/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py', 'function': 'names_to_path', 'lineno': 1768, 'vars': [('self', '<django.db.models.sql.query.Query object at 0x7fd83c5cddb0>'), ('names', "['average_rating']"), ('opts', '<Options for Product>'), ('allow_many', 'True'), ('fail_on_missing', 'True'), ('path', '[]'), ('names_with_path', '[]'), ('pos', '-1'), ('name', "'average_rating'"), ('cur_names_with_path', "('average_rating', [])"), ('field', 'None'), ('filtered_relation', 'None'), ('available', "['avg_rating',\n 'cart',\n 'cartitem',\n 'category',\n 'category_id',\n 'condition',\n 'created_at',\n 'description',\n 'featured',\n 'id',\n 'image',\n 'is_active',\n 'last_sale_date',\n 'last_stock_update',\n 'orderitem',\n 'price',\n 'reserved_stock',\n 'review_count',\n 'reviews',\n 'slug',\n 'stock',\n 'student',\n 'student_id',\n 'title',\n 'total_revenue',\n 'total_sales',\n 'total_sales_amount',\n 'updated_at',\n 'variants',\n 'views_count',\n 'wishlists']")], 'id': 140566842195904, 'pre_context': ['                    available = sorted(', '                        [', '                            *get_field_names_from_opts(opts),', '                            *self.annotation_select,', '                            *self._filtered_relations,', '                        ]', '                    )'], 'context_line': '                    raise FieldError(', 'post_context': ['                        "Cannot resolve keyword \'%s\' into field. "', '                        "Choices are: %s" % (name, ", ".join(available))', '                    )', '                break', '            # Check if we need any joins for concrete inheritance cases (the', '            # field lives in parent, but we are currently in one of its'], 'pre_context_lineno': 1761, 'colno': '', 'tb_area_colno': ''}}]
ERROR 2024-12-12 06:29:46,234 log Internal Server Error: /products/api/products/featured/
Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/current_thread_executor.py", line 40, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py", line 124, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/trent22/Documents/EasyMarket/./products/views.py", line 266, in featured
    response_data = serializer.data
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py", line 795, in data
    ret = super().data
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py", line 249, in data
    self._data = self.to_representation(self.instance)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/serializers.py", line 713, in to_representation
    return [
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 400, in __iter__
    self._fetch_all()
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 1928, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 131, in __iter__
    setattr(obj, attr_name, row[col_pos])
AttributeError: can't set attribute 'review_count'
ERROR 2024-12-12 06:29:46,365 log Internal Server Error: /products/api/products/trending/
Traceback (most recent call last):
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/current_thread_executor.py", line 40, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/viewsets.py", line 124, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 509, in dispatch
    response = self.handle_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 469, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 480, in raise_uncaught_exception
    raise exc
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/rest_framework/views.py", line 506, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/trent22/Documents/EasyMarket/./products/views.py", line 280, in trending
    queryset = self.get_queryset().filter(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py", line 756, in resolve_expression
    rhs = self.rhs.resolve_expression(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py", line 753, in resolve_expression
    lhs = self.lhs.resolve_expression(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 2010, in resolve_ref
    join_info = self.setup_joins(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 1863, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
  File "/home/trent22/Documents/sudplace/env/sim/lib/python3.10/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
django.core.exceptions.FieldError: Cannot resolve keyword 'average_rating' into field. Choices are: avg_rating, cart, cartitem, category, category_id, condition, created_at, description, featured, id, image, is_active, last_sale_date, last_stock_update, orderitem, price, reserved_stock, review_count, reviews, slug, stock, student, student_id, title, total_revenue, total_sales, total_sales_amount, updated_at, variants, views_count, wishlists
DEBUG 2024-12-12 06:37:27,455 utils (0.035) 
            SELECT name, type FROM sqlite_master
            WHERE type in ('table', 'view') AND NOT name='sqlite_sequence'
            ORDER BY name; args=None; alias=default
DEBUG 2024-12-12 06:37:27,549 utils (0.001) SELECT "django_migrations"."id", "django_migrations"."app", "django_migrations"."name", "django_migrations"."applied" FROM "django_migrations"; args=(); alias=default
DEBUG 2024-12-12 06:37:42,768 utils (0.003) 
            SELECT name, type FROM sqlite_master
            WHERE type in ('table', 'view') AND NOT name='sqlite_sequence'
            ORDER BY name; args=None; alias=default
DEBUG 2024-12-12 06:37:42,778 utils (0.001) SELECT "django_migrations"."id", "django_migrations"."app", "django_migrations"."name", "django_migrations"."applied" FROM "django_migrations"; args=(); alias=default
DEBUG 2024-12-12 06:37:42,787 utils (0.000) 
            SELECT name, type FROM sqlite_master
            WHERE type in ('table', 'view') AND NOT name='sqlite_sequence'
            ORDER BY name; args=None; alias=default
DEBUG 2024-12-12 06:37:42,790 utils (0.000) SELECT "django_migrations"."id", "django_migrations"."app", "django_migrations"."name", "django_migrations"."applied" FROM "django_migrations"; args=(); alias=default
DEBUG 2024-12-12 06:37:43,036 utils (0.000) 
            SELECT name, type FROM sqlite_master
            WHERE type in ('table', 'view') AND NOT name='sqlite_sequence'
            ORDER BY name; args=None; alias=default
DEBUG 2024-12-12 06:37:43,039 utils (0.000) SELECT "django_migrations"."id", "django_migrations"."app", "django_migrations"."name", "django_migrations"."applied" FROM "django_migrations"; args=(); alias=default
DEBUG 2024-12-12 06:37:43,045 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'admin'; args=('admin',); alias=default
DEBUG 2024-12-12 06:37:43,049 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'admin' AND "django_content_type"."model" IN ('logentry')); args=('admin', 'logentry'); alias=default
DEBUG 2024-12-12 06:37:43,088 utils (0.029) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (1) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(1,); alias=default
DEBUG 2024-12-12 06:37:43,091 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'admin'; args=('admin',); alias=default
DEBUG 2024-12-12 06:37:43,094 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'auth'; args=('auth',); alias=default
DEBUG 2024-12-12 06:37:43,098 utils (0.001) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'auth' AND "django_content_type"."model" IN ('user', 'permission', 'group')); args=('auth', 'user', 'permission', 'group'); alias=default
DEBUG 2024-12-12 06:37:43,103 utils (0.001) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (2, 3, 4) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(2, 3, 4); alias=default
DEBUG 2024-12-12 06:37:43,106 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'auth'; args=('auth',); alias=default
DEBUG 2024-12-12 06:37:43,109 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'contenttypes'; args=('contenttypes',); alias=default
DEBUG 2024-12-12 06:37:43,112 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'contenttypes' AND "django_content_type"."model" IN ('contenttype')); args=('contenttypes', 'contenttype'); alias=default
DEBUG 2024-12-12 06:37:43,117 utils (0.000) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (5) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(5,); alias=default
DEBUG 2024-12-12 06:37:43,121 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'contenttypes'; args=('contenttypes',); alias=default
DEBUG 2024-12-12 06:37:43,124 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'sessions'; args=('sessions',); alias=default
DEBUG 2024-12-12 06:37:43,128 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'sessions' AND "django_content_type"."model" IN ('session')); args=('sessions', 'session'); alias=default
DEBUG 2024-12-12 06:37:43,137 utils (0.000) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (6) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(6,); alias=default
DEBUG 2024-12-12 06:37:43,150 utils (0.001) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'sessions'; args=('sessions',); alias=default
DEBUG 2024-12-12 06:37:43,154 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'marketplace'; args=('marketplace',); alias=default
DEBUG 2024-12-12 06:37:43,159 utils (0.001) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'marketplace' AND "django_content_type"."model" IN ('wishlist', 'userprofile', 'review', 'reaction', 'customuser', 'cart', 'cartitem', 'student', 'message')); args=('marketplace', 'wishlist', 'userprofile', 'review', 'reaction', 'customuser', 'cart', 'cartitem', 'student', 'message'); alias=default
DEBUG 2024-12-12 06:37:43,166 utils (0.001) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (7, 8, 9, 10, 11, 12, 13, 14, 15) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(7, 8, 9, 10, 11, 12, 13, 14, 15); alias=default
DEBUG 2024-12-12 06:37:43,170 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'marketplace'; args=('marketplace',); alias=default
DEBUG 2024-12-12 06:37:43,175 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'products'; args=('products',); alias=default
DEBUG 2024-12-12 06:37:43,182 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'products' AND "django_content_type"."model" IN ('productvariant', 'product', 'category')); args=('products', 'productvariant', 'product', 'category'); alias=default
DEBUG 2024-12-12 06:37:43,188 utils (0.000) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (16, 17, 18) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(16, 17, 18); alias=default
DEBUG 2024-12-12 06:37:43,192 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'products'; args=('products',); alias=default
DEBUG 2024-12-12 06:37:43,195 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'orders'; args=('orders',); alias=default
DEBUG 2024-12-12 06:37:43,200 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'orders' AND "django_content_type"."model" IN ('order', 'orderitem', 'shippingaddress')); args=('orders', 'order', 'orderitem', 'shippingaddress'); alias=default
DEBUG 2024-12-12 06:37:43,206 utils (0.000) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (19, 20, 21) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(19, 20, 21); alias=default
DEBUG 2024-12-12 06:37:43,209 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'orders'; args=('orders',); alias=default
DEBUG 2024-12-12 06:37:43,213 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'payment'; args=('payment',); alias=default
DEBUG 2024-12-12 06:37:43,217 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'payment' AND "django_content_type"."model" IN ('transaction')); args=('payment', 'transaction'); alias=default
DEBUG 2024-12-12 06:37:43,223 utils (0.000) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (22) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(22,); alias=default
DEBUG 2024-12-12 06:37:43,227 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'payment'; args=('payment',); alias=default
DEBUG 2024-12-12 06:37:43,230 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'staticpages'; args=('staticpages',); alias=default
DEBUG 2024-12-12 06:37:43,235 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'staticpages' AND "django_content_type"."model" IN ('testimonial', 'staticpage', 'faq', 'contactmessage')); args=('staticpages', 'testimonial', 'staticpage', 'faq', 'contactmessage'); alias=default
DEBUG 2024-12-12 06:37:43,242 utils (0.001) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (24, 25, 26, 23) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(24, 25, 26, 23); alias=default
DEBUG 2024-12-12 06:37:43,245 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'staticpages'; args=('staticpages',); alias=default
DEBUG 2024-12-12 06:37:43,249 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'django_daraja'; args=('django_daraja',); alias=default
DEBUG 2024-12-12 06:37:43,253 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE ("django_content_type"."app_label" = 'django_daraja' AND "django_content_type"."model" IN ('accesstoken')); args=('django_daraja', 'accesstoken'); alias=default
DEBUG 2024-12-12 06:37:43,259 utils (0.000) SELECT "auth_permission"."content_type_id", "auth_permission"."codename" FROM "auth_permission" INNER JOIN "django_content_type" ON ("auth_permission"."content_type_id" = "django_content_type"."id") WHERE "auth_permission"."content_type_id" IN (27) ORDER BY "django_content_type"."app_label" ASC, "django_content_type"."model" ASC, "auth_permission"."codename" ASC; args=(27,); alias=default
DEBUG 2024-12-12 06:37:43,262 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'django_daraja'; args=('django_daraja',); alias=default
DEBUG 2024-12-12 06:37:43,265 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'widget_tweaks'; args=('widget_tweaks',); alias=default
DEBUG 2024-12-12 06:37:43,272 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'widget_tweaks'; args=('widget_tweaks',); alias=default
DEBUG 2024-12-12 06:37:43,275 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'rest_framework_simplejwt'; args=('rest_framework_simplejwt',); alias=default
DEBUG 2024-12-12 06:37:43,282 utils (0.000) SELECT "django_content_type"."id", "django_content_type"."app_label", "django_content_type"."model" FROM "django_content_type" WHERE "django_content_type"."app_label" = 'rest_framework_simplejwt'; args=('rest_framework_simplejwt',); alias=default
DEBUG 2024-12-12 06:38:12,128 base Asynchronous handler adapted for middleware marketplace.middleware.TwoFactorMiddleware.
WARNING 2024-12-12 06:39:53,150 log Unauthorized: /marketplace/api/wishlist/
WARNING 2024-12-12 06:39:53,166 log Unauthorized: /marketplace/api/wishlist/
WARNING 2024-12-12 06:40:14,496 log Unauthorized: /products/api/categories/
WARNING 2024-12-12 06:40:14,498 log Unauthorized: /products/api/categories/
DEBUG 2024-12-12 06:40:16,001 utils (0.177) SELECT COUNT(*) AS "__count" FROM "products_product" WHERE "products_product"."is_active"; args=(); alias=default
DEBUG 2024-12-12 06:40:16,031 utils (0.206) SELECT COUNT(*) AS "__count" FROM "products_product" WHERE "products_product"."is_active"; args=(); alias=default
DEBUG 2024-12-12 06:40:16,107 utils (0.037) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE "products_product"."is_active" ORDER BY "products_product"."created_at" DESC LIMIT 1; args=(); alias=default
DEBUG 2024-12-12 06:40:16,108 utils (0.040) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined", "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_product" INNER JOIN "marketplace_student" ON ("products_product"."student_id" = "marketplace_student"."id") INNER JOIN "auth_user" ON ("marketplace_student"."user_id" = "auth_user"."id") INNER JOIN "products_category" ON ("products_product"."category_id" = "products_category"."id") WHERE "products_product"."is_active" ORDER BY "products_product"."created_at" DESC LIMIT 1; args=(); alias=default
DEBUG 2024-12-12 06:40:16,156 utils (0.005) SELECT "marketplace_review"."id", "marketplace_review"."product_id", "marketplace_review"."reviewer_id", "marketplace_review"."rating", "marketplace_review"."comment", "marketplace_review"."timestamp" FROM "marketplace_review" WHERE "marketplace_review"."product_id" IN (1); args=(1,); alias=default
DEBUG 2024-12-12 06:40:16,163 utils (0.007) SELECT "marketplace_review"."id", "marketplace_review"."product_id", "marketplace_review"."reviewer_id", "marketplace_review"."rating", "marketplace_review"."comment", "marketplace_review"."timestamp" FROM "marketplace_review" WHERE "marketplace_review"."product_id" IN (1); args=(1,); alias=default
DEBUG 2024-12-12 06:40:16,171 utils (0.000) SELECT AVG("marketplace_review"."rating") AS "rating__avg" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:40:16,235 utils (0.000) SELECT AVG("marketplace_review"."rating") AS "rating__avg" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:40:16,353 utils (0.024) SELECT 1 AS "a" FROM "products_product_variants" WHERE "products_product_variants"."product_id" = 1 LIMIT 1; args=(1, 1); alias=default
DEBUG 2024-12-12 06:40:16,356 utils (0.023) SELECT 1 AS "a" FROM "products_product_variants" WHERE "products_product_variants"."product_id" = 1 LIMIT 1; args=(1, 1); alias=default
WARNING 2024-12-12 06:48:13,266 log Unauthorized: /marketplace/api/wishlist/
WARNING 2024-12-12 06:48:13,291 log Unauthorized: /marketplace/api/wishlist/
DEBUG 2024-12-12 06:48:15,212 utils (0.341) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date" FROM "products_product" WHERE ("products_product"."is_active" AND "products_product"."slug" = 'the-larry') LIMIT 21; args=('the-larry',); alias=default
DEBUG 2024-12-12 06:48:15,387 utils (0.015) SELECT "products_category"."id", "products_category"."name", "products_category"."description", "products_category"."image", "products_category"."slug", "products_category"."is_active", "products_category"."created_at", "products_category"."updated_at" FROM "products_category" WHERE "products_category"."id" = 1 LIMIT 21; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,415 utils (0.001) SELECT COUNT(*) AS "__count" FROM "products_product" WHERE ("products_product"."category_id" = 1 AND "products_product"."is_active"); args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,459 utils (0.024) SELECT "marketplace_student"."id", "marketplace_student"."user_id", "marketplace_student"."first_name", "marketplace_student"."last_name", "marketplace_student"."email", "marketplace_student"."bio" FROM "marketplace_student" WHERE "marketplace_student"."id" = 1 LIMIT 21; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,569 utils (0.072) SELECT AVG("marketplace_review"."rating") AS "reviews__rating__avg" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") WHERE "products_product"."student_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,614 utils (0.020) SELECT "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."id" = 1 LIMIT 21; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,620 utils (0.000) SELECT COUNT(*) AS "__count" FROM "products_product" WHERE "products_product"."student_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,679 utils (0.000) SELECT AVG("marketplace_review"."rating") AS "rating__avg" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,683 utils (0.000) SELECT COUNT(*) AS "__count" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,693 utils (0.001) SELECT "marketplace_review"."id", "marketplace_review"."product_id", "marketplace_review"."reviewer_id", "marketplace_review"."rating", "marketplace_review"."comment", "marketplace_review"."timestamp", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "marketplace_review" INNER JOIN "auth_user" ON ("marketplace_review"."reviewer_id" = "auth_user"."id") WHERE "marketplace_review"."product_id" = 1 ORDER BY "marketplace_review"."timestamp" DESC LIMIT 3; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,739 utils (0.001) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", COUNT("marketplace_review"."id") AS "similarity_score" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") WHERE ("products_product"."category_id" = 1 AND "products_product"."is_active" AND NOT ("products_product"."id" = 1)) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date" ORDER BY "products_product"."created_at" DESC LIMIT 4; args=(1, 1); alias=default
DEBUG 2024-12-12 06:48:15,793 utils (0.024) SELECT "products_productvariant"."id", "products_productvariant"."name", "products_productvariant"."sku", "products_productvariant"."price_adjustment", "products_productvariant"."stock", "products_productvariant"."reserved_stock", "products_productvariant"."is_active", "products_productvariant"."created_at", "products_productvariant"."updated_at" FROM "products_productvariant" INNER JOIN "products_product_variants" ON ("products_productvariant"."id" = "products_product_variants"."productvariant_id") WHERE "products_product_variants"."product_id" = 1 ORDER BY "products_productvariant"."name" ASC; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,799 utils (0.000) SELECT AVG("marketplace_review"."rating") AS "rating__avg" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:15,826 utils (0.001) SELECT COUNT(*) AS "__count" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:16,020 utils (0.120) UPDATE "products_product" SET "views_count" = ("products_product"."views_count" + 1) WHERE "products_product"."id" = 1; args=(1, 1); alias=default
DEBUG 2024-12-12 06:48:16,164 utils (0.140) UPDATE "products_product" SET "views_count" = ("products_product"."views_count" + 1) WHERE "products_product"."id" = 1; args=(1, 1); alias=default
DEBUG 2024-12-12 06:48:16,181 utils (0.000) SELECT COUNT(*) AS "__count" FROM "products_product" WHERE ("products_product"."category_id" = 1 AND "products_product"."is_active"); args=(1,); alias=default
DEBUG 2024-12-12 06:48:16,190 utils (0.000) SELECT AVG("marketplace_review"."rating") AS "reviews__rating__avg" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") WHERE "products_product"."student_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:16,198 utils (0.000) SELECT COUNT(*) AS "__count" FROM "products_product" WHERE "products_product"."student_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:16,216 utils (0.001) SELECT AVG("marketplace_review"."rating") AS "rating__avg" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:16,243 utils (0.000) SELECT COUNT(*) AS "__count" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:16,249 utils (0.000) SELECT "marketplace_review"."id", "marketplace_review"."product_id", "marketplace_review"."reviewer_id", "marketplace_review"."rating", "marketplace_review"."comment", "marketplace_review"."timestamp", "auth_user"."id", "auth_user"."password", "auth_user"."last_login", "auth_user"."is_superuser", "auth_user"."username", "auth_user"."first_name", "auth_user"."last_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."date_joined" FROM "marketplace_review" INNER JOIN "auth_user" ON ("marketplace_review"."reviewer_id" = "auth_user"."id") WHERE "marketplace_review"."product_id" = 1 ORDER BY "marketplace_review"."timestamp" DESC LIMIT 3; args=(1,); alias=default
DEBUG 2024-12-12 06:48:16,316 utils (0.001) SELECT "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date", COUNT("marketplace_review"."id") AS "similarity_score" FROM "products_product" LEFT OUTER JOIN "marketplace_review" ON ("products_product"."id" = "marketplace_review"."product_id") WHERE ("products_product"."category_id" = 1 AND "products_product"."is_active" AND NOT ("products_product"."id" = 1)) GROUP BY "products_product"."id", "products_product"."title", "products_product"."description", "products_product"."price", "products_product"."student_id", "products_product"."category_id", "products_product"."condition", "products_product"."created_at", "products_product"."updated_at", "products_product"."is_active", "products_product"."image", "products_product"."slug", "products_product"."stock", "products_product"."reserved_stock", "products_product"."views_count", "products_product"."featured", "products_product"."last_stock_update", "products_product"."total_sales", "products_product"."total_revenue", "products_product"."last_sale_date" ORDER BY "products_product"."created_at" DESC LIMIT 4; args=(1, 1); alias=default
DEBUG 2024-12-12 06:48:16,360 utils (0.001) SELECT "products_productvariant"."id", "products_productvariant"."name", "products_productvariant"."sku", "products_productvariant"."price_adjustment", "products_productvariant"."stock", "products_productvariant"."reserved_stock", "products_productvariant"."is_active", "products_productvariant"."created_at", "products_productvariant"."updated_at" FROM "products_productvariant" INNER JOIN "products_product_variants" ON ("products_productvariant"."id" = "products_product_variants"."productvariant_id") WHERE "products_product_variants"."product_id" = 1 ORDER BY "products_productvariant"."name" ASC; args=(1,); alias=default
DEBUG 2024-12-12 06:48:16,373 utils (0.000) SELECT AVG("marketplace_review"."rating") AS "rating__avg" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
DEBUG 2024-12-12 06:48:16,377 utils (0.000) SELECT COUNT(*) AS "__count" FROM "marketplace_review" WHERE "marketplace_review"."product_id" = 1; args=(1,); alias=default
